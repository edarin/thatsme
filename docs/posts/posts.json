[
  {
    "path": "posts/2021-10-21-which-population-microdata-can-we-openly-access/",
    "title": "What population microdata are openly accessible?",
    "description": "Population microdata are key input to estimate and map population. \nThey are however often difficult to access when derived from household survey pre-listings: (1) because of the limited number of\nhousehold survey (2) because of the confidentiality of cluster locations (3) because \nit is operationnal data that is not cleaned and stored appropriately for reuse.\nWe explore in this blog post the availibility of two promising datasets for population modelling:\nIPUMS-International and the Demographic and Health Surveys programm.",
    "author": [
      {
        "name": "Edith Darin",
        "url": {}
      }
    ],
    "date": "2021-10-21",
    "categories": [],
    "contents": "\r\nPopulation microdata are key input to estimate and map population in the absence of a complete and recent census (Wardrop et al. 2018). D. R. Leasure et al. (2020) developed a hierarchical Bayesian modelling framework combining pre-survey household listing with geospatial covariates to predict population count with high spatial resolution.\r\nIn settings where household listings are not available, Boo et al. (2019) carried out a microcensus survey, that is a household survey in well-defined small clusters aiming at enumerating the resident population.\r\nHousehold surveys are expensive exercises and operational data such as household pre-listings are often not accessible because not deemed worth cleaning, pseudonymising, or even storing.\r\nTo overcome those limitations in accessing population microdata, D. Leasure, Tatem, and Bondarenko (2020) developed a Bayesian model with the Integrated Public Use Microdata Series-International (Ruggles et al. 2003), that is a 10% sample of individual data from censuses, combined with building footprints (Ecopia.AI and Maxar Technologies 2019) and national projections (Raftery, Alkema, and Gerland 2014).\r\nThere is another source for population microdata that is available upon simple request: the Demographic and Health Surveys (Corsi et al. 2012).\r\nIn this blog post, we explore the availability of both data sets across time and country.\r\nWe copy/pasted available datasets from the download website page of both institutions as well as a table linking countries to their continent and we stored them here:\r\nIf you want to access the code just fold out this block:\r\n\r\n\r\nhide\r\n\r\nlibrary(tidyverse)\r\nlibrary(ggplot2)\r\nlibrary(kableExtra)\r\n\r\ncontinent <- read_csv('data/continent_country.csv')\r\nipums <- read_csv( 'data/ipums_samples_date.csv')\r\ndhs <- read_csv('data/dhs_samples_date.csv')\r\n\r\n# DHS metadata cleaning\r\n\r\ndhs_cleaned <- dhs %>% \r\n  rowwise() %>% \r\n  mutate(\r\n    Survey =  str_remove(Survey, \" \\\\(.+\\\\)\"),\r\n    country = str_remove(Survey, \" \\\\d+\\\\-*\\\\d*+\"),\r\n    year = str_split(Survey, \" \")[[1]][length(str_split(Survey, \" \")[[1]])],\r\n    year = ifelse(grepl(\"-\", year), paste0(str_sub(year,1,2), str_sub(year, -2,-1)), year),\r\n    source = 'dhs'\r\n  ) %>% \r\n  select(-Survey, -`GPS Datasets`)\r\n\r\n# IPUMS metadata formatting\r\nipums_cleaned <- ipums %>% \r\n      pivot_longer(-country, values_to = 'year') %>% \r\n      select(-name) %>% \r\n      filter(!is.na(year)) %>% \r\n      mutate(source = 'ipums')\r\n\r\n# Build master dataset for visualising\r\nmaster <- rbind( ipums_cleaned, dhs_cleaned) %>% \r\n  ungroup() %>% \r\n  # assign continent to countries\r\n  left_join(\r\n    continent\r\n  ) %>% \r\n  # prepare variable for plotting\r\n  mutate(\r\n    country_f = fct_reorder(country, continent),\r\n    year_label= paste0(str_sub(year, 1,3), \"0\")) %>% \r\n  filter(!is.na(continent)& year_label>=1960) \r\n\r\n# Plot data\r\n\r\nyear_label <- unique(master$year_label)\r\n\r\nggplot(master , aes(x=year, y=country_f,  color=source))+\r\n  geom_line()+\r\n  geom_point()+\r\n  # replace individual year by grouped year\r\n  scale_x_discrete(breaks=year_label, labels=year_label)+\r\n  # remove coutnry names\r\n  scale_y_discrete(breaks=NULL, name='')+\r\n  # use faceting to group country by continent\r\n  facet_grid(rows = vars(continent), scales = \"free_y\", switch='y', space = \"free_y\") +\r\n  theme_minimal()+\r\n  theme(panel.spacing = unit(0, \"lines\"), \r\n        strip.background = element_blank(),\r\n        strip.placement = \"outside\",\r\n        strip.text.y.left = element_text(angle = 0))+\r\n  labs(title= 'Dates of available DHS and IPUMS data for every country')+\r\n  scale_colour_manual(values=c( \"seagreen4\", \"orchid1\"))\r\n\r\n\r\n\r\n\r\nLow and middle income countries are concentrated in Africa, Asia and South America, where we see less data avaialble through IPUMS and more regular data from DHS.\r\n\r\n\r\n\r\nBoo, Gianluca, Édith Darin, Douglas R. Leasure, and Andrew Tatem. 2019. “High-Resolution Population Mapping and Estimation in the Western Part of the Democratic Republic of Congo.” Unpublished. https://doi.org/10.13140/RG.2.2.24975.94880.\r\n\r\n\r\nCorsi, Daniel J, Melissa Neuman, Jocelyn E Finlay, and SV Subramanian. 2012. “Demographic and Health Surveys: A Profile.” International Journal of Epidemiology 41 (6): 1602–13. https://doi.org/10.1093/ije/dys184.\r\n\r\n\r\nEcopia.AI, and Maxar Technologies. 2019. Digitize Africa Data. http://digitizeafrica.ai.\r\n\r\n\r\nLeasure, Douglas R, Warren C Jochem, Eric M Weber, Vincent Seaman, and Andrew J Tatem. 2020. “National Population Mapping from Sparse Survey Data: A Hierarchical Bayesian Modeling Framework to Account for Uncertainty.” Proceedings of the National Academy of Sciences.\r\n\r\n\r\nLeasure, Douglas, Andrew Tatem, and Maksym Bondarenko. 2020. “A Bayesian Approach to Produce 100 m Gridded Population Estimates Using Census Microdata and Recent Building Footprints.”\r\n\r\n\r\nRaftery, Adrian E., Leontine Alkema, and Patrick Gerland. 2014. “Bayesian Population Projections for the United Nations.” Statistical Science : A Review Journal of the Institute of Mathematical Statistics 29 (1): 58–68. https://doi.org/10.1214/13-STS419.\r\n\r\n\r\nRuggles, Steven, Miriam L. King, Deborah Levison, Robert McCaa, and Matthew Sobek. 2003. “IPUMS-International.” Historical Methods: A Journal of Quantitative and Interdisciplinary History 36 (2): 60–65.\r\n\r\n\r\nWardrop, NA, WC Jochem, TJ Bird, HR Chamberlain, D Clarke, D Kerr, L Bengtsson, S Juran, V Seaman, and AJ Tatem. 2018. “Spatially Disaggregated Population Estimates in the Absence of National Population and Housing Census Data.” Proceedings of the National Academy of Sciences 115 (14): 35293537. https://doi.org/10.1073/pnas.1715305115.\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-10-21-which-population-microdata-can-we-openly-access/which-population-microdata-can-we-openly-access_files/figure-html5/unnamed-chunk-1-1.png",
    "last_modified": "2021-10-21T14:06:46+01:00",
    "input_file": "which-population-microdata-can-we-openly-access.knit.md",
    "preview_width": 1248,
    "preview_height": 768
  },
  {
    "path": "posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/",
    "title": "How to get a clear view of hierarchical data? Answer: Sunburst Charts",
    "description": "Sunburst charts are a great tool to visualise hierarchichal data structure and unravel missing combinations. Useful as an exploratory analysis for Bayesian hierarchical models.",
    "author": [
      {
        "name": "Edith Darin",
        "url": {}
      }
    ],
    "date": "2021-07-31",
    "categories": [],
    "contents": "\r\nBackground\r\nBayesian models are great for hierarchical data, that is observations that have a grouped structure, typically grades of students that belongs to different classrooms in different schools.\r\nThis type of data structure violates the assumption of independence, key for basic models and can produce mislead conclusions, when the group-specific patterns differ from the global pattern.\r\nBut the point here is not to describe Bayesian hierarchichal models.\r\nWe are taking a step backward and we want to visualise the hierarchical structure of our data, for two reasons:\r\ncommunicate with a lay audience\r\nexplore the groupings\r\nIndeed there are two types of data hierarchy: crossed and nested. A crossed design happens when all combination of groupings exist (either in data or in reality). Typically if we were to distinguish between foreign-born and native students, we would expect that this grouping can occur in every classroom. On the opposite, a nested design describes a strict hierarchy, typically, one classroom belongs to one and only one school.\r\nWe want to show that sunburst charts1 are a great tool to visualise the hierarchy and combined with some tidyverse magic can unravel missing combinations.\r\n\r\nR set-up\r\n\r\n\r\nshow\r\n\r\nlibrary(tidyverse)\r\nlibrary(RColorBrewer)\r\nlibrary(kableExtra)\r\nlibrary(plotly) # contains function for sunburst plot\r\n\r\n\r\n\r\nData\r\nWe will use a dataset provided by Leasure and al. as supplement to their paper (Douglas R. Leasure et al. 2020a).\r\n\r\n\r\nshow\r\n\r\n# download  tutorial data\r\ndownload.file(\r\n  \"https://www.pnas.org/highwire/filestream/949050/field_highwire_adjunct_files/1/pnas.1913050117.sd01.xls\",\r\n  '_posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/nga_demo_data.xls',\r\n  method='libcurl',\r\n  mode='wb'\r\n)\r\ngetwd()\r\n\r\n\r\n\r\nIt consist in household surveys that collected information on the total population in 1141 clusters in 15 of 37 states in Nigeria during 2016 and 2017. The surveys are further described in Douglas R. Leasure et al. (2020b) and Weber et al. (2018).\r\n\r\n\r\nshow\r\n\r\n# prepare data\r\ndata <- readxl::read_excel('_posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/nga_demo_data.xls')\r\n\r\ndata <- data %>% \r\n  mutate(\r\n    id = paste0('cluster',1:nrow(data)),\r\n    pop_density=N/A\r\n  ) %>% \r\n  rename(\r\n    population=N\r\n  ) %>% \r\n  select(id, population, pop_density, type, region, state, local )\r\n\r\ndata %>% head()  %>% kbl() %>% kable_minimal()\r\n\r\n\r\n\r\nid\r\n\r\n\r\npopulation\r\n\r\n\r\npop_density\r\n\r\n\r\ntype\r\n\r\n\r\nregion\r\n\r\n\r\nstate\r\n\r\n\r\nlocal\r\n\r\n\r\ncluster1\r\n\r\n\r\n547\r\n\r\n\r\n180.11207\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n1\r\n\r\n\r\n4\r\n\r\n\r\ncluster2\r\n\r\n\r\n803\r\n\r\n\r\n268.57792\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n1\r\n\r\n\r\n10\r\n\r\n\r\ncluster3\r\n\r\n\r\n750\r\n\r\n\r\n243.64275\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n1\r\n\r\n\r\n12\r\n\r\n\r\ncluster4\r\n\r\n\r\n281\r\n\r\n\r\n93.06772\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n1\r\n\r\n\r\n17\r\n\r\n\r\ncluster5\r\n\r\n\r\n730\r\n\r\n\r\n241.30606\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n1\r\n\r\n\r\n4\r\n\r\n\r\ncluster6\r\n\r\n\r\n529\r\n\r\n\r\n171.19344\r\n\r\n\r\n1\r\n\r\n\r\n2\r\n\r\n\r\n1\r\n\r\n\r\n17\r\n\r\n\r\nThere are two sources of grouping in the data: by settlement type and by administrative divisions. There is three levels of administrative divisions reported: region, state and local governement area local. Settlement type is characteristic of a crossed hierarchy: every settlement type can be (potentially) present in all subgrouping eg in all regions, states or local government area.\r\nWe plot first the variation of the response variable population_density by settlement type\r\n\r\n\r\nshow\r\n\r\n# plot population density per region\r\nggplot(data %>% \r\n         group_by(\r\n           region\r\n         ) %>% \r\n         mutate(\r\n           mean_popDens = mean(pop_density)\r\n           ) %>% \r\n         ungroup(), \r\n       aes(fill=mean_popDens, x=pop_density, y=as.factor(region)))+\r\n  geom_boxplot()+\r\n  theme_minimal()+\r\n  scale_fill_stepsn( colours = brewer.pal(6, \"YlOrRd\"))+\r\n  labs(fill='Mean \\npopulation \\ndensity', x='Population density', y='Region')\r\n\r\n\r\n\r\n\r\nFigure 1: Boxplot of population densities per region\r\n\r\n\r\n\r\nFigure 1 shows the motivation for building a hierarchical model.\r\nVisualising the hierarchical structure\r\nWe will make the use of the chart type sunburstof the package plotly.\r\nWe need first to prepare the data with unique identifier for each administrative region:\r\n\r\n\r\nshow\r\n\r\n# create unique id for the nested admin level\r\ndata <- data %>% \r\n  mutate(state= paste0(state,region),\r\n         local = paste0(state, local))\r\n\r\n\r\n\r\nA sunburst chart is divided into concentric layers that are defined by the idof each grouping and its corresponding parent.\r\nWe define the first layer, that is the kernel of the circles with the level typefrom the hierarchy. Because it is the kernel it has no parents we leave this attribute blank. We define also an attribute hoverto display the number of clusters in each grouping on hover.\r\n\r\n\r\nshow\r\n\r\nlayer1 <- data %>% \r\n    group_by(type) %>% \r\n    summarise(n=n()) %>% \r\n    mutate(\r\n      ids = paste0('settlement', type),\r\n      labels = paste0('settlement <br>', type),\r\n      parents = '') %>% \r\n    ungroup() %>% \r\n    select(ids,labels, parents,n) %>% \r\n  mutate(\r\n    hover= paste('\\n sample size', n)\r\n  )\r\n\r\nplot_ly(layer1, \r\n        ids = ~ids, \r\n        labels = ~labels, \r\n        parents = ~parents, \r\n        type = 'sunburst', \r\n        hovertext=~hover, insidetextorientation='radial')\r\n\r\n\r\n\r\n{\"x\":{\"visdat\":{\"820c519f3af5\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"820c519f3af5\",\"attrs\":{\"820c519f3af5\":{\"ids\":{},\"labels\":{},\"parents\":{},\"hovertext\":{},\"insidetextorientation\":\"radial\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"sunburst\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"ids\":[\"settlement1\",\"settlement2\",\"settlement3\",\"settlement4\",\"settlement5\"],\"labels\":[\"settlement <br>1\",\"settlement <br>2\",\"settlement <br>3\",\"settlement <br>4\",\"settlement <br>5\"],\"parents\":[\"\",\"\",\"\",\"\",\"\"],\"hovertext\":[\"<br /> sample size 117\",\"<br /> sample size 164\",\"<br /> sample size 106\",\"<br /> sample size 113\",\"<br /> sample size 641\"],\"insidetextorientation\":\"radial\",\"type\":\"sunburst\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\r\nThe next level corresponds the region and has for parent the settlement type ids previously defined:\r\n\r\n\r\nshow\r\n\r\nsunburst_data_2layers <- rbind(\r\n  # first layer\r\n  layer1,\r\n  # second layer\r\n  data %>% \r\n    group_by(type, region) %>% \r\n    summarise(n=n()) %>% \r\n    mutate(\r\n      ids = paste('settlement', type, '-', 'region', region),\r\n      labels = paste0('region ', region),\r\n      parents = paste0('settlement', type))%>% \r\n    ungroup() %>% \r\n    select(ids,labels, parents,n)%>% \r\n  mutate(\r\n    hover= paste(ids, '\\n sample size', n)\r\n  )) \r\n\r\nplot_ly(sunburst_data_2layers, \r\n        ids = ~ids, \r\n        labels = ~labels,\r\n        parents = ~parents, \r\n        type = 'sunburst', \r\n        hovertext=~hover, insidetextorientation='radial')\r\n\r\n\r\n\r\n{\"x\":{\"visdat\":{\"820c5e6f3d2f\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"820c5e6f3d2f\",\"attrs\":{\"820c5e6f3d2f\":{\"ids\":{},\"labels\":{},\"parents\":{},\"hovertext\":{},\"insidetextorientation\":\"radial\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"sunburst\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"ids\":[\"settlement1\",\"settlement2\",\"settlement3\",\"settlement4\",\"settlement5\",\"settlement 1 - region 1\",\"settlement 1 - region 2\",\"settlement 1 - region 3\",\"settlement 1 - region 5\",\"settlement 1 - region 6\",\"settlement 1 - region 7\",\"settlement 1 - region 8\",\"settlement 1 - region 9\",\"settlement 1 - region 11\",\"settlement 2 - region 1\",\"settlement 2 - region 2\",\"settlement 2 - region 3\",\"settlement 2 - region 5\",\"settlement 2 - region 6\",\"settlement 2 - region 7\",\"settlement 2 - region 8\",\"settlement 2 - region 9\",\"settlement 2 - region 11\",\"settlement 3 - region 1\",\"settlement 3 - region 2\",\"settlement 3 - region 3\",\"settlement 3 - region 5\",\"settlement 3 - region 6\",\"settlement 3 - region 7\",\"settlement 3 - region 8\",\"settlement 3 - region 9\",\"settlement 3 - region 11\",\"settlement 4 - region 1\",\"settlement 4 - region 2\",\"settlement 4 - region 3\",\"settlement 4 - region 5\",\"settlement 4 - region 6\",\"settlement 4 - region 7\",\"settlement 4 - region 8\",\"settlement 4 - region 9\",\"settlement 4 - region 11\",\"settlement 5 - region 1\",\"settlement 5 - region 2\",\"settlement 5 - region 3\",\"settlement 5 - region 4\",\"settlement 5 - region 5\",\"settlement 5 - region 6\",\"settlement 5 - region 7\",\"settlement 5 - region 8\",\"settlement 5 - region 9\",\"settlement 5 - region 10\",\"settlement 5 - region 11\"],\"labels\":[\"settlement <br>1\",\"settlement <br>2\",\"settlement <br>3\",\"settlement <br>4\",\"settlement <br>5\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\"],\"parents\":[\"\",\"\",\"\",\"\",\"\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\"],\"hovertext\":[\"<br /> sample size 117\",\"<br /> sample size 164\",\"<br /> sample size 106\",\"<br /> sample size 113\",\"<br /> sample size 641\",\"settlement 1 - region 1 <br /> sample size 13\",\"settlement 1 - region 2 <br /> sample size 13\",\"settlement 1 - region 3 <br /> sample size 10\",\"settlement 1 - region 5 <br /> sample size 14\",\"settlement 1 - region 6 <br /> sample size 15\",\"settlement 1 - region 7 <br /> sample size 13\",\"settlement 1 - region 8 <br /> sample size 12\",\"settlement 1 - region 9 <br /> sample size 13\",\"settlement 1 - region 11 <br /> sample size 14\",\"settlement 2 - region 1 <br /> sample size 15\",\"settlement 2 - region 2 <br /> sample size 14\",\"settlement 2 - region 3 <br /> sample size 15\",\"settlement 2 - region 5 <br /> sample size 15\",\"settlement 2 - region 6 <br /> sample size 15\",\"settlement 2 - region 7 <br /> sample size 14\",\"settlement 2 - region 8 <br /> sample size 12\",\"settlement 2 - region 9 <br /> sample size 49\",\"settlement 2 - region 11 <br /> sample size 15\",\"settlement 3 - region 1 <br /> sample size 11\",\"settlement 3 - region 2 <br /> sample size 12\",\"settlement 3 - region 3 <br /> sample size 9\",\"settlement 3 - region 5 <br /> sample size 11\",\"settlement 3 - region 6 <br /> sample size 7\",\"settlement 3 - region 7 <br /> sample size 10\",\"settlement 3 - region 8 <br /> sample size 13\",\"settlement 3 - region 9 <br /> sample size 19\",\"settlement 3 - region 11 <br /> sample size 14\",\"settlement 4 - region 1 <br /> sample size 13\",\"settlement 4 - region 2 <br /> sample size 12\",\"settlement 4 - region 3 <br /> sample size 14\",\"settlement 4 - region 5 <br /> sample size 12\",\"settlement 4 - region 6 <br /> sample size 6\",\"settlement 4 - region 7 <br /> sample size 14\",\"settlement 4 - region 8 <br /> sample size 15\",\"settlement 4 - region 9 <br /> sample size 14\",\"settlement 4 - region 11 <br /> sample size 13\",\"settlement 5 - region 1 <br /> sample size 49\",\"settlement 5 - region 2 <br /> sample size 52\",\"settlement 5 - region 3 <br /> sample size 52\",\"settlement 5 - region 4 <br /> sample size 43\",\"settlement 5 - region 5 <br /> sample size 47\",\"settlement 5 - region 6 <br /> sample size 58\",\"settlement 5 - region 7 <br /> sample size 51\",\"settlement 5 - region 8 <br /> sample size 44\",\"settlement 5 - region 9 <br /> sample size 114\",\"settlement 5 - region 10 <br /> sample size 81\",\"settlement 5 - region 11 <br /> sample size 50\"],\"insidetextorientation\":\"radial\",\"type\":\"sunburst\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\r\nTo get the full picture we add the two levels, stateand local .\r\n\r\n\r\nshow\r\n\r\n# create data for sunburst plot\r\nsunburst_data_4layers <- rbind(\r\n  # first layer\r\n  layer1,\r\n  # second layer\r\n  data %>% \r\n    group_by(type, region) %>% \r\n    summarise(n=n()) %>% \r\n    mutate(\r\n      ids = paste('settlement', type, '-', 'region', region),\r\n      labels = paste0('region ', region),\r\n      parents = paste0('settlement', type))%>% \r\n    ungroup() %>% \r\n    select(ids,labels, parents,n)%>% \r\n  mutate(\r\n    hover= paste(ids, '\\n sample size', n)\r\n  ),\r\n  # third layer\r\n  data %>% \r\n    group_by(type, region, state) %>% \r\n    summarise(n=n()) %>% \r\n    mutate(\r\n      ids = paste('settlement', type, '-', 'region', region, '-', 'state', state, '-', 'region', region),\r\n      labels = paste0('state ', state),\r\n      parents = paste('settlement', type, '-', 'region', region))%>% \r\n    ungroup() %>% \r\n    select(ids,labels, parents,n)%>% \r\n  mutate(\r\n    hover= paste(ids, '\\n sample size', n)\r\n  ),\r\n  # fourth layer\r\n  data %>% \r\n    group_by(type, region, state, local) %>% \r\n    summarise(n=n()) %>% \r\n    mutate(\r\n      ids = paste('settlement', type, '-', 'region', region, '-', 'state', state,  '-', local),\r\n      labels = paste0('local ', local),\r\n      parents = paste('settlement', type, '-', 'region', region, '-', 'state', state, '-', 'region', region))%>% \r\n    ungroup() %>% \r\n    select(ids,labels, parents,n) %>% \r\n  mutate(\r\n    hover= paste(ids, '\\n sample size', n)\r\n  )\r\n)\r\n\r\nplot_ly(sunburst_data_4layers, \r\n        ids = ~ids, \r\n        labels = ~labels, \r\n        parents = ~parents, \r\n        type = 'sunburst', \r\n        hovertext=~hover, insidetextorientation='radial')\r\n\r\n\r\n\r\n\r\n{\"x\":{\"visdat\":{\"820cf197e29\":[\"function () \",\"plotlyVisDat\"]},\"cur_data\":\"820cf197e29\",\"attrs\":{\"820cf197e29\":{\"ids\":{},\"labels\":{},\"parents\":{},\"hovertext\":{},\"insidetextorientation\":\"radial\",\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"type\":\"sunburst\"}},\"layout\":{\"margin\":{\"b\":40,\"l\":60,\"t\":25,\"r\":10},\"hovermode\":\"closest\",\"showlegend\":false},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"ids\":[\"settlement1\",\"settlement2\",\"settlement3\",\"settlement4\",\"settlement5\",\"settlement 1 - region 1\",\"settlement 1 - region 2\",\"settlement 1 - region 3\",\"settlement 1 - region 5\",\"settlement 1 - region 6\",\"settlement 1 - region 7\",\"settlement 1 - region 8\",\"settlement 1 - region 9\",\"settlement 1 - region 11\",\"settlement 2 - region 1\",\"settlement 2 - region 2\",\"settlement 2 - region 3\",\"settlement 2 - region 5\",\"settlement 2 - region 6\",\"settlement 2 - region 7\",\"settlement 2 - region 8\",\"settlement 2 - region 9\",\"settlement 2 - region 11\",\"settlement 3 - region 1\",\"settlement 3 - region 2\",\"settlement 3 - region 3\",\"settlement 3 - region 5\",\"settlement 3 - region 6\",\"settlement 3 - region 7\",\"settlement 3 - region 8\",\"settlement 3 - region 9\",\"settlement 3 - region 11\",\"settlement 4 - region 1\",\"settlement 4 - region 2\",\"settlement 4 - region 3\",\"settlement 4 - region 5\",\"settlement 4 - region 6\",\"settlement 4 - region 7\",\"settlement 4 - region 8\",\"settlement 4 - region 9\",\"settlement 4 - region 11\",\"settlement 5 - region 1\",\"settlement 5 - region 2\",\"settlement 5 - region 3\",\"settlement 5 - region 4\",\"settlement 5 - region 5\",\"settlement 5 - region 6\",\"settlement 5 - region 7\",\"settlement 5 - region 8\",\"settlement 5 - region 9\",\"settlement 5 - region 10\",\"settlement 5 - region 11\",\"settlement 1 - region 1 - state 11 - region 1\",\"settlement 1 - region 2 - state 12 - region 2\",\"settlement 1 - region 3 - state 13 - region 3\",\"settlement 1 - region 5 - state 15 - region 5\",\"settlement 1 - region 6 - state 16 - region 6\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 8 - state 18 - region 8\",\"settlement 1 - region 9 - state 29 - region 9\",\"settlement 1 - region 9 - state 39 - region 9\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 2 - region 1 - state 11 - region 1\",\"settlement 2 - region 2 - state 12 - region 2\",\"settlement 2 - region 3 - state 13 - region 3\",\"settlement 2 - region 5 - state 15 - region 5\",\"settlement 2 - region 6 - state 16 - region 6\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 8 - state 18 - region 8\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 11 - state 111 - region 11\",\"settlement 3 - region 1 - state 11 - region 1\",\"settlement 3 - region 2 - state 12 - region 2\",\"settlement 3 - region 3 - state 13 - region 3\",\"settlement 3 - region 5 - state 15 - region 5\",\"settlement 3 - region 6 - state 16 - region 6\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 8 - state 18 - region 8\",\"settlement 3 - region 9 - state 29 - region 9\",\"settlement 3 - region 9 - state 39 - region 9\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 4 - region 1 - state 11 - region 1\",\"settlement 4 - region 2 - state 12 - region 2\",\"settlement 4 - region 3 - state 13 - region 3\",\"settlement 4 - region 5 - state 15 - region 5\",\"settlement 4 - region 6 - state 16 - region 6\",\"settlement 4 - region 7 - state 17 - region 7\",\"settlement 4 - region 8 - state 18 - region 8\",\"settlement 4 - region 9 - state 29 - region 9\",\"settlement 4 - region 9 - state 39 - region 9\",\"settlement 4 - region 11 - state 111 - region 11\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 22 - region 2\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 8 - state 18 - region 8\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 11 - state 111 - region 11\",\"settlement 1 - region 1 - state 11 - 111\",\"settlement 1 - region 1 - state 11 - 1110\",\"settlement 1 - region 1 - state 11 - 112\",\"settlement 1 - region 2 - state 12 - 1210\",\"settlement 1 - region 2 - state 12 - 1211\",\"settlement 1 - region 2 - state 12 - 1212\",\"settlement 1 - region 2 - state 12 - 1217\",\"settlement 1 - region 2 - state 12 - 123\",\"settlement 1 - region 2 - state 12 - 124\",\"settlement 1 - region 3 - state 13 - 1310\",\"settlement 1 - region 3 - state 13 - 1311\",\"settlement 1 - region 3 - state 13 - 132\",\"settlement 1 - region 5 - state 15 - 157\",\"settlement 1 - region 6 - state 16 - 161\",\"settlement 1 - region 6 - state 16 - 164\",\"settlement 1 - region 7 - state 17 - 172\",\"settlement 1 - region 7 - state 17 - 1720\",\"settlement 1 - region 7 - state 17 - 1721\",\"settlement 1 - region 7 - state 17 - 1727\",\"settlement 1 - region 7 - state 17 - 175\",\"settlement 1 - region 7 - state 17 - 177\",\"settlement 1 - region 7 - state 17 - 178\",\"settlement 1 - region 8 - state 18 - 182\",\"settlement 1 - region 8 - state 18 - 183\",\"settlement 1 - region 8 - state 18 - 184\",\"settlement 1 - region 8 - state 18 - 186\",\"settlement 1 - region 9 - state 29 - 2914\",\"settlement 1 - region 9 - state 29 - 2918\",\"settlement 1 - region 9 - state 39 - 3913\",\"settlement 1 - region 9 - state 39 - 3915\",\"settlement 1 - region 9 - state 39 - 395\",\"settlement 1 - region 11 - state 111 - 11112\",\"settlement 1 - region 11 - state 111 - 11113\",\"settlement 1 - region 11 - state 111 - 11114\",\"settlement 1 - region 11 - state 111 - 11116\",\"settlement 1 - region 11 - state 111 - 11117\",\"settlement 1 - region 11 - state 111 - 1112\",\"settlement 1 - region 11 - state 111 - 1113\",\"settlement 1 - region 11 - state 111 - 1116\",\"settlement 1 - region 11 - state 111 - 1118\",\"settlement 1 - region 11 - state 111 - 1119\",\"settlement 2 - region 1 - state 11 - 1112\",\"settlement 2 - region 1 - state 11 - 1124\",\"settlement 2 - region 1 - state 11 - 116\",\"settlement 2 - region 1 - state 11 - 117\",\"settlement 2 - region 2 - state 12 - 1211\",\"settlement 2 - region 2 - state 12 - 1212\",\"settlement 2 - region 2 - state 12 - 1213\",\"settlement 2 - region 2 - state 12 - 1216\",\"settlement 2 - region 2 - state 12 - 1217\",\"settlement 2 - region 3 - state 13 - 1310\",\"settlement 2 - region 3 - state 13 - 1311\",\"settlement 2 - region 3 - state 13 - 1313\",\"settlement 2 - region 3 - state 13 - 132\",\"settlement 2 - region 5 - state 15 - 157\",\"settlement 2 - region 6 - state 16 - 161\",\"settlement 2 - region 6 - state 16 - 164\",\"settlement 2 - region 7 - state 17 - 1710\",\"settlement 2 - region 7 - state 17 - 1714\",\"settlement 2 - region 7 - state 17 - 1720\",\"settlement 2 - region 7 - state 17 - 1724\",\"settlement 2 - region 7 - state 17 - 1727\",\"settlement 2 - region 7 - state 17 - 175\",\"settlement 2 - region 7 - state 17 - 177\",\"settlement 2 - region 7 - state 17 - 179\",\"settlement 2 - region 8 - state 18 - 182\",\"settlement 2 - region 8 - state 18 - 183\",\"settlement 2 - region 8 - state 18 - 186\",\"settlement 2 - region 9 - state 29 - 291\",\"settlement 2 - region 9 - state 29 - 2913\",\"settlement 2 - region 9 - state 29 - 2914\",\"settlement 2 - region 9 - state 29 - 2918\",\"settlement 2 - region 9 - state 29 - 292\",\"settlement 2 - region 9 - state 29 - 293\",\"settlement 2 - region 9 - state 29 - 297\",\"settlement 2 - region 9 - state 29 - 298\",\"settlement 2 - region 9 - state 39 - 3913\",\"settlement 2 - region 9 - state 39 - 3918\",\"settlement 2 - region 9 - state 39 - 3923\",\"settlement 2 - region 9 - state 39 - 3926\",\"settlement 2 - region 9 - state 39 - 3928\",\"settlement 2 - region 9 - state 39 - 395\",\"settlement 2 - region 9 - state 39 - 397\",\"settlement 2 - region 9 - state 39 - 398\",\"settlement 2 - region 11 - state 111 - 11110\",\"settlement 2 - region 11 - state 111 - 11111\",\"settlement 2 - region 11 - state 111 - 11112\",\"settlement 2 - region 11 - state 111 - 11113\",\"settlement 2 - region 11 - state 111 - 1113\",\"settlement 3 - region 1 - state 11 - 111\",\"settlement 3 - region 1 - state 11 - 1110\",\"settlement 3 - region 1 - state 11 - 112\",\"settlement 3 - region 1 - state 11 - 1124\",\"settlement 3 - region 1 - state 11 - 116\",\"settlement 3 - region 2 - state 12 - 121\",\"settlement 3 - region 2 - state 12 - 1211\",\"settlement 3 - region 2 - state 12 - 1216\",\"settlement 3 - region 2 - state 12 - 1217\",\"settlement 3 - region 3 - state 13 - 1310\",\"settlement 3 - region 3 - state 13 - 1311\",\"settlement 3 - region 3 - state 13 - 1313\",\"settlement 3 - region 5 - state 15 - 154\",\"settlement 3 - region 5 - state 15 - 157\",\"settlement 3 - region 6 - state 16 - 161\",\"settlement 3 - region 6 - state 16 - 164\",\"settlement 3 - region 6 - state 16 - 165\",\"settlement 3 - region 7 - state 17 - 1710\",\"settlement 3 - region 7 - state 17 - 1714\",\"settlement 3 - region 7 - state 17 - 1721\",\"settlement 3 - region 7 - state 17 - 1724\",\"settlement 3 - region 7 - state 17 - 1725\",\"settlement 3 - region 7 - state 17 - 1727\",\"settlement 3 - region 7 - state 17 - 176\",\"settlement 3 - region 8 - state 18 - 182\",\"settlement 3 - region 8 - state 18 - 186\",\"settlement 3 - region 9 - state 29 - 2914\",\"settlement 3 - region 9 - state 29 - 292\",\"settlement 3 - region 9 - state 29 - 293\",\"settlement 3 - region 9 - state 29 - 297\",\"settlement 3 - region 9 - state 29 - 298\",\"settlement 3 - region 9 - state 39 - 3913\",\"settlement 3 - region 9 - state 39 - 3915\",\"settlement 3 - region 9 - state 39 - 3918\",\"settlement 3 - region 9 - state 39 - 3923\",\"settlement 3 - region 9 - state 39 - 3926\",\"settlement 3 - region 11 - state 111 - 1111\",\"settlement 3 - region 11 - state 111 - 11110\",\"settlement 3 - region 11 - state 111 - 11112\",\"settlement 3 - region 11 - state 111 - 11113\",\"settlement 3 - region 11 - state 111 - 11117\",\"settlement 3 - region 11 - state 111 - 1112\",\"settlement 3 - region 11 - state 111 - 1113\",\"settlement 3 - region 11 - state 111 - 1114\",\"settlement 3 - region 11 - state 111 - 1118\",\"settlement 4 - region 1 - state 11 - 1110\",\"settlement 4 - region 1 - state 11 - 1124\",\"settlement 4 - region 1 - state 11 - 116\",\"settlement 4 - region 2 - state 12 - 121\",\"settlement 4 - region 2 - state 12 - 1212\",\"settlement 4 - region 2 - state 12 - 1213\",\"settlement 4 - region 2 - state 12 - 1216\",\"settlement 4 - region 2 - state 12 - 1217\",\"settlement 4 - region 2 - state 12 - 125\",\"settlement 4 - region 3 - state 13 - 1311\",\"settlement 4 - region 5 - state 15 - 157\",\"settlement 4 - region 6 - state 16 - 161\",\"settlement 4 - region 6 - state 16 - 164\",\"settlement 4 - region 7 - state 17 - 1710\",\"settlement 4 - region 7 - state 17 - 1714\",\"settlement 4 - region 7 - state 17 - 1720\",\"settlement 4 - region 7 - state 17 - 176\",\"settlement 4 - region 7 - state 17 - 178\",\"settlement 4 - region 8 - state 18 - 183\",\"settlement 4 - region 8 - state 18 - 186\",\"settlement 4 - region 9 - state 29 - 2913\",\"settlement 4 - region 9 - state 29 - 292\",\"settlement 4 - region 9 - state 29 - 295\",\"settlement 4 - region 9 - state 29 - 297\",\"settlement 4 - region 9 - state 29 - 298\",\"settlement 4 - region 9 - state 39 - 3915\",\"settlement 4 - region 9 - state 39 - 3926\",\"settlement 4 - region 11 - state 111 - 11111\",\"settlement 4 - region 11 - state 111 - 11115\",\"settlement 4 - region 11 - state 111 - 1114\",\"settlement 4 - region 11 - state 111 - 1115\",\"settlement 4 - region 11 - state 111 - 1118\",\"settlement 5 - region 1 - state 11 - 111\",\"settlement 5 - region 1 - state 11 - 1110\",\"settlement 5 - region 1 - state 11 - 1111\",\"settlement 5 - region 1 - state 11 - 1112\",\"settlement 5 - region 1 - state 11 - 1113\",\"settlement 5 - region 1 - state 11 - 1114\",\"settlement 5 - region 1 - state 11 - 1115\",\"settlement 5 - region 1 - state 11 - 1116\",\"settlement 5 - region 1 - state 11 - 1117\",\"settlement 5 - region 1 - state 11 - 1118\",\"settlement 5 - region 1 - state 11 - 1119\",\"settlement 5 - region 1 - state 11 - 112\",\"settlement 5 - region 1 - state 11 - 1120\",\"settlement 5 - region 1 - state 11 - 1121\",\"settlement 5 - region 1 - state 11 - 1122\",\"settlement 5 - region 1 - state 11 - 1123\",\"settlement 5 - region 1 - state 11 - 113\",\"settlement 5 - region 1 - state 11 - 114\",\"settlement 5 - region 1 - state 11 - 115\",\"settlement 5 - region 1 - state 11 - 116\",\"settlement 5 - region 1 - state 11 - 118\",\"settlement 5 - region 1 - state 11 - 119\",\"settlement 5 - region 2 - state 12 - 1210\",\"settlement 5 - region 2 - state 12 - 1211\",\"settlement 5 - region 2 - state 12 - 1214\",\"settlement 5 - region 2 - state 12 - 1215\",\"settlement 5 - region 2 - state 12 - 1217\",\"settlement 5 - region 2 - state 12 - 122\",\"settlement 5 - region 2 - state 12 - 123\",\"settlement 5 - region 2 - state 12 - 124\",\"settlement 5 - region 2 - state 12 - 125\",\"settlement 5 - region 2 - state 12 - 126\",\"settlement 5 - region 2 - state 12 - 127\",\"settlement 5 - region 2 - state 12 - 128\",\"settlement 5 - region 2 - state 12 - 129\",\"settlement 5 - region 2 - state 22 - 221\",\"settlement 5 - region 3 - state 13 - 131\",\"settlement 5 - region 3 - state 13 - 1310\",\"settlement 5 - region 3 - state 13 - 1312\",\"settlement 5 - region 3 - state 13 - 1314\",\"settlement 5 - region 3 - state 13 - 1315\",\"settlement 5 - region 3 - state 13 - 1316\",\"settlement 5 - region 3 - state 13 - 1317\",\"settlement 5 - region 3 - state 13 - 133\",\"settlement 5 - region 3 - state 13 - 134\",\"settlement 5 - region 3 - state 13 - 135\",\"settlement 5 - region 3 - state 13 - 136\",\"settlement 5 - region 3 - state 13 - 137\",\"settlement 5 - region 3 - state 13 - 138\",\"settlement 5 - region 3 - state 13 - 139\",\"settlement 5 - region 4 - state 14 - 141\",\"settlement 5 - region 4 - state 14 - 1410\",\"settlement 5 - region 4 - state 14 - 1411\",\"settlement 5 - region 4 - state 14 - 1412\",\"settlement 5 - region 4 - state 14 - 1413\",\"settlement 5 - region 4 - state 14 - 1414\",\"settlement 5 - region 4 - state 14 - 142\",\"settlement 5 - region 4 - state 14 - 143\",\"settlement 5 - region 4 - state 14 - 144\",\"settlement 5 - region 4 - state 14 - 145\",\"settlement 5 - region 4 - state 14 - 146\",\"settlement 5 - region 4 - state 14 - 147\",\"settlement 5 - region 4 - state 14 - 148\",\"settlement 5 - region 4 - state 14 - 149\",\"settlement 5 - region 5 - state 15 - 151\",\"settlement 5 - region 5 - state 15 - 152\",\"settlement 5 - region 5 - state 15 - 153\",\"settlement 5 - region 5 - state 15 - 154\",\"settlement 5 - region 5 - state 15 - 155\",\"settlement 5 - region 5 - state 15 - 156\",\"settlement 5 - region 5 - state 15 - 157\",\"settlement 5 - region 6 - state 16 - 161\",\"settlement 5 - region 6 - state 16 - 1610\",\"settlement 5 - region 6 - state 16 - 1611\",\"settlement 5 - region 6 - state 16 - 1612\",\"settlement 5 - region 6 - state 16 - 1613\",\"settlement 5 - region 6 - state 16 - 162\",\"settlement 5 - region 6 - state 16 - 163\",\"settlement 5 - region 6 - state 16 - 164\",\"settlement 5 - region 6 - state 16 - 165\",\"settlement 5 - region 6 - state 16 - 166\",\"settlement 5 - region 6 - state 16 - 167\",\"settlement 5 - region 6 - state 16 - 168\",\"settlement 5 - region 6 - state 16 - 169\",\"settlement 5 - region 7 - state 17 - 171\",\"settlement 5 - region 7 - state 17 - 1711\",\"settlement 5 - region 7 - state 17 - 1712\",\"settlement 5 - region 7 - state 17 - 1713\",\"settlement 5 - region 7 - state 17 - 1714\",\"settlement 5 - region 7 - state 17 - 1715\",\"settlement 5 - region 7 - state 17 - 1716\",\"settlement 5 - region 7 - state 17 - 1717\",\"settlement 5 - region 7 - state 17 - 1718\",\"settlement 5 - region 7 - state 17 - 1719\",\"settlement 5 - region 7 - state 17 - 172\",\"settlement 5 - region 7 - state 17 - 1720\",\"settlement 5 - region 7 - state 17 - 1721\",\"settlement 5 - region 7 - state 17 - 1722\",\"settlement 5 - region 7 - state 17 - 1723\",\"settlement 5 - region 7 - state 17 - 1724\",\"settlement 5 - region 7 - state 17 - 1726\",\"settlement 5 - region 7 - state 17 - 1728\",\"settlement 5 - region 7 - state 17 - 1729\",\"settlement 5 - region 7 - state 17 - 173\",\"settlement 5 - region 7 - state 17 - 1730\",\"settlement 5 - region 7 - state 17 - 174\",\"settlement 5 - region 8 - state 18 - 181\",\"settlement 5 - region 8 - state 18 - 182\",\"settlement 5 - region 8 - state 18 - 183\",\"settlement 5 - region 8 - state 18 - 184\",\"settlement 5 - region 8 - state 18 - 185\",\"settlement 5 - region 8 - state 18 - 186\",\"settlement 5 - region 9 - state 19 - 191\",\"settlement 5 - region 9 - state 19 - 1910\",\"settlement 5 - region 9 - state 19 - 1911\",\"settlement 5 - region 9 - state 19 - 1912\",\"settlement 5 - region 9 - state 19 - 1913\",\"settlement 5 - region 9 - state 19 - 1914\",\"settlement 5 - region 9 - state 19 - 1915\",\"settlement 5 - region 9 - state 19 - 192\",\"settlement 5 - region 9 - state 19 - 193\",\"settlement 5 - region 9 - state 19 - 194\",\"settlement 5 - region 9 - state 19 - 195\",\"settlement 5 - region 9 - state 19 - 196\",\"settlement 5 - region 9 - state 19 - 197\",\"settlement 5 - region 9 - state 19 - 198\",\"settlement 5 - region 9 - state 19 - 199\",\"settlement 5 - region 9 - state 29 - 291\",\"settlement 5 - region 9 - state 29 - 2910\",\"settlement 5 - region 9 - state 29 - 2911\",\"settlement 5 - region 9 - state 29 - 2912\",\"settlement 5 - region 9 - state 29 - 2913\",\"settlement 5 - region 9 - state 29 - 2915\",\"settlement 5 - region 9 - state 29 - 2916\",\"settlement 5 - region 9 - state 29 - 2917\",\"settlement 5 - region 9 - state 29 - 292\",\"settlement 5 - region 9 - state 29 - 293\",\"settlement 5 - region 9 - state 29 - 294\",\"settlement 5 - region 9 - state 29 - 295\",\"settlement 5 - region 9 - state 29 - 296\",\"settlement 5 - region 9 - state 29 - 299\",\"settlement 5 - region 9 - state 39 - 391\",\"settlement 5 - region 9 - state 39 - 3910\",\"settlement 5 - region 9 - state 39 - 3911\",\"settlement 5 - region 9 - state 39 - 3912\",\"settlement 5 - region 9 - state 39 - 3914\",\"settlement 5 - region 9 - state 39 - 3916\",\"settlement 5 - region 9 - state 39 - 3917\",\"settlement 5 - region 9 - state 39 - 3919\",\"settlement 5 - region 9 - state 39 - 392\",\"settlement 5 - region 9 - state 39 - 3920\",\"settlement 5 - region 9 - state 39 - 3921\",\"settlement 5 - region 9 - state 39 - 3922\",\"settlement 5 - region 9 - state 39 - 3924\",\"settlement 5 - region 9 - state 39 - 3925\",\"settlement 5 - region 9 - state 39 - 3927\",\"settlement 5 - region 9 - state 39 - 3929\",\"settlement 5 - region 9 - state 39 - 393\",\"settlement 5 - region 9 - state 39 - 394\",\"settlement 5 - region 9 - state 39 - 396\",\"settlement 5 - region 9 - state 39 - 397\",\"settlement 5 - region 9 - state 39 - 399\",\"settlement 5 - region 10 - state 110 - 1101\",\"settlement 5 - region 10 - state 110 - 11010\",\"settlement 5 - region 10 - state 110 - 11011\",\"settlement 5 - region 10 - state 110 - 11012\",\"settlement 5 - region 10 - state 110 - 1102\",\"settlement 5 - region 10 - state 110 - 1103\",\"settlement 5 - region 10 - state 110 - 1104\",\"settlement 5 - region 10 - state 110 - 1105\",\"settlement 5 - region 10 - state 110 - 1106\",\"settlement 5 - region 10 - state 110 - 1107\",\"settlement 5 - region 10 - state 110 - 1108\",\"settlement 5 - region 10 - state 110 - 1109\",\"settlement 5 - region 10 - state 210 - 2101\",\"settlement 5 - region 10 - state 210 - 21010\",\"settlement 5 - region 10 - state 210 - 21011\",\"settlement 5 - region 10 - state 210 - 21012\",\"settlement 5 - region 10 - state 210 - 2102\",\"settlement 5 - region 10 - state 210 - 2103\",\"settlement 5 - region 10 - state 210 - 2104\",\"settlement 5 - region 10 - state 210 - 2105\",\"settlement 5 - region 10 - state 210 - 2106\",\"settlement 5 - region 10 - state 210 - 2107\",\"settlement 5 - region 10 - state 210 - 2108\",\"settlement 5 - region 10 - state 210 - 2109\",\"settlement 5 - region 11 - state 111 - 11112\",\"settlement 5 - region 11 - state 111 - 1114\",\"settlement 5 - region 11 - state 111 - 1116\",\"settlement 5 - region 11 - state 111 - 1117\",\"settlement 5 - region 11 - state 111 - 1118\",\"settlement 5 - region 11 - state 111 - 1119\"],\"labels\":[\"settlement <br>1\",\"settlement <br>2\",\"settlement <br>3\",\"settlement <br>4\",\"settlement <br>5\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\",\"state 11\",\"state 12\",\"state 13\",\"state 15\",\"state 16\",\"state 17\",\"state 18\",\"state 29\",\"state 39\",\"state 111\",\"state 11\",\"state 12\",\"state 13\",\"state 15\",\"state 16\",\"state 17\",\"state 18\",\"state 29\",\"state 39\",\"state 111\",\"state 11\",\"state 12\",\"state 13\",\"state 15\",\"state 16\",\"state 17\",\"state 18\",\"state 29\",\"state 39\",\"state 111\",\"state 11\",\"state 12\",\"state 13\",\"state 15\",\"state 16\",\"state 17\",\"state 18\",\"state 29\",\"state 39\",\"state 111\",\"state 11\",\"state 12\",\"state 22\",\"state 13\",\"state 14\",\"state 15\",\"state 16\",\"state 17\",\"state 18\",\"state 19\",\"state 29\",\"state 39\",\"state 110\",\"state 210\",\"state 111\",\"local 111\",\"local 1110\",\"local 112\",\"local 1210\",\"local 1211\",\"local 1212\",\"local 1217\",\"local 123\",\"local 124\",\"local 1310\",\"local 1311\",\"local 132\",\"local 157\",\"local 161\",\"local 164\",\"local 172\",\"local 1720\",\"local 1721\",\"local 1727\",\"local 175\",\"local 177\",\"local 178\",\"local 182\",\"local 183\",\"local 184\",\"local 186\",\"local 2914\",\"local 2918\",\"local 3913\",\"local 3915\",\"local 395\",\"local 11112\",\"local 11113\",\"local 11114\",\"local 11116\",\"local 11117\",\"local 1112\",\"local 1113\",\"local 1116\",\"local 1118\",\"local 1119\",\"local 1112\",\"local 1124\",\"local 116\",\"local 117\",\"local 1211\",\"local 1212\",\"local 1213\",\"local 1216\",\"local 1217\",\"local 1310\",\"local 1311\",\"local 1313\",\"local 132\",\"local 157\",\"local 161\",\"local 164\",\"local 1710\",\"local 1714\",\"local 1720\",\"local 1724\",\"local 1727\",\"local 175\",\"local 177\",\"local 179\",\"local 182\",\"local 183\",\"local 186\",\"local 291\",\"local 2913\",\"local 2914\",\"local 2918\",\"local 292\",\"local 293\",\"local 297\",\"local 298\",\"local 3913\",\"local 3918\",\"local 3923\",\"local 3926\",\"local 3928\",\"local 395\",\"local 397\",\"local 398\",\"local 11110\",\"local 11111\",\"local 11112\",\"local 11113\",\"local 1113\",\"local 111\",\"local 1110\",\"local 112\",\"local 1124\",\"local 116\",\"local 121\",\"local 1211\",\"local 1216\",\"local 1217\",\"local 1310\",\"local 1311\",\"local 1313\",\"local 154\",\"local 157\",\"local 161\",\"local 164\",\"local 165\",\"local 1710\",\"local 1714\",\"local 1721\",\"local 1724\",\"local 1725\",\"local 1727\",\"local 176\",\"local 182\",\"local 186\",\"local 2914\",\"local 292\",\"local 293\",\"local 297\",\"local 298\",\"local 3913\",\"local 3915\",\"local 3918\",\"local 3923\",\"local 3926\",\"local 1111\",\"local 11110\",\"local 11112\",\"local 11113\",\"local 11117\",\"local 1112\",\"local 1113\",\"local 1114\",\"local 1118\",\"local 1110\",\"local 1124\",\"local 116\",\"local 121\",\"local 1212\",\"local 1213\",\"local 1216\",\"local 1217\",\"local 125\",\"local 1311\",\"local 157\",\"local 161\",\"local 164\",\"local 1710\",\"local 1714\",\"local 1720\",\"local 176\",\"local 178\",\"local 183\",\"local 186\",\"local 2913\",\"local 292\",\"local 295\",\"local 297\",\"local 298\",\"local 3915\",\"local 3926\",\"local 11111\",\"local 11115\",\"local 1114\",\"local 1115\",\"local 1118\",\"local 111\",\"local 1110\",\"local 1111\",\"local 1112\",\"local 1113\",\"local 1114\",\"local 1115\",\"local 1116\",\"local 1117\",\"local 1118\",\"local 1119\",\"local 112\",\"local 1120\",\"local 1121\",\"local 1122\",\"local 1123\",\"local 113\",\"local 114\",\"local 115\",\"local 116\",\"local 118\",\"local 119\",\"local 1210\",\"local 1211\",\"local 1214\",\"local 1215\",\"local 1217\",\"local 122\",\"local 123\",\"local 124\",\"local 125\",\"local 126\",\"local 127\",\"local 128\",\"local 129\",\"local 221\",\"local 131\",\"local 1310\",\"local 1312\",\"local 1314\",\"local 1315\",\"local 1316\",\"local 1317\",\"local 133\",\"local 134\",\"local 135\",\"local 136\",\"local 137\",\"local 138\",\"local 139\",\"local 141\",\"local 1410\",\"local 1411\",\"local 1412\",\"local 1413\",\"local 1414\",\"local 142\",\"local 143\",\"local 144\",\"local 145\",\"local 146\",\"local 147\",\"local 148\",\"local 149\",\"local 151\",\"local 152\",\"local 153\",\"local 154\",\"local 155\",\"local 156\",\"local 157\",\"local 161\",\"local 1610\",\"local 1611\",\"local 1612\",\"local 1613\",\"local 162\",\"local 163\",\"local 164\",\"local 165\",\"local 166\",\"local 167\",\"local 168\",\"local 169\",\"local 171\",\"local 1711\",\"local 1712\",\"local 1713\",\"local 1714\",\"local 1715\",\"local 1716\",\"local 1717\",\"local 1718\",\"local 1719\",\"local 172\",\"local 1720\",\"local 1721\",\"local 1722\",\"local 1723\",\"local 1724\",\"local 1726\",\"local 1728\",\"local 1729\",\"local 173\",\"local 1730\",\"local 174\",\"local 181\",\"local 182\",\"local 183\",\"local 184\",\"local 185\",\"local 186\",\"local 191\",\"local 1910\",\"local 1911\",\"local 1912\",\"local 1913\",\"local 1914\",\"local 1915\",\"local 192\",\"local 193\",\"local 194\",\"local 195\",\"local 196\",\"local 197\",\"local 198\",\"local 199\",\"local 291\",\"local 2910\",\"local 2911\",\"local 2912\",\"local 2913\",\"local 2915\",\"local 2916\",\"local 2917\",\"local 292\",\"local 293\",\"local 294\",\"local 295\",\"local 296\",\"local 299\",\"local 391\",\"local 3910\",\"local 3911\",\"local 3912\",\"local 3914\",\"local 3916\",\"local 3917\",\"local 3919\",\"local 392\",\"local 3920\",\"local 3921\",\"local 3922\",\"local 3924\",\"local 3925\",\"local 3927\",\"local 3929\",\"local 393\",\"local 394\",\"local 396\",\"local 397\",\"local 399\",\"local 1101\",\"local 11010\",\"local 11011\",\"local 11012\",\"local 1102\",\"local 1103\",\"local 1104\",\"local 1105\",\"local 1106\",\"local 1107\",\"local 1108\",\"local 1109\",\"local 2101\",\"local 21010\",\"local 21011\",\"local 21012\",\"local 2102\",\"local 2103\",\"local 2104\",\"local 2105\",\"local 2106\",\"local 2107\",\"local 2108\",\"local 2109\",\"local 11112\",\"local 1114\",\"local 1116\",\"local 1117\",\"local 1118\",\"local 1119\"],\"parents\":[\"\",\"\",\"\",\"\",\"\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement 1 - region 1\",\"settlement 1 - region 2\",\"settlement 1 - region 3\",\"settlement 1 - region 5\",\"settlement 1 - region 6\",\"settlement 1 - region 7\",\"settlement 1 - region 8\",\"settlement 1 - region 9\",\"settlement 1 - region 9\",\"settlement 1 - region 11\",\"settlement 2 - region 1\",\"settlement 2 - region 2\",\"settlement 2 - region 3\",\"settlement 2 - region 5\",\"settlement 2 - region 6\",\"settlement 2 - region 7\",\"settlement 2 - region 8\",\"settlement 2 - region 9\",\"settlement 2 - region 9\",\"settlement 2 - region 11\",\"settlement 3 - region 1\",\"settlement 3 - region 2\",\"settlement 3 - region 3\",\"settlement 3 - region 5\",\"settlement 3 - region 6\",\"settlement 3 - region 7\",\"settlement 3 - region 8\",\"settlement 3 - region 9\",\"settlement 3 - region 9\",\"settlement 3 - region 11\",\"settlement 4 - region 1\",\"settlement 4 - region 2\",\"settlement 4 - region 3\",\"settlement 4 - region 5\",\"settlement 4 - region 6\",\"settlement 4 - region 7\",\"settlement 4 - region 8\",\"settlement 4 - region 9\",\"settlement 4 - region 9\",\"settlement 4 - region 11\",\"settlement 5 - region 1\",\"settlement 5 - region 2\",\"settlement 5 - region 2\",\"settlement 5 - region 3\",\"settlement 5 - region 4\",\"settlement 5 - region 5\",\"settlement 5 - region 6\",\"settlement 5 - region 7\",\"settlement 5 - region 8\",\"settlement 5 - region 9\",\"settlement 5 - region 9\",\"settlement 5 - region 9\",\"settlement 5 - region 10\",\"settlement 5 - region 10\",\"settlement 5 - region 11\",\"settlement 1 - region 1 - state 11 - region 1\",\"settlement 1 - region 1 - state 11 - region 1\",\"settlement 1 - region 1 - state 11 - region 1\",\"settlement 1 - region 2 - state 12 - region 2\",\"settlement 1 - region 2 - state 12 - region 2\",\"settlement 1 - region 2 - state 12 - region 2\",\"settlement 1 - region 2 - state 12 - region 2\",\"settlement 1 - region 2 - state 12 - region 2\",\"settlement 1 - region 2 - state 12 - region 2\",\"settlement 1 - region 3 - state 13 - region 3\",\"settlement 1 - region 3 - state 13 - region 3\",\"settlement 1 - region 3 - state 13 - region 3\",\"settlement 1 - region 5 - state 15 - region 5\",\"settlement 1 - region 6 - state 16 - region 6\",\"settlement 1 - region 6 - state 16 - region 6\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 7 - state 17 - region 7\",\"settlement 1 - region 8 - state 18 - region 8\",\"settlement 1 - region 8 - state 18 - region 8\",\"settlement 1 - region 8 - state 18 - region 8\",\"settlement 1 - region 8 - state 18 - region 8\",\"settlement 1 - region 9 - state 29 - region 9\",\"settlement 1 - region 9 - state 29 - region 9\",\"settlement 1 - region 9 - state 39 - region 9\",\"settlement 1 - region 9 - state 39 - region 9\",\"settlement 1 - region 9 - state 39 - region 9\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 1 - region 11 - state 111 - region 11\",\"settlement 2 - region 1 - state 11 - region 1\",\"settlement 2 - region 1 - state 11 - region 1\",\"settlement 2 - region 1 - state 11 - region 1\",\"settlement 2 - region 1 - state 11 - region 1\",\"settlement 2 - region 2 - state 12 - region 2\",\"settlement 2 - region 2 - state 12 - region 2\",\"settlement 2 - region 2 - state 12 - region 2\",\"settlement 2 - region 2 - state 12 - region 2\",\"settlement 2 - region 2 - state 12 - region 2\",\"settlement 2 - region 3 - state 13 - region 3\",\"settlement 2 - region 3 - state 13 - region 3\",\"settlement 2 - region 3 - state 13 - region 3\",\"settlement 2 - region 3 - state 13 - region 3\",\"settlement 2 - region 5 - state 15 - region 5\",\"settlement 2 - region 6 - state 16 - region 6\",\"settlement 2 - region 6 - state 16 - region 6\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 7 - state 17 - region 7\",\"settlement 2 - region 8 - state 18 - region 8\",\"settlement 2 - region 8 - state 18 - region 8\",\"settlement 2 - region 8 - state 18 - region 8\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 29 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 9 - state 39 - region 9\",\"settlement 2 - region 11 - state 111 - region 11\",\"settlement 2 - region 11 - state 111 - region 11\",\"settlement 2 - region 11 - state 111 - region 11\",\"settlement 2 - region 11 - state 111 - region 11\",\"settlement 2 - region 11 - state 111 - region 11\",\"settlement 3 - region 1 - state 11 - region 1\",\"settlement 3 - region 1 - state 11 - region 1\",\"settlement 3 - region 1 - state 11 - region 1\",\"settlement 3 - region 1 - state 11 - region 1\",\"settlement 3 - region 1 - state 11 - region 1\",\"settlement 3 - region 2 - state 12 - region 2\",\"settlement 3 - region 2 - state 12 - region 2\",\"settlement 3 - region 2 - state 12 - region 2\",\"settlement 3 - region 2 - state 12 - region 2\",\"settlement 3 - region 3 - state 13 - region 3\",\"settlement 3 - region 3 - state 13 - region 3\",\"settlement 3 - region 3 - state 13 - region 3\",\"settlement 3 - region 5 - state 15 - region 5\",\"settlement 3 - region 5 - state 15 - region 5\",\"settlement 3 - region 6 - state 16 - region 6\",\"settlement 3 - region 6 - state 16 - region 6\",\"settlement 3 - region 6 - state 16 - region 6\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 7 - state 17 - region 7\",\"settlement 3 - region 8 - state 18 - region 8\",\"settlement 3 - region 8 - state 18 - region 8\",\"settlement 3 - region 9 - state 29 - region 9\",\"settlement 3 - region 9 - state 29 - region 9\",\"settlement 3 - region 9 - state 29 - region 9\",\"settlement 3 - region 9 - state 29 - region 9\",\"settlement 3 - region 9 - state 29 - region 9\",\"settlement 3 - region 9 - state 39 - region 9\",\"settlement 3 - region 9 - state 39 - region 9\",\"settlement 3 - region 9 - state 39 - region 9\",\"settlement 3 - region 9 - state 39 - region 9\",\"settlement 3 - region 9 - state 39 - region 9\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 3 - region 11 - state 111 - region 11\",\"settlement 4 - region 1 - state 11 - region 1\",\"settlement 4 - region 1 - state 11 - region 1\",\"settlement 4 - region 1 - state 11 - region 1\",\"settlement 4 - region 2 - state 12 - region 2\",\"settlement 4 - region 2 - state 12 - region 2\",\"settlement 4 - region 2 - state 12 - region 2\",\"settlement 4 - region 2 - state 12 - region 2\",\"settlement 4 - region 2 - state 12 - region 2\",\"settlement 4 - region 2 - state 12 - region 2\",\"settlement 4 - region 3 - state 13 - region 3\",\"settlement 4 - region 5 - state 15 - region 5\",\"settlement 4 - region 6 - state 16 - region 6\",\"settlement 4 - region 6 - state 16 - region 6\",\"settlement 4 - region 7 - state 17 - region 7\",\"settlement 4 - region 7 - state 17 - region 7\",\"settlement 4 - region 7 - state 17 - region 7\",\"settlement 4 - region 7 - state 17 - region 7\",\"settlement 4 - region 7 - state 17 - region 7\",\"settlement 4 - region 8 - state 18 - region 8\",\"settlement 4 - region 8 - state 18 - region 8\",\"settlement 4 - region 9 - state 29 - region 9\",\"settlement 4 - region 9 - state 29 - region 9\",\"settlement 4 - region 9 - state 29 - region 9\",\"settlement 4 - region 9 - state 29 - region 9\",\"settlement 4 - region 9 - state 29 - region 9\",\"settlement 4 - region 9 - state 39 - region 9\",\"settlement 4 - region 9 - state 39 - region 9\",\"settlement 4 - region 11 - state 111 - region 11\",\"settlement 4 - region 11 - state 111 - region 11\",\"settlement 4 - region 11 - state 111 - region 11\",\"settlement 4 - region 11 - state 111 - region 11\",\"settlement 4 - region 11 - state 111 - region 11\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 1 - state 11 - region 1\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 12 - region 2\",\"settlement 5 - region 2 - state 22 - region 2\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 3 - state 13 - region 3\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 4 - state 14 - region 4\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 5 - state 15 - region 5\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 6 - state 16 - region 6\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 7 - state 17 - region 7\",\"settlement 5 - region 8 - state 18 - region 8\",\"settlement 5 - region 8 - state 18 - region 8\",\"settlement 5 - region 8 - state 18 - region 8\",\"settlement 5 - region 8 - state 18 - region 8\",\"settlement 5 - region 8 - state 18 - region 8\",\"settlement 5 - region 8 - state 18 - region 8\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 19 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 29 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 9 - state 39 - region 9\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 110 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 10 - state 210 - region 10\",\"settlement 5 - region 11 - state 111 - region 11\",\"settlement 5 - region 11 - state 111 - region 11\",\"settlement 5 - region 11 - state 111 - region 11\",\"settlement 5 - region 11 - state 111 - region 11\",\"settlement 5 - region 11 - state 111 - region 11\",\"settlement 5 - region 11 - state 111 - region 11\"],\"hovertext\":[\"<br /> sample size 117\",\"<br /> sample size 164\",\"<br /> sample size 106\",\"<br /> sample size 113\",\"<br /> sample size 641\",\"settlement 1 - region 1 <br /> sample size 13\",\"settlement 1 - region 2 <br /> sample size 13\",\"settlement 1 - region 3 <br /> sample size 10\",\"settlement 1 - region 5 <br /> sample size 14\",\"settlement 1 - region 6 <br /> sample size 15\",\"settlement 1 - region 7 <br /> sample size 13\",\"settlement 1 - region 8 <br /> sample size 12\",\"settlement 1 - region 9 <br /> sample size 13\",\"settlement 1 - region 11 <br /> sample size 14\",\"settlement 2 - region 1 <br /> sample size 15\",\"settlement 2 - region 2 <br /> sample size 14\",\"settlement 2 - region 3 <br /> sample size 15\",\"settlement 2 - region 5 <br /> sample size 15\",\"settlement 2 - region 6 <br /> sample size 15\",\"settlement 2 - region 7 <br /> sample size 14\",\"settlement 2 - region 8 <br /> sample size 12\",\"settlement 2 - region 9 <br /> sample size 49\",\"settlement 2 - region 11 <br /> sample size 15\",\"settlement 3 - region 1 <br /> sample size 11\",\"settlement 3 - region 2 <br /> sample size 12\",\"settlement 3 - region 3 <br /> sample size 9\",\"settlement 3 - region 5 <br /> sample size 11\",\"settlement 3 - region 6 <br /> sample size 7\",\"settlement 3 - region 7 <br /> sample size 10\",\"settlement 3 - region 8 <br /> sample size 13\",\"settlement 3 - region 9 <br /> sample size 19\",\"settlement 3 - region 11 <br /> sample size 14\",\"settlement 4 - region 1 <br /> sample size 13\",\"settlement 4 - region 2 <br /> sample size 12\",\"settlement 4 - region 3 <br /> sample size 14\",\"settlement 4 - region 5 <br /> sample size 12\",\"settlement 4 - region 6 <br /> sample size 6\",\"settlement 4 - region 7 <br /> sample size 14\",\"settlement 4 - region 8 <br /> sample size 15\",\"settlement 4 - region 9 <br /> sample size 14\",\"settlement 4 - region 11 <br /> sample size 13\",\"settlement 5 - region 1 <br /> sample size 49\",\"settlement 5 - region 2 <br /> sample size 52\",\"settlement 5 - region 3 <br /> sample size 52\",\"settlement 5 - region 4 <br /> sample size 43\",\"settlement 5 - region 5 <br /> sample size 47\",\"settlement 5 - region 6 <br /> sample size 58\",\"settlement 5 - region 7 <br /> sample size 51\",\"settlement 5 - region 8 <br /> sample size 44\",\"settlement 5 - region 9 <br /> sample size 114\",\"settlement 5 - region 10 <br /> sample size 81\",\"settlement 5 - region 11 <br /> sample size 50\",\"settlement 1 - region 1 - state 11 - region 1 <br /> sample size 13\",\"settlement 1 - region 2 - state 12 - region 2 <br /> sample size 13\",\"settlement 1 - region 3 - state 13 - region 3 <br /> sample size 10\",\"settlement 1 - region 5 - state 15 - region 5 <br /> sample size 14\",\"settlement 1 - region 6 - state 16 - region 6 <br /> sample size 15\",\"settlement 1 - region 7 - state 17 - region 7 <br /> sample size 13\",\"settlement 1 - region 8 - state 18 - region 8 <br /> sample size 12\",\"settlement 1 - region 9 - state 29 - region 9 <br /> sample size 6\",\"settlement 1 - region 9 - state 39 - region 9 <br /> sample size 7\",\"settlement 1 - region 11 - state 111 - region 11 <br /> sample size 14\",\"settlement 2 - region 1 - state 11 - region 1 <br /> sample size 15\",\"settlement 2 - region 2 - state 12 - region 2 <br /> sample size 14\",\"settlement 2 - region 3 - state 13 - region 3 <br /> sample size 15\",\"settlement 2 - region 5 - state 15 - region 5 <br /> sample size 15\",\"settlement 2 - region 6 - state 16 - region 6 <br /> sample size 15\",\"settlement 2 - region 7 - state 17 - region 7 <br /> sample size 14\",\"settlement 2 - region 8 - state 18 - region 8 <br /> sample size 12\",\"settlement 2 - region 9 - state 29 - region 9 <br /> sample size 21\",\"settlement 2 - region 9 - state 39 - region 9 <br /> sample size 28\",\"settlement 2 - region 11 - state 111 - region 11 <br /> sample size 15\",\"settlement 3 - region 1 - state 11 - region 1 <br /> sample size 11\",\"settlement 3 - region 2 - state 12 - region 2 <br /> sample size 12\",\"settlement 3 - region 3 - state 13 - region 3 <br /> sample size 9\",\"settlement 3 - region 5 - state 15 - region 5 <br /> sample size 11\",\"settlement 3 - region 6 - state 16 - region 6 <br /> sample size 7\",\"settlement 3 - region 7 - state 17 - region 7 <br /> sample size 10\",\"settlement 3 - region 8 - state 18 - region 8 <br /> sample size 13\",\"settlement 3 - region 9 - state 29 - region 9 <br /> sample size 11\",\"settlement 3 - region 9 - state 39 - region 9 <br /> sample size 8\",\"settlement 3 - region 11 - state 111 - region 11 <br /> sample size 14\",\"settlement 4 - region 1 - state 11 - region 1 <br /> sample size 13\",\"settlement 4 - region 2 - state 12 - region 2 <br /> sample size 12\",\"settlement 4 - region 3 - state 13 - region 3 <br /> sample size 14\",\"settlement 4 - region 5 - state 15 - region 5 <br /> sample size 12\",\"settlement 4 - region 6 - state 16 - region 6 <br /> sample size 6\",\"settlement 4 - region 7 - state 17 - region 7 <br /> sample size 14\",\"settlement 4 - region 8 - state 18 - region 8 <br /> sample size 15\",\"settlement 4 - region 9 - state 29 - region 9 <br /> sample size 8\",\"settlement 4 - region 9 - state 39 - region 9 <br /> sample size 6\",\"settlement 4 - region 11 - state 111 - region 11 <br /> sample size 13\",\"settlement 5 - region 1 - state 11 - region 1 <br /> sample size 49\",\"settlement 5 - region 2 - state 12 - region 2 <br /> sample size 51\",\"settlement 5 - region 2 - state 22 - region 2 <br /> sample size 1\",\"settlement 5 - region 3 - state 13 - region 3 <br /> sample size 52\",\"settlement 5 - region 4 - state 14 - region 4 <br /> sample size 43\",\"settlement 5 - region 5 - state 15 - region 5 <br /> sample size 47\",\"settlement 5 - region 6 - state 16 - region 6 <br /> sample size 58\",\"settlement 5 - region 7 - state 17 - region 7 <br /> sample size 51\",\"settlement 5 - region 8 - state 18 - region 8 <br /> sample size 44\",\"settlement 5 - region 9 - state 19 - region 9 <br /> sample size 42\",\"settlement 5 - region 9 - state 29 - region 9 <br /> sample size 35\",\"settlement 5 - region 9 - state 39 - region 9 <br /> sample size 37\",\"settlement 5 - region 10 - state 110 - region 10 <br /> sample size 42\",\"settlement 5 - region 10 - state 210 - region 10 <br /> sample size 39\",\"settlement 5 - region 11 - state 111 - region 11 <br /> sample size 50\",\"settlement 1 - region 1 - state 11 - 111 <br /> sample size 2\",\"settlement 1 - region 1 - state 11 - 1110 <br /> sample size 3\",\"settlement 1 - region 1 - state 11 - 112 <br /> sample size 8\",\"settlement 1 - region 2 - state 12 - 1210 <br /> sample size 1\",\"settlement 1 - region 2 - state 12 - 1211 <br /> sample size 1\",\"settlement 1 - region 2 - state 12 - 1212 <br /> sample size 1\",\"settlement 1 - region 2 - state 12 - 1217 <br /> sample size 5\",\"settlement 1 - region 2 - state 12 - 123 <br /> sample size 1\",\"settlement 1 - region 2 - state 12 - 124 <br /> sample size 4\",\"settlement 1 - region 3 - state 13 - 1310 <br /> sample size 1\",\"settlement 1 - region 3 - state 13 - 1311 <br /> sample size 7\",\"settlement 1 - region 3 - state 13 - 132 <br /> sample size 2\",\"settlement 1 - region 5 - state 15 - 157 <br /> sample size 14\",\"settlement 1 - region 6 - state 16 - 161 <br /> sample size 11\",\"settlement 1 - region 6 - state 16 - 164 <br /> sample size 4\",\"settlement 1 - region 7 - state 17 - 172 <br /> sample size 2\",\"settlement 1 - region 7 - state 17 - 1720 <br /> sample size 4\",\"settlement 1 - region 7 - state 17 - 1721 <br /> sample size 1\",\"settlement 1 - region 7 - state 17 - 1727 <br /> sample size 2\",\"settlement 1 - region 7 - state 17 - 175 <br /> sample size 2\",\"settlement 1 - region 7 - state 17 - 177 <br /> sample size 1\",\"settlement 1 - region 7 - state 17 - 178 <br /> sample size 1\",\"settlement 1 - region 8 - state 18 - 182 <br /> sample size 1\",\"settlement 1 - region 8 - state 18 - 183 <br /> sample size 1\",\"settlement 1 - region 8 - state 18 - 184 <br /> sample size 2\",\"settlement 1 - region 8 - state 18 - 186 <br /> sample size 8\",\"settlement 1 - region 9 - state 29 - 2914 <br /> sample size 2\",\"settlement 1 - region 9 - state 29 - 2918 <br /> sample size 4\",\"settlement 1 - region 9 - state 39 - 3913 <br /> sample size 3\",\"settlement 1 - region 9 - state 39 - 3915 <br /> sample size 2\",\"settlement 1 - region 9 - state 39 - 395 <br /> sample size 2\",\"settlement 1 - region 11 - state 111 - 11112 <br /> sample size 2\",\"settlement 1 - region 11 - state 111 - 11113 <br /> sample size 1\",\"settlement 1 - region 11 - state 111 - 11114 <br /> sample size 1\",\"settlement 1 - region 11 - state 111 - 11116 <br /> sample size 2\",\"settlement 1 - region 11 - state 111 - 11117 <br /> sample size 1\",\"settlement 1 - region 11 - state 111 - 1112 <br /> sample size 1\",\"settlement 1 - region 11 - state 111 - 1113 <br /> sample size 2\",\"settlement 1 - region 11 - state 111 - 1116 <br /> sample size 2\",\"settlement 1 - region 11 - state 111 - 1118 <br /> sample size 1\",\"settlement 1 - region 11 - state 111 - 1119 <br /> sample size 1\",\"settlement 2 - region 1 - state 11 - 1112 <br /> sample size 1\",\"settlement 2 - region 1 - state 11 - 1124 <br /> sample size 11\",\"settlement 2 - region 1 - state 11 - 116 <br /> sample size 2\",\"settlement 2 - region 1 - state 11 - 117 <br /> sample size 1\",\"settlement 2 - region 2 - state 12 - 1211 <br /> sample size 3\",\"settlement 2 - region 2 - state 12 - 1212 <br /> sample size 2\",\"settlement 2 - region 2 - state 12 - 1213 <br /> sample size 1\",\"settlement 2 - region 2 - state 12 - 1216 <br /> sample size 4\",\"settlement 2 - region 2 - state 12 - 1217 <br /> sample size 4\",\"settlement 2 - region 3 - state 13 - 1310 <br /> sample size 6\",\"settlement 2 - region 3 - state 13 - 1311 <br /> sample size 3\",\"settlement 2 - region 3 - state 13 - 1313 <br /> sample size 1\",\"settlement 2 - region 3 - state 13 - 132 <br /> sample size 5\",\"settlement 2 - region 5 - state 15 - 157 <br /> sample size 15\",\"settlement 2 - region 6 - state 16 - 161 <br /> sample size 10\",\"settlement 2 - region 6 - state 16 - 164 <br /> sample size 5\",\"settlement 2 - region 7 - state 17 - 1710 <br /> sample size 1\",\"settlement 2 - region 7 - state 17 - 1714 <br /> sample size 3\",\"settlement 2 - region 7 - state 17 - 1720 <br /> sample size 1\",\"settlement 2 - region 7 - state 17 - 1724 <br /> sample size 1\",\"settlement 2 - region 7 - state 17 - 1727 <br /> sample size 3\",\"settlement 2 - region 7 - state 17 - 175 <br /> sample size 2\",\"settlement 2 - region 7 - state 17 - 177 <br /> sample size 2\",\"settlement 2 - region 7 - state 17 - 179 <br /> sample size 1\",\"settlement 2 - region 8 - state 18 - 182 <br /> sample size 6\",\"settlement 2 - region 8 - state 18 - 183 <br /> sample size 1\",\"settlement 2 - region 8 - state 18 - 186 <br /> sample size 5\",\"settlement 2 - region 9 - state 29 - 291 <br /> sample size 1\",\"settlement 2 - region 9 - state 29 - 2913 <br /> sample size 2\",\"settlement 2 - region 9 - state 29 - 2914 <br /> sample size 2\",\"settlement 2 - region 9 - state 29 - 2918 <br /> sample size 5\",\"settlement 2 - region 9 - state 29 - 292 <br /> sample size 2\",\"settlement 2 - region 9 - state 29 - 293 <br /> sample size 4\",\"settlement 2 - region 9 - state 29 - 297 <br /> sample size 4\",\"settlement 2 - region 9 - state 29 - 298 <br /> sample size 1\",\"settlement 2 - region 9 - state 39 - 3913 <br /> sample size 3\",\"settlement 2 - region 9 - state 39 - 3918 <br /> sample size 3\",\"settlement 2 - region 9 - state 39 - 3923 <br /> sample size 3\",\"settlement 2 - region 9 - state 39 - 3926 <br /> sample size 2\",\"settlement 2 - region 9 - state 39 - 3928 <br /> sample size 5\",\"settlement 2 - region 9 - state 39 - 395 <br /> sample size 2\",\"settlement 2 - region 9 - state 39 - 397 <br /> sample size 1\",\"settlement 2 - region 9 - state 39 - 398 <br /> sample size 9\",\"settlement 2 - region 11 - state 111 - 11110 <br /> sample size 1\",\"settlement 2 - region 11 - state 111 - 11111 <br /> sample size 1\",\"settlement 2 - region 11 - state 111 - 11112 <br /> sample size 9\",\"settlement 2 - region 11 - state 111 - 11113 <br /> sample size 1\",\"settlement 2 - region 11 - state 111 - 1113 <br /> sample size 3\",\"settlement 3 - region 1 - state 11 - 111 <br /> sample size 1\",\"settlement 3 - region 1 - state 11 - 1110 <br /> sample size 4\",\"settlement 3 - region 1 - state 11 - 112 <br /> sample size 2\",\"settlement 3 - region 1 - state 11 - 1124 <br /> sample size 3\",\"settlement 3 - region 1 - state 11 - 116 <br /> sample size 1\",\"settlement 3 - region 2 - state 12 - 121 <br /> sample size 1\",\"settlement 3 - region 2 - state 12 - 1211 <br /> sample size 2\",\"settlement 3 - region 2 - state 12 - 1216 <br /> sample size 5\",\"settlement 3 - region 2 - state 12 - 1217 <br /> sample size 4\",\"settlement 3 - region 3 - state 13 - 1310 <br /> sample size 5\",\"settlement 3 - region 3 - state 13 - 1311 <br /> sample size 2\",\"settlement 3 - region 3 - state 13 - 1313 <br /> sample size 2\",\"settlement 3 - region 5 - state 15 - 154 <br /> sample size 2\",\"settlement 3 - region 5 - state 15 - 157 <br /> sample size 9\",\"settlement 3 - region 6 - state 16 - 161 <br /> sample size 3\",\"settlement 3 - region 6 - state 16 - 164 <br /> sample size 2\",\"settlement 3 - region 6 - state 16 - 165 <br /> sample size 2\",\"settlement 3 - region 7 - state 17 - 1710 <br /> sample size 1\",\"settlement 3 - region 7 - state 17 - 1714 <br /> sample size 3\",\"settlement 3 - region 7 - state 17 - 1721 <br /> sample size 1\",\"settlement 3 - region 7 - state 17 - 1724 <br /> sample size 2\",\"settlement 3 - region 7 - state 17 - 1725 <br /> sample size 1\",\"settlement 3 - region 7 - state 17 - 1727 <br /> sample size 1\",\"settlement 3 - region 7 - state 17 - 176 <br /> sample size 1\",\"settlement 3 - region 8 - state 18 - 182 <br /> sample size 1\",\"settlement 3 - region 8 - state 18 - 186 <br /> sample size 12\",\"settlement 3 - region 9 - state 29 - 2914 <br /> sample size 1\",\"settlement 3 - region 9 - state 29 - 292 <br /> sample size 6\",\"settlement 3 - region 9 - state 29 - 293 <br /> sample size 2\",\"settlement 3 - region 9 - state 29 - 297 <br /> sample size 1\",\"settlement 3 - region 9 - state 29 - 298 <br /> sample size 1\",\"settlement 3 - region 9 - state 39 - 3913 <br /> sample size 2\",\"settlement 3 - region 9 - state 39 - 3915 <br /> sample size 1\",\"settlement 3 - region 9 - state 39 - 3918 <br /> sample size 2\",\"settlement 3 - region 9 - state 39 - 3923 <br /> sample size 1\",\"settlement 3 - region 9 - state 39 - 3926 <br /> sample size 2\",\"settlement 3 - region 11 - state 111 - 1111 <br /> sample size 1\",\"settlement 3 - region 11 - state 111 - 11110 <br /> sample size 1\",\"settlement 3 - region 11 - state 111 - 11112 <br /> sample size 1\",\"settlement 3 - region 11 - state 111 - 11113 <br /> sample size 1\",\"settlement 3 - region 11 - state 111 - 11117 <br /> sample size 2\",\"settlement 3 - region 11 - state 111 - 1112 <br /> sample size 1\",\"settlement 3 - region 11 - state 111 - 1113 <br /> sample size 1\",\"settlement 3 - region 11 - state 111 - 1114 <br /> sample size 3\",\"settlement 3 - region 11 - state 111 - 1118 <br /> sample size 3\",\"settlement 4 - region 1 - state 11 - 1110 <br /> sample size 2\",\"settlement 4 - region 1 - state 11 - 1124 <br /> sample size 9\",\"settlement 4 - region 1 - state 11 - 116 <br /> sample size 2\",\"settlement 4 - region 2 - state 12 - 121 <br /> sample size 1\",\"settlement 4 - region 2 - state 12 - 1212 <br /> sample size 1\",\"settlement 4 - region 2 - state 12 - 1213 <br /> sample size 1\",\"settlement 4 - region 2 - state 12 - 1216 <br /> sample size 6\",\"settlement 4 - region 2 - state 12 - 1217 <br /> sample size 2\",\"settlement 4 - region 2 - state 12 - 125 <br /> sample size 1\",\"settlement 4 - region 3 - state 13 - 1311 <br /> sample size 14\",\"settlement 4 - region 5 - state 15 - 157 <br /> sample size 12\",\"settlement 4 - region 6 - state 16 - 161 <br /> sample size 4\",\"settlement 4 - region 6 - state 16 - 164 <br /> sample size 2\",\"settlement 4 - region 7 - state 17 - 1710 <br /> sample size 6\",\"settlement 4 - region 7 - state 17 - 1714 <br /> sample size 1\",\"settlement 4 - region 7 - state 17 - 1720 <br /> sample size 1\",\"settlement 4 - region 7 - state 17 - 176 <br /> sample size 5\",\"settlement 4 - region 7 - state 17 - 178 <br /> sample size 1\",\"settlement 4 - region 8 - state 18 - 183 <br /> sample size 1\",\"settlement 4 - region 8 - state 18 - 186 <br /> sample size 14\",\"settlement 4 - region 9 - state 29 - 2913 <br /> sample size 1\",\"settlement 4 - region 9 - state 29 - 292 <br /> sample size 1\",\"settlement 4 - region 9 - state 29 - 295 <br /> sample size 1\",\"settlement 4 - region 9 - state 29 - 297 <br /> sample size 4\",\"settlement 4 - region 9 - state 29 - 298 <br /> sample size 1\",\"settlement 4 - region 9 - state 39 - 3915 <br /> sample size 1\",\"settlement 4 - region 9 - state 39 - 3926 <br /> sample size 5\",\"settlement 4 - region 11 - state 111 - 11111 <br /> sample size 5\",\"settlement 4 - region 11 - state 111 - 11115 <br /> sample size 1\",\"settlement 4 - region 11 - state 111 - 1114 <br /> sample size 1\",\"settlement 4 - region 11 - state 111 - 1115 <br /> sample size 1\",\"settlement 4 - region 11 - state 111 - 1118 <br /> sample size 5\",\"settlement 5 - region 1 - state 11 - 111 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 1110 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 1111 <br /> sample size 4\",\"settlement 5 - region 1 - state 11 - 1112 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 1113 <br /> sample size 1\",\"settlement 5 - region 1 - state 11 - 1114 <br /> sample size 3\",\"settlement 5 - region 1 - state 11 - 1115 <br /> sample size 1\",\"settlement 5 - region 1 - state 11 - 1116 <br /> sample size 1\",\"settlement 5 - region 1 - state 11 - 1117 <br /> sample size 1\",\"settlement 5 - region 1 - state 11 - 1118 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 1119 <br /> sample size 1\",\"settlement 5 - region 1 - state 11 - 112 <br /> sample size 5\",\"settlement 5 - region 1 - state 11 - 1120 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 1121 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 1122 <br /> sample size 1\",\"settlement 5 - region 1 - state 11 - 1123 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 113 <br /> sample size 3\",\"settlement 5 - region 1 - state 11 - 114 <br /> sample size 3\",\"settlement 5 - region 1 - state 11 - 115 <br /> sample size 3\",\"settlement 5 - region 1 - state 11 - 116 <br /> sample size 2\",\"settlement 5 - region 1 - state 11 - 118 <br /> sample size 4\",\"settlement 5 - region 1 - state 11 - 119 <br /> sample size 2\",\"settlement 5 - region 2 - state 12 - 1210 <br /> sample size 5\",\"settlement 5 - region 2 - state 12 - 1211 <br /> sample size 3\",\"settlement 5 - region 2 - state 12 - 1214 <br /> sample size 3\",\"settlement 5 - region 2 - state 12 - 1215 <br /> sample size 6\",\"settlement 5 - region 2 - state 12 - 1217 <br /> sample size 2\",\"settlement 5 - region 2 - state 12 - 122 <br /> sample size 7\",\"settlement 5 - region 2 - state 12 - 123 <br /> sample size 2\",\"settlement 5 - region 2 - state 12 - 124 <br /> sample size 3\",\"settlement 5 - region 2 - state 12 - 125 <br /> sample size 4\",\"settlement 5 - region 2 - state 12 - 126 <br /> sample size 5\",\"settlement 5 - region 2 - state 12 - 127 <br /> sample size 7\",\"settlement 5 - region 2 - state 12 - 128 <br /> sample size 3\",\"settlement 5 - region 2 - state 12 - 129 <br /> sample size 1\",\"settlement 5 - region 2 - state 22 - 221 <br /> sample size 1\",\"settlement 5 - region 3 - state 13 - 131 <br /> sample size 4\",\"settlement 5 - region 3 - state 13 - 1310 <br /> sample size 1\",\"settlement 5 - region 3 - state 13 - 1312 <br /> sample size 2\",\"settlement 5 - region 3 - state 13 - 1314 <br /> sample size 4\",\"settlement 5 - region 3 - state 13 - 1315 <br /> sample size 4\",\"settlement 5 - region 3 - state 13 - 1316 <br /> sample size 4\",\"settlement 5 - region 3 - state 13 - 1317 <br /> sample size 2\",\"settlement 5 - region 3 - state 13 - 133 <br /> sample size 3\",\"settlement 5 - region 3 - state 13 - 134 <br /> sample size 10\",\"settlement 5 - region 3 - state 13 - 135 <br /> sample size 2\",\"settlement 5 - region 3 - state 13 - 136 <br /> sample size 4\",\"settlement 5 - region 3 - state 13 - 137 <br /> sample size 1\",\"settlement 5 - region 3 - state 13 - 138 <br /> sample size 3\",\"settlement 5 - region 3 - state 13 - 139 <br /> sample size 8\",\"settlement 5 - region 4 - state 14 - 141 <br /> sample size 3\",\"settlement 5 - region 4 - state 14 - 1410 <br /> sample size 1\",\"settlement 5 - region 4 - state 14 - 1411 <br /> sample size 3\",\"settlement 5 - region 4 - state 14 - 1412 <br /> sample size 1\",\"settlement 5 - region 4 - state 14 - 1413 <br /> sample size 4\",\"settlement 5 - region 4 - state 14 - 1414 <br /> sample size 6\",\"settlement 5 - region 4 - state 14 - 142 <br /> sample size 8\",\"settlement 5 - region 4 - state 14 - 143 <br /> sample size 1\",\"settlement 5 - region 4 - state 14 - 144 <br /> sample size 3\",\"settlement 5 - region 4 - state 14 - 145 <br /> sample size 5\",\"settlement 5 - region 4 - state 14 - 146 <br /> sample size 1\",\"settlement 5 - region 4 - state 14 - 147 <br /> sample size 4\",\"settlement 5 - region 4 - state 14 - 148 <br /> sample size 2\",\"settlement 5 - region 4 - state 14 - 149 <br /> sample size 1\",\"settlement 5 - region 5 - state 15 - 151 <br /> sample size 5\",\"settlement 5 - region 5 - state 15 - 152 <br /> sample size 7\",\"settlement 5 - region 5 - state 15 - 153 <br /> sample size 1\",\"settlement 5 - region 5 - state 15 - 154 <br /> sample size 10\",\"settlement 5 - region 5 - state 15 - 155 <br /> sample size 6\",\"settlement 5 - region 5 - state 15 - 156 <br /> sample size 10\",\"settlement 5 - region 5 - state 15 - 157 <br /> sample size 8\",\"settlement 5 - region 6 - state 16 - 161 <br /> sample size 1\",\"settlement 5 - region 6 - state 16 - 1610 <br /> sample size 6\",\"settlement 5 - region 6 - state 16 - 1611 <br /> sample size 4\",\"settlement 5 - region 6 - state 16 - 1612 <br /> sample size 7\",\"settlement 5 - region 6 - state 16 - 1613 <br /> sample size 2\",\"settlement 5 - region 6 - state 16 - 162 <br /> sample size 5\",\"settlement 5 - region 6 - state 16 - 163 <br /> sample size 5\",\"settlement 5 - region 6 - state 16 - 164 <br /> sample size 5\",\"settlement 5 - region 6 - state 16 - 165 <br /> sample size 1\",\"settlement 5 - region 6 - state 16 - 166 <br /> sample size 3\",\"settlement 5 - region 6 - state 16 - 167 <br /> sample size 12\",\"settlement 5 - region 6 - state 16 - 168 <br /> sample size 4\",\"settlement 5 - region 6 - state 16 - 169 <br /> sample size 3\",\"settlement 5 - region 7 - state 17 - 171 <br /> sample size 2\",\"settlement 5 - region 7 - state 17 - 1711 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1712 <br /> sample size 4\",\"settlement 5 - region 7 - state 17 - 1713 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1714 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1715 <br /> sample size 2\",\"settlement 5 - region 7 - state 17 - 1716 <br /> sample size 9\",\"settlement 5 - region 7 - state 17 - 1717 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1718 <br /> sample size 2\",\"settlement 5 - region 7 - state 17 - 1719 <br /> sample size 2\",\"settlement 5 - region 7 - state 17 - 172 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1720 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1721 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1722 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1723 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1724 <br /> sample size 2\",\"settlement 5 - region 7 - state 17 - 1726 <br /> sample size 5\",\"settlement 5 - region 7 - state 17 - 1728 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1729 <br /> sample size 7\",\"settlement 5 - region 7 - state 17 - 173 <br /> sample size 1\",\"settlement 5 - region 7 - state 17 - 1730 <br /> sample size 3\",\"settlement 5 - region 7 - state 17 - 174 <br /> sample size 2\",\"settlement 5 - region 8 - state 18 - 181 <br /> sample size 3\",\"settlement 5 - region 8 - state 18 - 182 <br /> sample size 9\",\"settlement 5 - region 8 - state 18 - 183 <br /> sample size 9\",\"settlement 5 - region 8 - state 18 - 184 <br /> sample size 7\",\"settlement 5 - region 8 - state 18 - 185 <br /> sample size 7\",\"settlement 5 - region 8 - state 18 - 186 <br /> sample size 9\",\"settlement 5 - region 9 - state 19 - 191 <br /> sample size 6\",\"settlement 5 - region 9 - state 19 - 1910 <br /> sample size 1\",\"settlement 5 - region 9 - state 19 - 1911 <br /> sample size 5\",\"settlement 5 - region 9 - state 19 - 1912 <br /> sample size 1\",\"settlement 5 - region 9 - state 19 - 1913 <br /> sample size 4\",\"settlement 5 - region 9 - state 19 - 1914 <br /> sample size 1\",\"settlement 5 - region 9 - state 19 - 1915 <br /> sample size 3\",\"settlement 5 - region 9 - state 19 - 192 <br /> sample size 4\",\"settlement 5 - region 9 - state 19 - 193 <br /> sample size 4\",\"settlement 5 - region 9 - state 19 - 194 <br /> sample size 4\",\"settlement 5 - region 9 - state 19 - 195 <br /> sample size 3\",\"settlement 5 - region 9 - state 19 - 196 <br /> sample size 1\",\"settlement 5 - region 9 - state 19 - 197 <br /> sample size 1\",\"settlement 5 - region 9 - state 19 - 198 <br /> sample size 2\",\"settlement 5 - region 9 - state 19 - 199 <br /> sample size 2\",\"settlement 5 - region 9 - state 29 - 291 <br /> sample size 2\",\"settlement 5 - region 9 - state 29 - 2910 <br /> sample size 1\",\"settlement 5 - region 9 - state 29 - 2911 <br /> sample size 2\",\"settlement 5 - region 9 - state 29 - 2912 <br /> sample size 4\",\"settlement 5 - region 9 - state 29 - 2913 <br /> sample size 7\",\"settlement 5 - region 9 - state 29 - 2915 <br /> sample size 1\",\"settlement 5 - region 9 - state 29 - 2916 <br /> sample size 2\",\"settlement 5 - region 9 - state 29 - 2917 <br /> sample size 1\",\"settlement 5 - region 9 - state 29 - 292 <br /> sample size 3\",\"settlement 5 - region 9 - state 29 - 293 <br /> sample size 2\",\"settlement 5 - region 9 - state 29 - 294 <br /> sample size 3\",\"settlement 5 - region 9 - state 29 - 295 <br /> sample size 1\",\"settlement 5 - region 9 - state 29 - 296 <br /> sample size 4\",\"settlement 5 - region 9 - state 29 - 299 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 391 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 3910 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 3911 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 3912 <br /> sample size 5\",\"settlement 5 - region 9 - state 39 - 3914 <br /> sample size 3\",\"settlement 5 - region 9 - state 39 - 3916 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 3917 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 3919 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 392 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 3920 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 3921 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 3922 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 3924 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 3925 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 3927 <br /> sample size 1\",\"settlement 5 - region 9 - state 39 - 3929 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 393 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 394 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 396 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 397 <br /> sample size 2\",\"settlement 5 - region 9 - state 39 - 399 <br /> sample size 1\",\"settlement 5 - region 10 - state 110 - 1101 <br /> sample size 2\",\"settlement 5 - region 10 - state 110 - 11010 <br /> sample size 2\",\"settlement 5 - region 10 - state 110 - 11011 <br /> sample size 12\",\"settlement 5 - region 10 - state 110 - 11012 <br /> sample size 3\",\"settlement 5 - region 10 - state 110 - 1102 <br /> sample size 1\",\"settlement 5 - region 10 - state 110 - 1103 <br /> sample size 6\",\"settlement 5 - region 10 - state 110 - 1104 <br /> sample size 2\",\"settlement 5 - region 10 - state 110 - 1105 <br /> sample size 1\",\"settlement 5 - region 10 - state 110 - 1106 <br /> sample size 6\",\"settlement 5 - region 10 - state 110 - 1107 <br /> sample size 2\",\"settlement 5 - region 10 - state 110 - 1108 <br /> sample size 2\",\"settlement 5 - region 10 - state 110 - 1109 <br /> sample size 3\",\"settlement 5 - region 10 - state 210 - 2101 <br /> sample size 1\",\"settlement 5 - region 10 - state 210 - 21010 <br /> sample size 3\",\"settlement 5 - region 10 - state 210 - 21011 <br /> sample size 2\",\"settlement 5 - region 10 - state 210 - 21012 <br /> sample size 3\",\"settlement 5 - region 10 - state 210 - 2102 <br /> sample size 2\",\"settlement 5 - region 10 - state 210 - 2103 <br /> sample size 4\",\"settlement 5 - region 10 - state 210 - 2104 <br /> sample size 4\",\"settlement 5 - region 10 - state 210 - 2105 <br /> sample size 3\",\"settlement 5 - region 10 - state 210 - 2106 <br /> sample size 5\",\"settlement 5 - region 10 - state 210 - 2107 <br /> sample size 5\",\"settlement 5 - region 10 - state 210 - 2108 <br /> sample size 4\",\"settlement 5 - region 10 - state 210 - 2109 <br /> sample size 3\",\"settlement 5 - region 11 - state 111 - 11112 <br /> sample size 2\",\"settlement 5 - region 11 - state 111 - 1114 <br /> sample size 3\",\"settlement 5 - region 11 - state 111 - 1116 <br /> sample size 13\",\"settlement 5 - region 11 - state 111 - 1117 <br /> sample size 14\",\"settlement 5 - region 11 - state 111 - 1118 <br /> sample size 2\",\"settlement 5 - region 11 - state 111 - 1119 <br /> sample size 16\"],\"insidetextorientation\":\"radial\",\"type\":\"sunburst\",\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\r\nFigure 2: Full grouping structure of the survey\r\n\r\n\r\n\r\nPlotly enables interaction with the chart: click on the grouping to get the detailed picture of the hierarchy.\r\nVisualising missing combinations\r\nIt is important to explore what are the missing combinations in the data:.\r\nto understand the characteristics of our sample\r\nto index correctly the model\r\nFor that purpose we will make use of the wonderful function from the tidyversesuite: complete.\r\nTo demonstrate, we will use the two first layers that are typeand region, such that we want to spot the regions that do not contain all settlement types:\r\n\r\n\r\nshow\r\n\r\n# create missing combinations\r\ndata_complete <- data %>% \r\n  complete(region, nesting(type))\r\n\r\ndata_complete %>% filter(is.na(local)) %>% kbl() %>% kable_minimal()\r\n\r\n\r\n\r\nregion\r\n\r\n\r\ntype\r\n\r\n\r\nid\r\n\r\n\r\npopulation\r\n\r\n\r\npop_density\r\n\r\n\r\nstate\r\n\r\n\r\nlocal\r\n\r\n\r\n4\r\n\r\n\r\n1\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\n4\r\n\r\n\r\n2\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\n4\r\n\r\n\r\n3\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\n4\r\n\r\n\r\n4\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\n10\r\n\r\n\r\n1\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\n10\r\n\r\n\r\n2\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\n10\r\n\r\n\r\n3\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\n10\r\n\r\n\r\n4\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nNA\r\n\r\n\r\nWe see that two regions (4 and 10) comprise only settlement type 5.\r\nWe can visualise it with a sunburst chart by adding a color attribute:\r\n\r\n\r\nshow\r\n\r\nmakeSunburst2layer <- function(data){\r\n  layers <- rbind(\r\n  # first layer\r\n  data %>% \r\n    group_by(type) %>% \r\n    summarise(n=sum(!is.na(population))) %>% \r\n    mutate(\r\n      ids = paste0('settlement', type),\r\n      labels = paste0('settlement <br>', type),\r\n      parents = '') %>% \r\n    ungroup() %>% \r\n    select(ids,labels, parents,n),\r\n  # second layer\r\n  data %>% \r\n    group_by(type, region) %>% \r\n    summarise(n=sum(!is.na(population))) %>% \r\n    mutate(\r\n      ids = paste('settlement', type, '-', 'region', region),\r\n      labels = paste0('region ', region),\r\n      parents = paste0('settlement', type))%>% \r\n    ungroup() %>% \r\n    select(ids,labels, parents,n)) %>%\r\n    mutate(\r\n      hover= paste(ids, '\\n sample size', n),\r\n      color= ifelse(n==0, 'yellow','')\r\n    )\r\n  \r\n return(layers)\r\n}\r\n\r\nplot_ly() %>% \r\n   add_trace(data=makeSunburst2layer(data), \r\n             ids = ~ids, labels = ~labels, parents = ~parents, \r\n             type = 'sunburst', \r\n             hovertext=~hover, marker= list(colors=~color),  \r\n             insidetextorientation='radial',\r\n             domain = list(column = 0)) %>% \r\n     add_trace(data=makeSunburst2layer(data_complete), \r\n             ids = ~ids, labels = ~labels, parents = ~parents, \r\n             type = 'sunburst', \r\n             hovertext=~hover, marker= list(colors=~color),  \r\n             insidetextorientation='radial',\r\n             domain = list(column = 1))  %>%  \r\n  layout(\r\n      grid = list(columns =2, rows = 1),\r\n      margin = list(l = 0, r = 0, b = 0, t = 0))\r\n\r\n\r\n\r\n\r\n{\"x\":{\"visdat\":{\"820c657253c9\":[\"function () \",\"plotlyVisDat\"],\"820c62d0679\":[\"function () \",\"data\"],\"820c26a3b39\":[\"function () \",\"data\"]},\"cur_data\":\"820c26a3b39\",\"attrs\":{\"820c62d0679\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"ids\":{},\"labels\":{},\"parents\":{},\"type\":\"sunburst\",\"hovertext\":{},\"marker\":{\"colors\":{}},\"insidetextorientation\":\"radial\",\"domain\":{\"column\":0},\"inherit\":true},\"820c26a3b39\":{\"alpha_stroke\":1,\"sizes\":[10,100],\"spans\":[1,20],\"ids\":{},\"labels\":{},\"parents\":{},\"type\":\"sunburst\",\"hovertext\":{},\"marker\":{\"colors\":{}},\"insidetextorientation\":\"radial\",\"domain\":{\"column\":1},\"inherit\":true}},\"layout\":{\"margin\":{\"b\":0,\"l\":0,\"t\":0,\"r\":0},\"grid\":{\"columns\":2,\"rows\":1},\"hovermode\":\"closest\",\"showlegend\":true},\"source\":\"A\",\"config\":{\"showSendToCloud\":false},\"data\":[{\"ids\":[\"settlement1\",\"settlement2\",\"settlement3\",\"settlement4\",\"settlement5\",\"settlement 1 - region 1\",\"settlement 1 - region 2\",\"settlement 1 - region 3\",\"settlement 1 - region 5\",\"settlement 1 - region 6\",\"settlement 1 - region 7\",\"settlement 1 - region 8\",\"settlement 1 - region 9\",\"settlement 1 - region 11\",\"settlement 2 - region 1\",\"settlement 2 - region 2\",\"settlement 2 - region 3\",\"settlement 2 - region 5\",\"settlement 2 - region 6\",\"settlement 2 - region 7\",\"settlement 2 - region 8\",\"settlement 2 - region 9\",\"settlement 2 - region 11\",\"settlement 3 - region 1\",\"settlement 3 - region 2\",\"settlement 3 - region 3\",\"settlement 3 - region 5\",\"settlement 3 - region 6\",\"settlement 3 - region 7\",\"settlement 3 - region 8\",\"settlement 3 - region 9\",\"settlement 3 - region 11\",\"settlement 4 - region 1\",\"settlement 4 - region 2\",\"settlement 4 - region 3\",\"settlement 4 - region 5\",\"settlement 4 - region 6\",\"settlement 4 - region 7\",\"settlement 4 - region 8\",\"settlement 4 - region 9\",\"settlement 4 - region 11\",\"settlement 5 - region 1\",\"settlement 5 - region 2\",\"settlement 5 - region 3\",\"settlement 5 - region 4\",\"settlement 5 - region 5\",\"settlement 5 - region 6\",\"settlement 5 - region 7\",\"settlement 5 - region 8\",\"settlement 5 - region 9\",\"settlement 5 - region 10\",\"settlement 5 - region 11\"],\"labels\":[\"settlement <br>1\",\"settlement <br>2\",\"settlement <br>3\",\"settlement <br>4\",\"settlement <br>5\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\"],\"parents\":[\"\",\"\",\"\",\"\",\"\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\"],\"type\":\"sunburst\",\"hovertext\":[\"settlement1 <br /> sample size 117\",\"settlement2 <br /> sample size 164\",\"settlement3 <br /> sample size 106\",\"settlement4 <br /> sample size 113\",\"settlement5 <br /> sample size 641\",\"settlement 1 - region 1 <br /> sample size 13\",\"settlement 1 - region 2 <br /> sample size 13\",\"settlement 1 - region 3 <br /> sample size 10\",\"settlement 1 - region 5 <br /> sample size 14\",\"settlement 1 - region 6 <br /> sample size 15\",\"settlement 1 - region 7 <br /> sample size 13\",\"settlement 1 - region 8 <br /> sample size 12\",\"settlement 1 - region 9 <br /> sample size 13\",\"settlement 1 - region 11 <br /> sample size 14\",\"settlement 2 - region 1 <br /> sample size 15\",\"settlement 2 - region 2 <br /> sample size 14\",\"settlement 2 - region 3 <br /> sample size 15\",\"settlement 2 - region 5 <br /> sample size 15\",\"settlement 2 - region 6 <br /> sample size 15\",\"settlement 2 - region 7 <br /> sample size 14\",\"settlement 2 - region 8 <br /> sample size 12\",\"settlement 2 - region 9 <br /> sample size 49\",\"settlement 2 - region 11 <br /> sample size 15\",\"settlement 3 - region 1 <br /> sample size 11\",\"settlement 3 - region 2 <br /> sample size 12\",\"settlement 3 - region 3 <br /> sample size 9\",\"settlement 3 - region 5 <br /> sample size 11\",\"settlement 3 - region 6 <br /> sample size 7\",\"settlement 3 - region 7 <br /> sample size 10\",\"settlement 3 - region 8 <br /> sample size 13\",\"settlement 3 - region 9 <br /> sample size 19\",\"settlement 3 - region 11 <br /> sample size 14\",\"settlement 4 - region 1 <br /> sample size 13\",\"settlement 4 - region 2 <br /> sample size 12\",\"settlement 4 - region 3 <br /> sample size 14\",\"settlement 4 - region 5 <br /> sample size 12\",\"settlement 4 - region 6 <br /> sample size 6\",\"settlement 4 - region 7 <br /> sample size 14\",\"settlement 4 - region 8 <br /> sample size 15\",\"settlement 4 - region 9 <br /> sample size 14\",\"settlement 4 - region 11 <br /> sample size 13\",\"settlement 5 - region 1 <br /> sample size 49\",\"settlement 5 - region 2 <br /> sample size 52\",\"settlement 5 - region 3 <br /> sample size 52\",\"settlement 5 - region 4 <br /> sample size 43\",\"settlement 5 - region 5 <br /> sample size 47\",\"settlement 5 - region 6 <br /> sample size 58\",\"settlement 5 - region 7 <br /> sample size 51\",\"settlement 5 - region 8 <br /> sample size 44\",\"settlement 5 - region 9 <br /> sample size 114\",\"settlement 5 - region 10 <br /> sample size 81\",\"settlement 5 - region 11 <br /> sample size 50\"],\"marker\":{\"color\":\"rgba(31,119,180,1)\",\"colors\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"insidetextorientation\":\"radial\",\"domain\":{\"column\":0},\"frame\":null},{\"ids\":[\"settlement1\",\"settlement2\",\"settlement3\",\"settlement4\",\"settlement5\",\"settlement 1 - region 1\",\"settlement 1 - region 2\",\"settlement 1 - region 3\",\"settlement 1 - region 4\",\"settlement 1 - region 5\",\"settlement 1 - region 6\",\"settlement 1 - region 7\",\"settlement 1 - region 8\",\"settlement 1 - region 9\",\"settlement 1 - region 10\",\"settlement 1 - region 11\",\"settlement 2 - region 1\",\"settlement 2 - region 2\",\"settlement 2 - region 3\",\"settlement 2 - region 4\",\"settlement 2 - region 5\",\"settlement 2 - region 6\",\"settlement 2 - region 7\",\"settlement 2 - region 8\",\"settlement 2 - region 9\",\"settlement 2 - region 10\",\"settlement 2 - region 11\",\"settlement 3 - region 1\",\"settlement 3 - region 2\",\"settlement 3 - region 3\",\"settlement 3 - region 4\",\"settlement 3 - region 5\",\"settlement 3 - region 6\",\"settlement 3 - region 7\",\"settlement 3 - region 8\",\"settlement 3 - region 9\",\"settlement 3 - region 10\",\"settlement 3 - region 11\",\"settlement 4 - region 1\",\"settlement 4 - region 2\",\"settlement 4 - region 3\",\"settlement 4 - region 4\",\"settlement 4 - region 5\",\"settlement 4 - region 6\",\"settlement 4 - region 7\",\"settlement 4 - region 8\",\"settlement 4 - region 9\",\"settlement 4 - region 10\",\"settlement 4 - region 11\",\"settlement 5 - region 1\",\"settlement 5 - region 2\",\"settlement 5 - region 3\",\"settlement 5 - region 4\",\"settlement 5 - region 5\",\"settlement 5 - region 6\",\"settlement 5 - region 7\",\"settlement 5 - region 8\",\"settlement 5 - region 9\",\"settlement 5 - region 10\",\"settlement 5 - region 11\"],\"labels\":[\"settlement <br>1\",\"settlement <br>2\",\"settlement <br>3\",\"settlement <br>4\",\"settlement <br>5\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\",\"region 1\",\"region 2\",\"region 3\",\"region 4\",\"region 5\",\"region 6\",\"region 7\",\"region 8\",\"region 9\",\"region 10\",\"region 11\"],\"parents\":[\"\",\"\",\"\",\"\",\"\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement1\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement2\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement3\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement4\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\",\"settlement5\"],\"type\":\"sunburst\",\"hovertext\":[\"settlement1 <br /> sample size 117\",\"settlement2 <br /> sample size 164\",\"settlement3 <br /> sample size 106\",\"settlement4 <br /> sample size 113\",\"settlement5 <br /> sample size 641\",\"settlement 1 - region 1 <br /> sample size 13\",\"settlement 1 - region 2 <br /> sample size 13\",\"settlement 1 - region 3 <br /> sample size 10\",\"settlement 1 - region 4 <br /> sample size 0\",\"settlement 1 - region 5 <br /> sample size 14\",\"settlement 1 - region 6 <br /> sample size 15\",\"settlement 1 - region 7 <br /> sample size 13\",\"settlement 1 - region 8 <br /> sample size 12\",\"settlement 1 - region 9 <br /> sample size 13\",\"settlement 1 - region 10 <br /> sample size 0\",\"settlement 1 - region 11 <br /> sample size 14\",\"settlement 2 - region 1 <br /> sample size 15\",\"settlement 2 - region 2 <br /> sample size 14\",\"settlement 2 - region 3 <br /> sample size 15\",\"settlement 2 - region 4 <br /> sample size 0\",\"settlement 2 - region 5 <br /> sample size 15\",\"settlement 2 - region 6 <br /> sample size 15\",\"settlement 2 - region 7 <br /> sample size 14\",\"settlement 2 - region 8 <br /> sample size 12\",\"settlement 2 - region 9 <br /> sample size 49\",\"settlement 2 - region 10 <br /> sample size 0\",\"settlement 2 - region 11 <br /> sample size 15\",\"settlement 3 - region 1 <br /> sample size 11\",\"settlement 3 - region 2 <br /> sample size 12\",\"settlement 3 - region 3 <br /> sample size 9\",\"settlement 3 - region 4 <br /> sample size 0\",\"settlement 3 - region 5 <br /> sample size 11\",\"settlement 3 - region 6 <br /> sample size 7\",\"settlement 3 - region 7 <br /> sample size 10\",\"settlement 3 - region 8 <br /> sample size 13\",\"settlement 3 - region 9 <br /> sample size 19\",\"settlement 3 - region 10 <br /> sample size 0\",\"settlement 3 - region 11 <br /> sample size 14\",\"settlement 4 - region 1 <br /> sample size 13\",\"settlement 4 - region 2 <br /> sample size 12\",\"settlement 4 - region 3 <br /> sample size 14\",\"settlement 4 - region 4 <br /> sample size 0\",\"settlement 4 - region 5 <br /> sample size 12\",\"settlement 4 - region 6 <br /> sample size 6\",\"settlement 4 - region 7 <br /> sample size 14\",\"settlement 4 - region 8 <br /> sample size 15\",\"settlement 4 - region 9 <br /> sample size 14\",\"settlement 4 - region 10 <br /> sample size 0\",\"settlement 4 - region 11 <br /> sample size 13\",\"settlement 5 - region 1 <br /> sample size 49\",\"settlement 5 - region 2 <br /> sample size 52\",\"settlement 5 - region 3 <br /> sample size 52\",\"settlement 5 - region 4 <br /> sample size 43\",\"settlement 5 - region 5 <br /> sample size 47\",\"settlement 5 - region 6 <br /> sample size 58\",\"settlement 5 - region 7 <br /> sample size 51\",\"settlement 5 - region 8 <br /> sample size 44\",\"settlement 5 - region 9 <br /> sample size 114\",\"settlement 5 - region 10 <br /> sample size 81\",\"settlement 5 - region 11 <br /> sample size 50\"],\"marker\":{\"color\":\"rgba(255,127,14,1)\",\"colors\":[\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"\",\"yellow\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\",\"\"],\"line\":{\"color\":\"rgba(255,255,255,1)\"}},\"insidetextorientation\":\"radial\",\"domain\":{\"column\":1},\"frame\":null}],\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}\r\nFigure 3: Full grouping structure of the survey with missing groups\r\n\r\n\r\n\r\n\r\n\r\n\r\nLeasure, Douglas R., Warren C. Jochem, Eric M. Weber, Vincent Seaman, and Andrew J. Tatem. 2020a. “National Population Mapping from Sparse Survey Data: A Hierarchical Bayesian Modeling Framework to Account for Uncertainty.” Proceedings of the National Academy of Sciences 117 (39): 24173–79. https://doi.org/10.1073/pnas.1913050117.\r\n\r\n\r\nLeasure, Douglas R, Warren C Jochem, Eric M Weber, Vincent Seaman, and Andrew J Tatem. 2020b. “National Population Mapping from Sparse Survey Data: A Hierarchical Bayesian Modeling Framework to Account for Uncertainty.” Proceedings of the National Academy of Sciences.\r\n\r\n\r\nWeber, Eric M., Vincent Y. Seaman, Robert N. Stewart, Tomas J. Bird, Andrew J. Tatem, Jacob J. McKee, Budhendra L. Bhaduri, Jessica J. Moehl, and Andrew E. Reith. 2018. “Census-Independent Population Mapping in Northern Nigeria.” Remote Sensing of Environment 204 (January): 786–98. https://doi.org/10.1016/j.rse.2017.09.024.\r\n\r\n\r\nThe example sunburst chart is from: https://www.syncfusion.com/products/wpf/control/images/sfsunburst/sunburst.png)’)↩︎\r\n",
    "preview": "posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/./sunburst_2layers.png",
    "last_modified": "2021-08-02T18:54:34+01:00",
    "input_file": {},
    "preview_width": 661,
    "preview_height": 409
  },
  {
    "path": "posts/2021-08-01-woprvision/",
    "title": "woprVision: a shiny app to visualise Bayesian predictions",
    "description": "I helped develop woprVision, a multilingual interacive application to visualise and retrieve Bayesian population estimates. We use woprVision at WorldPop as part of our data release process to support (1) mean estimates spatial aggregation for people with limited GIS-skills (2) full distribution aggregation for coomputing correct credible intervals.",
    "author": [
      {
        "name": "Edith Darin",
        "url": {}
      }
    ],
    "date": "2021-06-10",
    "categories": [],
    "contents": "\r\nwoprVision is an R shiny application that allows you to browse an interactive map to get population estimates for specific locations and demographic groups. It is\r\nIt has been developed for three reasons:\r\nvisualization of newly released population datasets\r\neasy interaction with gridded population for people with limited GIS skills through (1) a drawing function, (2) a geojson upload function.\r\ncomputation of adequate credible intervals for spatial aggregates from the full posterior distribution\r\nwoprVision is available online at https://apps.worldpop.org/woprVision.\r\nIts source code is hosted here: https://github.com/wpgp/wopr\r\n\r\nIf run with local files, woprVision requires a SQLlite database with population prediction distribution for every grid cell and a tiled image of the gridded population.\r\nOnline, it runs on a shiny server and pings the WorldPop API.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-08-01-woprvision/woprvision.PNG",
    "last_modified": "2021-08-11T11:53:47+01:00",
    "input_file": {},
    "preview_width": 1375,
    "preview_height": 609
  },
  {
    "path": "posts/2021-06-02-high-resolution-covariates-and-top-down-population-disagregation/",
    "title": "How fine can a top-down population model be? [draft]",
    "description": "We will study the use of very high-resolution covariates in top-down population model and its impact on population gridded estimates. We will examine building-footprint derived covariates in Sierra Leone population model. Disclaimer: This post is still being drafted.",
    "author": [
      {
        "name": "Edith Darin",
        "url": {}
      }
    ],
    "date": "2021-06-02",
    "categories": [],
    "contents": "\r\nDisclaimer: This post is still being drafted.\r\nBackground\r\nTo obtain high-resolution population estimates, WorldPop developed a top-down method that disagregates population totals into grid cells thanks to ancillary geospatial covariates.\r\nThe method consists in fitting a random-forest model (Breiman 2001) at the finest administrative level for which population count is available. The estimated model is then used to predict population density for every grid cell thanks to the geospatial covariates. Finally, the predicted gridded population density layer plays the role of a weighting layer to breakdown the population totals into the grid cells (Stevens et al. 2015).\r\nTop-down disagregation modelThe geospatial covariates commonly used by WorldPop initative for mapping population globally (WorldPop Research Group et al. 2018) are based1:\r\non resampled rasters\r\nResampled DMSP-OLS night-time lights 2000-2011\r\nResampled VIIRS night-time lights 2012-2016\r\nSRTM-based elevation per country 2000\r\nSRTM-based slope per country 2000\r\nThe input rasters have a resolution ranging from 900m to 90 m at the Equateur (Lloyd et al. 2019).\r\n\r\n\r\n\r\nFigure 1: Exemple of raster resampling: Slope in Sierra Leone\r\n\r\n\r\n\r\non Euclidean distance measurement\r\nDistance to European Space Agency Land cover categories\r\nDistance to International Union for Conservation of Nature strict nature reserve and wilderness area edges\r\nDistance to open-water coastline per country\r\nDistance to OpenStreetMap (OSM) major roads, major road intersections and major waterways\r\nRasters resulting from Euclidian distance measurement can have virtually any spatial resolution. They however might not be representative of localized informative variations for population modelling.\r\n\r\n\r\n\r\nFigure 2: Exemple of Euclidean measurement: Distance to waterways in Sierra Leone\r\n\r\n\r\n\r\nheir distribution\r\nThe purpose of this post will be to study the impact of the building-footprint derived covariates on the modelling and subsequently on the gridded estimates in Sierra Leone.\r\nData\r\nRecently, WorldPop released openly gridded building patterns across entire sub-Saharan Africa at 100m resolution (Dooley and Tatem 2020). These were derived from building footprints extracted from satellite imagery with a spatial accuracy of 6m (Ecopia.AI and Maxar Technologies 2019). In top-down modelling, this data has already been used to produce an alternative global set of gridded population estimates constraining the estimates to settled grid cells2 (Bondarenko et al. 2020).\r\nMethod\r\n\r\n\r\n\r\nBondarenko, Maksym, David Kerr, Alessandro Sorichetta, and Andrew Tatem. 2020. “Census/Projection-Disaggregated Gridded Population Datasets for 51 Countries Across Sub-Saharan Africa in 2020 Using Building Footprints.”\r\n\r\n\r\nBreiman, Leo. 2001. “Random Forests.” Machine Learning 45 (1): 5–32.\r\n\r\n\r\nDooley, Claire A, and Andrew J Tatem. 2020. Gridded Maps of Building Patterns Throughout Sub-Saharan Africa, Version 1.0. WorldPop Research Group, University of Southampton. https://doi.org/10.5258/SOTON/WP00666.\r\n\r\n\r\nEcopia.AI, and Maxar Technologies. 2019. Digitize Africa Data.\r\n\r\n\r\nLloyd, Christopher T, Heather Chamberlain, David Kerr, Greg Yetman, Linda Pistolesi, Forrest R Stevens, Andrea E Gaughan, et al. 2019. “Global Spatio-Temporally Harmonised Datasets for Producing High-Resolution Gridded Population Distribution Datasets.” Big Earth Data 3 (2): 108139. https://doi.org/10.1080/20964471.2019.1625151.\r\n\r\n\r\nStevens, Forrest R., Andrea E. Gaughan, Catherine Linard, and Andrew J. Tatem. 2015. “Disaggregating Census Data for Population Mapping Using Random Forests with Remotely-Sensed and Ancillary Data.” PLOS ONE 10 (2): e0107042. https://doi.org/10.1371/journal.pone.0107042.\r\n\r\n\r\nWorldPop Research Group, Department of Geography and Geosciences, University of Louisville, Departement de Geographie, Universite de Namur, and Center for International Earth Science Information Network (CIESIN), Columbia University. 2018. “Global High Resolution Population Denominators Project - Funded by the Bill and Melinda Gates Foundation (Opp1134076).” https://doi.org/10.5258/SOTON/WP00645.\r\n\r\n\r\nThey can be downloaded at: https://www.worldpop.org/project/categories?id=14↩︎\r\nSettled cells are cells containing at least one building footprint.↩︎\r\n",
    "preview": "posts/2021-06-02-high-resolution-covariates-and-top-down-population-disagregation/dat/sle_slope.PNG",
    "last_modified": "2021-08-02T18:50:46+01:00",
    "input_file": {},
    "preview_width": 403,
    "preview_height": 400
  },
  {
    "path": "posts/2021-07-02-top-down-r-tutorial/",
    "title": "Small area population estimates using random forest top-down disaggregation: An R tutorial",
    "description": "I have co-authored an R tutorial on how to develop top-down population models, which consists in disaggregating administrative estimates to a finer spatial resolution. We  first shared this tutorial with the Brazilian Stats Office (IGBE).",
    "author": [
      {
        "name": "Douglas R Leasure",
        "url": {}
      },
      {
        "name": "Edith Darin",
        "url": {}
      },
      {
        "name": "Andrew J tatem",
        "url": {}
      }
    ],
    "date": "2020-12-08",
    "categories": [],
    "contents": "\r\nNote: This blog post is a simple copy/paste of “Leasure DR, Darin E, Tatem AJ. 2020. Small area population estimates using random forest top-down disaggregation: An R tutorial. WorldPop, University of Southampton. doi:10.5258/SOTON/WP00697,” published first here.\r\nIntroduction\r\nThe purpose of top-down disaggregation is to estimate population counts at a finer spatial resolution than the available population totals for administrative units. WorldPop top-down disaggregation implements a dasymetric mapping approach that uses the random forest machine learning algorithm to disaggregate projected census totals to estimate population counts for 100 m grid cells (Stevens et al. 2015; Sorichetta et al. 2015). Dasymetric mapping estimates population counts at a finer resolution than the input population totals based on relationships with high resolution geospatial covariates like building locations and road networks.\r\nIn this tutorial, we will demonstrate how to implement this method in the R statistical programming environment. We will adapt the method to estimate population counts for census enumeration areas (EAs) rather than 100 m grid cells. To demonstrate the approach, we will dissaggregate population totals from municipalities in Brazil to estimate populations in finer-scale census EAs (Fig. 1).\r\n\r\n\r\n\r\nFigure 1: Example of enumeration area boundaries in Brazil\r\n\r\n\r\n\r\nPre-requisites\r\nThe following software may be needed to complete this tutorial:\r\nR environment,\r\nRStudio (optional), and\r\nArcGIS or QGIS (optional to view results).\r\nThe following pre-requisite skills may be helpful:\r\nR programming language\r\ninstall packages, load and manipulate data\r\n\r\nMachine learning concepts\r\npredictor and response variables, model diagnostics\r\n\r\nGIS concepts\r\nraster and vector data, zonal statistics\r\n\r\nBackground\r\nThe modelling process consists of three steps (Fig. 2):\r\nEstimate the relationship between population density and geospatial covariates at the municipality level,\r\nPredict population densities at the level of enumeration areas using the covariates, and\r\nUse predicted densities as a weighting layer to disaggregate the population totals for municipalities.\r\nThe core product is the weighting layer that should reflect the spatial distribution of the population inside the municipalities. The final goal is to predict the population count in each enumeration area correctly.\r\nThe extent of the study area is defined by the spatial coverage of the municipalities for which we have population totals. The top-down method cannot estimate populations for enumeration areas within municipalities where population totals are unknown.\r\n\r\n\r\n\r\nFigure 2: Modelling Process\r\n\r\n\r\n\r\nRandom forest is a machine learning algorithm that builds an ensemble of individual regression trees to predict values of a response variable (e.g. population density) based on its relationships with geospatial covariates (Breiman 2001; Stevens et al. 2015). Each regression tree identifies threshold values of the covariates that can be used to split the training data into fairly homogeneous groups (i.e. with similar population densities).\r\nThe algorithm prevents overfitting by withholding a subset of the training data for each individual tree that can be used to calculate rates of “out-of-bag” prediction error (i.e. out-of-sample cross-validation). The algorithm also prevents overfitting by randomly selecting a small set of covariates to be considered for splitting the training data at each node of the regression tree, rather than assessing all covariates at each split. These features make random forest fairly robust to multi-collinearity among covariates allowing it to use large sets of covariates without a priori variable selection. However, a large number of covariates might impact running time, especially at the prediction stage, and it may be useful to select a subset of covariates based on the measures of covariate importance provided by the random forest algorithm (Stevens et al. 2015; Bondarenko et al. 2018). While random forest predictions are robust to multi-collinearity among covariates, the measures of covariate importance may not be (Genuer, Poggi, and Tuleau-Malot 2010).\r\nTo dive deeper on the subject of random forest, here are some online materials:\r\nA use-R 2009 conference presentation given by Adele Cutler who developed the random forest algorithm with Leo Breiman.\r\nA 2019 blog post by Tony Yiu with clear explanations of Random Forest main features namely bagging and covariates randomness that supports the creation of uncorrelated forest of decision trees.\r\nA 2001 article from Breiman explaining the underlying maths.\r\nThe implementation we will provide in this tutorial will follow the guidance set up by Bondarenko et al. (2018) to apply random forest for top-down disaggregation.\r\nR Environment\r\nThis model will be implemented in the R programming language (R Core Team 2020). Our first step is to setup the R environment so that it contains the R packages and data that we will need. The randomForest package (Liaw and Wiener 2002) implements the random forest algorithm in R. If you have not already installed it, then you will need to install it.\r\n\r\n\r\ninstall.packages('randomForest')\r\n\r\n\r\n\r\nOnce installed, you must load the randomForest package into your R environment.\r\n\r\n\r\nlibrary(randomForest)\r\n\r\n\r\n\r\nWe will define our working directory to be the location where we have stored the input data for the tutorial (master_train.csv and master_predict.csv described below).\r\n\r\n\r\nsetwd('c:/myfolder')\r\n\r\n\r\n\r\nSource Data\r\n\r\n\r\n\r\nThis tutorial includes two input data sets, provided as csv spreadsheets (comma-separate-values text files):\r\nmaster_train.csv Training data for the model that contains population totals and covariate values for 5568 municipalities in Brazil, and\r\nmaster_predict.csv Prediction data for the model that contains covariate values for 444215 enumeration areas where population estimates are needed.\r\nWe will load the datasets into our R environment using the read.csv function and display their top five rows with the head function:\r\n\r\n\r\n# training data from municipalities\r\nmaster_train <- read.csv(\"master_train.csv\")\r\n# covariates from enumeration areas\r\nmaster_predict <- read.csv(\"master_predict.csv\")\r\n\r\n\r\n\r\n\r\n\r\nhead(master_train[,1:5]) # only showing first five columns\r\n\r\n\r\n       name_muni geo_code     pop       area mean.bra_viirs_100m_2016\r\n1       Brasília  5300108 3055149 5779998938               8.51690292\r\n2  Vila Propício  5222302    5882 2181582535               0.08895954\r\n3       Vila Boa  5222203    6312 1060171349               0.07032987\r\n4 Vicentinópolis  5222054    8873  737256139               0.13859431\r\n5     Vianópolis  5222005   13977  954283662               0.17625734\r\n6         Varjão  5221908    3838  519194233               0.09681950\r\n\r\nhead(master_predict[,1:4]) # only showing first four columns\r\n\r\n\r\n  EA_id geo_code mean.bra_viirs_100m_2016 mean.bra_srtm_slope_100m\r\n1     1  1100015                21.700214                 1.954565\r\n2     2  1100015                12.255162                 2.374444\r\n3     3  1100015                18.794325                 1.983213\r\n4     4  1100015                11.781239                 1.631729\r\n5     5  1100015                 3.152316                 2.861502\r\n6     6  1100015                 7.395526                 1.814885\r\n\r\nNotice that only the municipality-level dataset master_train.csv contains a column for population. The EA-level dataset does not contain a column for population, and it is the goal of this tutorial to estimate those EA-level populations based on the EA-level covariates in master_predict.csv.\r\nAlso, notice that the column names for the covariates are exactly the same in the municipality-level dataset and the EA-level dataset. All of the municipality-level covariates used to train the model must also be available at the EA level for the model predictions.\r\nThe geo_code column contains a numeric identifier for each municipality and will be used in later steps to identify the municipality that each EA belongs to. Boundaries of enumeration areas in Brazil roughly follow municipality boundaries (i.e. enumeration areas are nested within municipalities), but the boundaries are not harmonized exactly. We assigned each enumeration area to the municipality that contained the majority of its area.\r\nNote: We derived the two spreadsheets (master_train.csv and master_predict.csv) from the following sources:\r\nBrazil’s municipality boundaries (IBGE 2019),\r\nBrazil’s 2020 census projections for municipalities (IBGE 2020b),\r\nBrazil’s census EA boundaries (IBGE 2020a),\r\nWorldPop’s mastergrid for Brazil (WorldPop and CIESIN 2018a), and\r\nWorldPop’s geospatial covariate rasters for Brazil (Lloyd et al. 2019; Lloyd, Sorichetta, and Tatem 2017).\r\nSee the section Zonal Statistics for more information about how the input data were created.\r\nRandom Forest\r\nWe will reformat the source data into the correct format for the random forest model before we fit the model and apply it to estimate populations in each enumeration area (EA). We will start by preparing the response and predictor variables from master_train.csv for training the model.\r\nResponse Variable\r\nThe response variable y_data for our random forest model must be a vector with a population value for each municipality. We will define our response variable as the log of population density:\r\n\r\n\r\ny_data <- master_train$pop / master_train$area\r\n\r\ny_data <- log(y_data)\r\n\r\n\r\n\r\nWe use log population density as the response variable rather than population counts for two main reasons. First, population densities are more comparable than counts among spatial units of varying sizes (e.g. municipalities and EAs). Second, the logarithm transformation reshapes the response variable as a Gaussian distribution, better inline with the distributions of covariates (Stevens et al. 2015) (Fig. 3). Note that master_train$area is measured in square meters in this case but any unit of area will work.\r\n\r\n\r\n\r\nFigure 3: Histogram of the log-transformed population density.\r\n\r\n\r\n\r\nWe now have y_data, a vector with the log population density for every municipality in Brazil.\r\nPredictor Variables\r\nThe predictor data x_data for our random forest model must be a data.frame with a row for each municipality and a column for each covariate. The row order must match that of y_data (i.e. row 1 from x_data must represent the same enumeration area as element 1 from y_data).\r\nWe build the predictor data x_data by subsetting the covariates from master_train.csv that we would like to include in our model. Remember, we want to select covariates that will be good predictors of log population density.\r\n\r\n\r\n# list all covariate names (i.e. column names)\r\ncols <- colnames(master_train)\r\nprint(cols)\r\n\r\n\r\n [1] \"name_muni\"                         \r\n [2] \"geo_code\"                          \r\n [3] \"pop\"                               \r\n [4] \"area\"                              \r\n [5] \"mean.bra_viirs_100m_2016\"          \r\n [6] \"mean.bra_srtm_slope_100m\"          \r\n [7] \"mean.bra_osm_dst_road_100m_2016\"   \r\n [8] \"mean.bra_esaccilc_dst200_100m_2015\"\r\n [9] \"mean.bra_esaccilc_dst190_100m_2015\"\r\n[10] \"mean.bra_esaccilc_dst150_100m_2015\"\r\n[11] \"mean.bra_esaccilc_dst140_100m_2015\"\r\n[12] \"mean.bra_esaccilc_dst130_100m_2015\"\r\n[13] \"mean.bra_esaccilc_dst040_100m_2015\"\r\n[14] \"mean.bra_esaccilc_dst011_100m_2015\"\r\n[15] \"code_state\"                        \r\n[16] \"code_muni\"                         \r\n[17] \"abbrev_state\"                      \r\n\r\nOur example data master_train.csv includes a few columns that are not covariates (e.g. geo_code) and so we do not want to include them in x_data. Our covariates all include the word “mean” in their column names because they were calculated as the mean value of underlying covariate rasters within each municipality. So, we will use “mean” as a search term to identify the correct columns. This provides an example of selecting a subset of the predictors, but you could use other subsets, search terms, or methods of subsetting.\r\n\r\n\r\n# select column names that contain the word 'mean'\r\ncov_names <- cols[grepl('mean', cols)] \r\nprint(cov_names)\r\n\r\n\r\n [1] \"mean.bra_viirs_100m_2016\"          \r\n [2] \"mean.bra_srtm_slope_100m\"          \r\n [3] \"mean.bra_osm_dst_road_100m_2016\"   \r\n [4] \"mean.bra_esaccilc_dst200_100m_2015\"\r\n [5] \"mean.bra_esaccilc_dst190_100m_2015\"\r\n [6] \"mean.bra_esaccilc_dst150_100m_2015\"\r\n [7] \"mean.bra_esaccilc_dst140_100m_2015\"\r\n [8] \"mean.bra_esaccilc_dst130_100m_2015\"\r\n [9] \"mean.bra_esaccilc_dst040_100m_2015\"\r\n[10] \"mean.bra_esaccilc_dst011_100m_2015\"\r\n\r\n# subset the data.frame to only these columns\r\nx_data <- master_train[,cov_names]\r\nhead(x_data[,1:2]) # only showing first two columns\r\n\r\n\r\n  mean.bra_viirs_100m_2016 mean.bra_srtm_slope_100m\r\n1               8.51690292                 3.547058\r\n2               0.08895954                 4.198463\r\n3               0.07032987                 3.522752\r\n4               0.13859431                 1.620756\r\n5               0.17625734                 3.577609\r\n6               0.09681950                 5.659529\r\n\r\nWe now have a data.frame x_data with a row for each municipality and a column for each covariate.\r\nModel Fitting\r\nThe model fitting process will identify relationships between the response variable (i.e. population) and predictor variables at the municipality level.\r\nSettings\r\nBefore running the random forest model, we need to identify appropriate values for each argument of the randomForest() and/or tuneRF() functions. See ?randomForest and ?tuneRF for detailed descriptions of all arguments to the functions.\r\nA critical argument in randomForest() function is mtry, the number of randomly selected variables for evaluating the best split at each node in a regression tree within the random forest model. This process is at the root of the randomness in random forest models. To find the optimal mtry value, we use the function tuneRF() that compares different models based on their “out-of-bag” error rates.\r\nNote: Out-of-bag error is a form of cross-validation that is calculated by comparing model predictions to observed data from EAs that were randomly selected to be witheld from model fitting (i.e. held “out-of-bag”) for an iteration of the model (i.e. a single regression tree in the random forest model).\r\nDuring each iteration of a random forest model, a regression tree is fit to a random sub-sample of the data. This prevents overfitting and also provides a built-in mechanism for cross-validation. The sampsize argument sets the sample size, and the replace argument defines the sampling strategy. In our case, we will define sampsize as the total count of observations (i.e. 5568 municipalities) and replace will be TRUE to sample with replacement from the training data.\r\nOur specifications for other parameters follow Bondarenko et al. (2018).\r\nntree: Number of trees to grow. There is no issue of overfitting when adding additional trees. We opt for 500, the default value of the randomForest() function.\r\nimportance: If TRUE, the model will calculate the covariate importance for further analysis. We opt for TRUE.\r\nnodesize: Minimum size of the terminal node of the trees controls the tree complexity. We make it about 0.1% of the training data sample size (i.e. 5).\r\nRun the Model\r\nOnce we have decided on appropriate settings, we will input them as arguments to the tuneRF() function (note: this may take several minutes to run).\r\n\r\n\r\n# model fitting\r\npopfit <- tuneRF(\r\n  x=x_data, \r\n  y=y_data, \r\n  plot=TRUE, \r\n  mtryStart=length(x_data)/3, \r\n  ntreeTry=500, \r\n  improve=0.0001, # threshold on the OOB error to continue the search\r\n  stepFactor=1.20, # incremental improvement of mtry\r\n  trace=TRUE, \r\n  doBest=TRUE, # last model trained with the best mtry\r\n  nodesize=length(y_data)/1000, \r\n  na.action=na.omit, \r\n  importance=TRUE, # calculate variable importance\r\n  sampsize=length(y_data), # size of the sample to draw for OOB\r\n  replace=TRUE\r\n                 ) # sample with replacement\r\n\r\n\r\n\r\n\r\n\r\n\r\nThe popfit object contains the fitted random forest model. We can see the items within the object:\r\n\r\n\r\nnames(popfit)\r\n\r\n\r\n [1] \"call\"            \"type\"            \"predicted\"      \r\n [4] \"mse\"             \"rsq\"             \"oob.times\"      \r\n [7] \"importance\"      \"importanceSD\"    \"localImportance\"\r\n[10] \"proximity\"       \"ntree\"           \"mtry\"           \r\n[13] \"forest\"          \"coefs\"           \"y\"              \r\n[16] \"test\"            \"inbag\"          \r\n\r\nWe can retrieve individual values, such as the value of the mtry setting that was selected by the tuneRF function.\r\n\r\n\r\npopfit$mtry\r\n\r\n\r\n[1] 4\r\n\r\nSee the “Value” section in the help for the randomForest function ?randomForest::randomForest for an explanation of each value.\r\nWe will now save the popfit object to our hard drive.\r\n\r\n\r\nsave(popfit, file='popfit.Rdata')\r\n\r\n\r\n\r\nWe can load the fitted model back into our R environment later using:\r\n\r\n\r\nload('popfit.Rdata')\r\n\r\n\r\n\r\nWeighting Layer\r\nWe will use the fitted model to create a weighting layer that will be used to redistribute the population totals for municipalities into the enumeration areas (EA) within them. The EA-level covariate data master_predict.csv contains 444215 rows, one for each EA in Brazil.\r\nWe will first use the fitted random forest model to generate raw model predictions for each EA and save them as a column in the master_predict data.frame:\r\n\r\n\r\n# random forest predictions\r\nmaster_predict$predicted <- predict(\r\n  popfit, \r\n  newdata = master_predict\r\n  )\r\n\r\n\r\n\r\nThe weights are then calculated from the model predictions using the following formula:\r\n\\[\\begin{equation} \r\nweight_{i} = \\frac{exp(predicted_{i})}{\\sum_{i=1}^{I_j}{exp(predicted_{i})}}\r\n\\tag{1} \r\n\\end{equation}\\]\r\nwhere \\(predicted_i\\) is the model prediction for enumeration area \\(i\\), and \\(I_j\\) is the total number of enumeration areas in municipality \\(j\\). These weights represent the proportion of the population from municipality \\(j\\) that lives in enumeration area \\(i\\).\r\nRedistribution to EA-level\r\nWe will now use the weights to estimate the population for each enumeration area \\(i\\) using the following formula:\r\n\\[\\begin{equation} \r\npopulation_{i} = total_j \\times weight_{i}\r\n\\tag{2} \r\n\\end{equation}\\]\r\nwhere \\(total_j\\) is the population total for municipality \\(j\\) and \\(weight_i\\) is the proportion of the population that lives in enumeration area \\(i\\) (Eq. (1)). We will now work through this formula step-by-step in R.\r\nFirst, we will exponentiate the predictions (numerator from Eq. (1)) and save them as a column in master_predict:\r\n\r\n\r\n# back-transform predictions to natural scale\r\nmaster_predict$predicted_exp <- exp(\r\n  master_predict$predicted\r\n  )\r\n\r\n\r\n\r\nWe need to exponentiate the predictions because we log-transformed the population densities that we used as the response variable for training the model. Therefore, the model predictions are population densities on the log-scale. We exponentiate them to derive the predicted population densities that we will use as weighting factors to disaggregate the municipality-level population totals.\r\nNext, we will sum the predicted population densities among EAs in each municipality (denominator from Eq. (1)) and merge the results into master_predict using the geo_code column to match municipalities:\r\n\r\n\r\n# sum exponentiated predictions among EAs in each municipality\r\npredicted_exp_sum <- aggregate(list(predicted_exp_sum=master_predict$predicted_exp), \r\n                               by = list(geo_code=master_predict$geo_code), \r\n                               FUN = sum)\r\n\r\n# merge predicted_exp_sum into master_train based on geo_code\r\nmaster_predict <- merge(master_predict, \r\n                        predicted_exp_sum, \r\n                        by='geo_code')\r\n\r\n\r\n\r\nThese sums (i.e. the denominator from Eq. (1)) are used to scale the exponentiated model predictions to sum to one among EAs in each municipality.\r\nThen, we will merge the total populations for each municipality into master_predict, again using the geo_code column to match EAs to the correct municipalities:\r\n\r\n\r\n# merge municipality total populations from master_train into master_predict\r\nmaster_predict <- merge(master_predict,\r\n                        master_train[,c('geo_code','pop')],\r\n                        by = 'geo_code')\r\n\r\n# modify column name\r\nnames(master_predict)[ncol(master_predict)] <- 'pop_municipality'\r\n\r\n\r\n\r\nWe have now added all of the required information from Eqs. (2) and (1) into the master_predict data.frame. We will calculate the EA-level population estimates and add them to master_predict as a column:\r\n\r\n\r\n# calculate EA-level population estimates\r\nmaster_predict$predicted_pop <- with(master_predict, predicted_exp / predicted_exp_sum * pop_municipality)\r\n\r\n\r\n\r\nNotice that this line of code is equivalent to Eqs. (2) and (1).\r\nWe have now disaggregated the population totals from 5568 municipalities in Brazil into population estimates for 444215 enumeration areas (Fig. 4).\r\n\r\n\r\n\r\nFigure 4: Census-based population totals for municipalities (left) that have been disaggregated into population estimates for enumeration areas (right) east of Sao Paulo, Brazil. Darker red corresponds to more people.\r\n\r\n\r\n\r\nDiagnostics\r\nSumming Enumeration Areas\r\nWe first want to check that the EA-level population estimates sum to the municipality-level population totals. To do this, we will aggregate the EA-level predictions using the geo_code column to identify the municipalities that each EA belongs to:\r\n\r\n\r\n# sum EA population estimates within each municipality\r\ntest <- aggregate(master_predict$predicted_pop, \r\n                  by = list(geo_code=master_predict$geo_code), \r\n                  FUN = sum)\r\n\r\n# modify column names\r\nnames(test) <- c('geo_code','predicted_pop')\r\n\r\n# merge municipality population totals\r\ntest <- merge(test,\r\n              master_train[,c('geo_code','pop')],\r\n              by = 'geo_code')\r\n\r\n# test if estimates match muncipality population totals\r\nall(test$pop == round(test$predicted_pop))\r\n\r\n\r\n[1] TRUE\r\n\r\nIf we fail this test (i.e. if the last line of code returns a value of FALSE), it could mean that there was an error in our implementation of Eq. (2) or Eq. (1) because those equations should re-scale the EA-level population estimates so that they always sum to the population totals for each municipality. This test does not assess the goodness-of-fit for the random forest model.\r\nGoodness-of-Fit\r\nThe print function from the randomForest package displays two metrics that describe the out-of-bag prediction residuals:\r\nthe mean squared residuals (MSE)\r\nthe % of variance explained which corresponds to a pseudo \\(R^2\\), (1 - MSE/ Var(y_data)).\r\nThe first metric (MSE) is dependent on the scale of the input response variable (e.g. the unit of area used to calculate population density), whereas the second metric (\\(R^2\\)) can be compared across models with different response variables.\r\n\r\n\r\n# goodness-of-fit metrics\r\nprint(popfit) \r\n\r\n\r\n\r\nCall:\r\n randomForest(x = x, y = y, mtry = res[which.min(res[, 2]), 1],      replace = TRUE, sampsize = ..4, nodesize = ..1, importance = TRUE,      na.action = ..2) \r\n               Type of random forest: regression\r\n                     Number of trees: 500\r\nNo. of variables tried at each split: 4\r\n\r\n          Mean of squared residuals: 0.2089229\r\n                    % Var explained: 89.97\r\n\r\nWe can visualize the out-of-bag predictions for municipalities.\r\nFirst we plot the observed vs predicted values. This enables us to spot any municipalities where the random forest predictions are not accurate.\r\n\r\n\r\n# plot observed vs predicted (out-of-bag)\r\nplot(x = y_data,\r\n     y = predict(popfit), \r\n     main = 'Observed vs Predicted log-Densities')\r\n\r\n# 1:1 line\r\nabline(a=0, b=1, col='red')\r\n\r\n\r\n\r\n\r\nNote: The predict function in this code will return “out-of-bag” predictions (i.e. weights) for every municipality because we did not give it a new prediction data set, like we did in the section Weighting Layer (see?predict.randomForest for more info). The “out-of-bag” prediction for a municipality is generated from the regression trees of the model that did not include that municipality in their randomly sampled training data. This provides a cross-validation (a.k.a. out-of-bag, or out-of-sample) assessment.\r\nPlotting the residuals versus the predictions allows us to detect any pattern towards over or underestimation.\r\n\r\n\r\n# plot residuals (out-of-bag)\r\nplot(x = predict(popfit), \r\n     y = y_data - predict(popfit), \r\n     main = 'Residuals vs Predicted',\r\n     ylab = 'Out-of-bag residuals',\r\n     xlab = 'Out-of-bag prediction')\r\n\r\n# horizontal line at zero\r\nabline(h=0, col='red')\r\n\r\n\r\n\r\n\r\nImportant Note: The different goodness-of-fit diagnostics presented here are focused on the training dataset and thus on predicting at the municipality level, but remember that the final goal is to predict at the enumeration area level.\r\nEA-level Assessment\r\nThere are two ways to evaluate the disaggregation results at the EA-level:\r\nComparing to an independent sample of enumeration areas or any other fine-scale spatial units for which we know the population counts, or\r\nBuild a test model using aggregated population counts at a coarser resolution (e.g. state-level) and evaluating its predictions at the municipality level.\r\nThe first option relies on the availability of an additional dataset. Disaggregating population estimates into 100 m grids rather than enumeration area polygons (as in this tutorial) would provide greater flexibility for aggregating units to match the spatial units of the independent validation data.\r\nThe second option is discussed by Stevens et al. (2015). Its effectiveness depends on the size of the aggregated training dataset (e.g. the number of states). Indeed a coarser scale means a decreasing number of input observations, which undermines the quantity of information the random forest can extract.\r\nCovariate Importance\r\nWe can look at the influence of individual covariates on model predictions. There are two measures of variable importance available. “Type 1” covariate importance is computed as the difference between out-of-bag mean squared error (MSE) from the full model compared to a model in which the variable is randomly permuted for each tree. If MSE is not affected by random permutations of the variable, then it has low importance according to this metric.\r\n\r\n\r\n# for covariate importance\r\nvarImpPlot(popfit, type=1) \r\n\r\n\r\n\r\n\r\n“Type 2” covariate importance is computed as the total decrease in node purity when the variable is used for a split in the regression trees. Node purity is defined as the residual sum of squares among samples that are classified into the same terminal node of a regression tree. If splits in the tree based on this covariate do not decrease the residual sum of squares, then it has low importance according to this metric.\r\n\r\n\r\n# for covariate importance\r\nvarImpPlot(popfit, type=2) \r\n\r\n\r\n\r\n\r\nSee ?randomForest::importance for more details.\r\nNote: Use caution when interpreting covariate importance. A high importance value indicates that the covariate improves predictive performance, but does not indicate a causal relationship with spatial patterns of population density. Covariate importance scores may also be underestimated for large groups of correlated predictor variables.\r\nLimitations\r\nRandom Forest can be time-intensive for large datasets.\r\nIf running time becomes an issue, there are several solutions that are outlined in the random forest set-up of Bondarenko et al. (2018).\r\nIf the model takes too long to be fitted, one can play with the parameter sampsize, which has a great impact on modelling time or ntreeSize. Be careful though as a small number of trees can lead to overfitting. This issue can be clearly visible in any out-of-bag goodness-of-fit metrics.\r\nIf the prediction takes too much time, Stevens et al. (2015) proposes to prune the number of covariates based on their importance metric. We have also provided an example of how to generate predictions more efficiently using parallel processing (see Parallel Processing section below).\r\nRandom Forest models are not good at extrapolating.\r\nThey can only predict values that are in the range of observed values. This issue becomes a problem when the training and prediction inputs differ in range and distribution, which is known as covariate shift. The following plot can help detect a mismatch in covariates distribution between the two scales.\r\n\r\n\r\n# two panel layout\r\nlayout(matrix(1:2, nrow=1))\r\n\r\n# loop through two covariates\r\nfor(cov_name in c('mean.bra_srtm_slope_100m', 'mean.bra_viirs_100m_2016')){\r\n\r\n  # combine EA-level and municipality-level values into a single vector\r\n  y <- c(master_predict[,cov_name], master_train[,cov_name])\r\n\r\n  # create corresponding vector identifying spatial scale\r\n  x <- c(rep('EA', nrow(master_predict)),\r\n     rep('Municipality', nrow(master_train)))\r\n\r\n  # create boxplot\r\n  boxplot(y~x, xlab=NA, ylab=cov_name)\r\n}\r\n\r\n\r\n\r\n\r\nFigure 5: The distributions of two covariates at each spatial scale: municipalities and enumeration areas. The left panel shows similar distributions across scales, but the right panel shows a covariate with significantly different distributions when measured for municipalities compared to enumeration areas.\r\n\r\n\r\n\r\nNotice that the covariate mean.bra_viirs_100m_2016 has a different range of values for EAs compared to municipalities (Fig. 5). This covariate measures the intensity of nighttime lights and we would expect its average values to be less in larger municipalities with large unsettled sections compared to small EAs, many of which are densely populated. This covariate was also the most influential on model predictions (see Covariate Importance). We may want to consider re-calculating this covariate using a mask to exclude unsettled areas within municipalities and EAs in an attempt to have a more comparable measure between spatial scales.\r\nRandom Forest models are not ideal for inferring covariate effects.\r\nThe purpose of the modelling is to have a great predictive performance. We are not aiming at explaining the drivers of human spatial distribution. Therefore no causal effect should be derived from the modelling results.\r\nTips and Tricks\r\nThe previous sections demonstrated the basic components of random forest top-down disaggregation, but there are additional tips and tricks that may be useful.\r\nThis section utilizes several source files that we did not include with the tutorial because they are large files that are publicly available from their original sources. These source files are:\r\nEnumeration area boundaries for Brazil (IBGE 2020a),\r\nVIIRS nighttime lights from 2016 (WorldPop and CIESIN 2018b), and\r\nWorldPop mastergrid for Brazil (WorldPop and CIESIN 2018a).\r\nNote: The code below will assume that these source files have been downloaded and unzipped (if applicable) into your working directory.\r\nMap Results\r\nIf you want to view the EA-level population estimates on a map (e.g. Fig. 4), you will need to join the model results (from section Redistribution to EA-level above) to polygon features for use with GIS software (e.g. Esri polygon shapefile).\r\nFor this step, we will need to install and load the sf package (Pebesma 2018) to read and manipulate GIS vector data (census EAs, in this case).\r\n\r\n\r\ninstall.packages('sf')\r\nlibrary('sf')\r\n\r\n\r\n\r\nThen, we need to load a vector GIS data set containing the polygons that we would like to join our model results to. For this example, we are using Brazilian census enumeration area polygons which are openly available online as a polygon shapefile (IBGE 2020a).\r\n\r\n\r\nsf_polygons <- st_read('BR_Setores_2019.shp')\r\n\r\n\r\n\r\nNote: The st_read function can read most GIS file formats (e.g. Esri shapefile, geopackage, geojson). See ?sf::st_read for more information.\r\nWe will add an ID column that matches the enumeration area IDs from the EA_id column of the master_predict data.frame object (continuing from previous sections of this tutorial).\r\n\r\n\r\nsf_polygons$EA_id <- 1:nrow(sf_polygons)\r\n\r\n\r\n\r\nThen, we can merge the master_predict data.frame which contains our EA-level population estimates into sf_polygons. We will use the EA_id column to match values to the correct enumeration area polygons.\r\n\r\n\r\nsf_polygons <- merge(sf_polygons, \r\n                     master_predict,\r\n                     by='EA_id')\r\n\r\n\r\n\r\nFinally, we save the results to disk as an Esri shapefile.\r\n\r\n\r\nst_write(sf_polygons,\r\n         'master_predict_polygons.shp')\r\n\r\n\r\n\r\nThis will save the result as an Esri shapefile because it uses the .shp file extension. If we want to save to a different format, we can simply modify the file extension. For example, we can save the result as a GeoPackage by adding the.gpkg file extension.\r\n\r\n\r\nst_write(sf_polygons,\r\n         'master_predict_polygons.gpkg')\r\n\r\n\r\n\r\nZonal Statistics\r\nThis tutorial began with two pre-processed spreadsheets master_train.csv and master_predict.csv. These input data were derived from raster-based covariates using zonal statistics to summarize raster values within each municipality and enumeration area using mean values or other summary statistics (e.g. median, mode, standard deviation, min, max). We will give a brief demonstration of how to do this.\r\nWe will rely on the raster and exactextractr packages (Hijmans 2020; Daniel Baston 2020) for this step and so we will first install and load those packages:\r\n\r\n\r\ninstall.packages(c('raster','exactextractr'))\r\nlibrary('raster')\r\nlibrary('exactextractr')\r\n\r\n\r\n\r\nWe already have polygon features sf_polygons loaded from the previous section (Map Results). We will also need to load a covariate raster. We will use a nighttime lights raster for Brazil that is openly available (WorldPop and CIESIN 2018b).\r\n\r\n\r\nraster_covariate <- raster('bra_viirs_100m_2016.tif')\r\n\r\n\r\n\r\nNext, we will calculate a zonal mean within each enumeration area using the object sf_polygons (from section Map Results).\r\n\r\n\r\nsf_polygons$mean.bra_viirs_100m_2016 <- exact_extract(x = raster_covariate,\r\n                                                      y = sf_polygons,\r\n                                                      fun = 'mean')\r\n\r\n\r\n\r\nHere, we saved the results into a new column of the sf_polygons data.frame called mean.bra_viirs_100m_2016.\r\nNote: You may receive a warning message: Polygons transformed to raster CRS (EPSG:NA). This indicates that the projection for sf_polygons was different than raster_covariate, and that a reprojection was performed internally by exact_extract. This does not affect our results, but we could have avoided the warning message by first reprojecting the covariate raster to match the polygons (see ?raster::projectRaster) or by reprojecting the polygons to match the covariate raster (see ?sf::st_transform).\r\nAfter we have calculated all of the zonal statistics that we need, we can save the sf_polygons data.frame to disk as a csv spreadsheet.\r\n\r\n\r\nwrite.csv(st_drop_geometry(sf_polygons), \r\n          file = 'EA_covariates.csv',\r\n          row.names = FALSE)\r\n\r\n\r\n\r\nThis would be comparable to master_predict.csv that we used as input data for this tutorial. Note that the st_drop_geometry() function removes the polygon geometries from the sf object so that it is a simple data.frame with no spatial geometries (i.e. polygons) associated with each row. We could also save the results as an Esri shapefile to maintain the feature geometries.\r\n\r\n\r\nst_write(sf_polygons, 'EA_covariates.shp')\r\n\r\n\r\n\r\nNote: The exactextractr README also demonstrates a simple workflow to calculate zonal statistics for Brazilian municipalities.\r\nGridded Population Estimates\r\nIn this tutorial, we disaggregated municipality-level population totals into finer resolution EA-level population estimates. We can also disaggregate population totals into grid cells (e.g. 100 m, 1 km). It is often easier to work with gridded population estimates because they can be aggregated to any areal units (e.g. census enumeration areas, administrative units, health facility catchment areas) and they may also be easier to compare to gridded data from other sources.\r\nTo do this, we need to create a new version of master_predict.csv where each row represents a grid cell rather than an enumeration area. We will start by loading a raster to use as a mastergrid that defines the locations and sizes of grid cells that we want to use.\r\n\r\n\r\nmastergrid <- raster('bra_level0_100m_2000_2020.tif')\r\n\r\n\r\n\r\nThis mastergrid raster for Brazil is publicly available from WorldPop (2018a). In this mastergrid, any cells that contain a value of NA are outside of Brazil.\r\nCell IDs for a raster are a numerical sequence starting from 1 in the top-left corner of the raster and increasing left-to-right. There are more than 2.5 billion grid cells in Brazil’s mastergrid and more than one billion contain non-NA values. We want to identify the cell IDs for all cells with a non-NA value. Because Brazil contains so many grid cells, we will subset the mastergrid for processing.\r\n\r\n\r\ncells <- which(!is.na(mastergrid[1:1e7]))\r\n\r\n\r\n\r\nThe new vector object cells will contain the cell IDs from the mastergrid that contain non-NA values. We are only processing the first 10 million grid cells (i.e. cells 1 to 1e7) in the mastergrid. We will continue the example using only this subset of the data to demonstrate how to generate gridded population estimates. In practice, we may want to process all of the grid cells at once (if computing power allows) or loop through one subset of cell IDs at a time (e.g. using a for loop) until all cell IDs are processed.\r\nWe will now setup a data.frame with a column for the cell IDs.\r\n\r\n\r\nmastergrid_predict <- data.frame(row.names = cells)\r\n\r\n\r\n\r\nNext, we will use the same covariate raster raster_covariate from the previous section (Zonal Statistics) (WorldPop and CIESIN 2018b). This raster has the exact same extent and cell size as the mastergrid. Because the two rasters have identical extent and cell size, their cell IDs are comparable allowing us to use our vector of cell IDs cells to extract values very quickly and save them as a new column in the data.frame master_predict.\r\n\r\n\r\nmastergrid_predict[cells, 'bra_viirs_100m_2016'] <- raster_covariate[cells]\r\n\r\n\r\n\r\nIf the extent and cell size of a covariate raster do not match, then we can extract values from the covariate raster using the point coordinates associated with each grid cell rather than using cell IDs, but this is a slower process.\r\n\r\n\r\n# XY coordinates of each grid cell\r\nxy <- xyFromCell(mastergrid, cells)\r\n\r\n# extract raster values at those coordinates  \r\nmastergrid_predict[cells, 'bra_viirs_100m_2016_alt'] <- extract(raster_covariate, xy)\r\n\r\n\r\n\r\nNote: Another option would be to resample the covariate raster to match the mastergrid, but exploring the different options for resampling is beyond the scope of this tutorial (see ?raster::resample for more information).\r\nWe can then save the results as a csv spreadsheet.\r\n\r\n\r\nwrite.csv(mastergrid_predict,\r\n          file = 'mastergrid_predict.csv',\r\n          row.names = FALSE)\r\n\r\n\r\n\r\nThis spreadsheet could be used in exactly the same way as master_predict.csv was used above to generate model predictions (see section Weighting Layer). Because there are so many grid cells in Brazil where predictions are needed we would likely want to use parallel processing to speed up the calculations (see Parallel Processing section below). With either approach, we would generate a new column called predicted_pop in the master_predict data.frame that would contain the population estimates for each grid cell.\r\nAfter we have these model predictions in tabular form in master_predict, we would then want to rasterize those results. First, we create an empty raster.\r\n\r\n\r\nraster_predict <- raster(mastergrid)\r\n\r\n\r\n\r\nThen, we insert the population estimates into the raster based on the cell IDs of the predicted values.\r\n\r\n\r\nraster_predict[cells] <- mastergrid_predict[cells, 'predicted_pop']\r\n\r\n\r\n\r\nIf we are processing the cells in different subsets (i.e. using a for loop), we can repeat this step on the same raster using different sets of cell IDs until the raster is fully populated.\r\nFinally, we can save the rasterized results to disk as a geotiff raster.\r\n\r\n\r\nwriteRaster(raster_predict, \r\n            file = 'raster_predict.tif')\r\n\r\n\r\n\r\nParallel Processing\r\nParallel processing can improve processing speed when the study area contains a large number of spatial units where predictions are required (i.e. grid cells or polygons). For parallel processing, we will split the data into chunks that will be processed simultaneously using all of the processing cores available in our computer. The process that we described above to generate model predictions (see section Weighting Layer) used only a single processing core even if your computer had four or more cores available.\r\nIn the example from the previous section (Gridded Population Estimates), we saw that Brazil contained more than one billion grid cells where we would need model predictions. This would likely require parallel processing to generate model predictions efficiently. For a simple and efficient example, we will demonstrate parallel processing using the EA-level data in master_predict that will allow you to explore the process easily. When you are comfortable with the process, it can also be applied to the much larger data set in mastergrid_predict.\r\nFor this task we will need the doParallel R package (Corporation and Weston 2020) so we will start by installing and loading that package.\r\n\r\n\r\ninstall.packages('doParallel')\r\nlibrary('doParallel')\r\n\r\n\r\n\r\nWe will need to create a new R function that will generate model predictions. In the parallel processing steps that will follow, this function will be passed to a processing core along with a chunk of the data to generate predictions.\r\n\r\n\r\npredict_pop <- function(df, model=popfit){\r\n  \r\n  # EA-level predictions\r\n  prediction <- predict(model, newdata = df)\r\n  \r\n  # back-transform to population density\r\n  density <- exp(prediction)\r\n  \r\n  # calculate weights\r\n  weights <- density / sum(density) \r\n  \r\n  # disaggregate municipality total to EA-level\r\n  pop <- weights * df$pop_municipality[1]\r\n  \r\n  # result to data.frame\r\n  result <- data.frame(id=df$id, predicted_pop_parallel=pop)\r\n  \r\n  # return result\r\n  return(result)\r\n}\r\n\r\n\r\n\r\nThe df argument of the function will be a subset of rows from master_predict and the model argument is the fitted random forest object popfit. This function generates model predictions using the predict function from the randomForest package and then it back-transforms the predicted log-densities to the natural scale. It then calculates weights from those densities and multiplies the weights by the total population for the municipality that each grid cell belongs to (note: these are the same steps as in section Redistribution to EA-level). The results are returned as a data.frame with an “id” column and a column containing the predictions.\r\nNow, we will add an “id” column into master_predict that we will later use to merge the predictions back into this data.frame.\r\n\r\n\r\nmaster_predict$id <- 1:nrow(master_predict)\r\n\r\n\r\n\r\nNext, we will break the master_predict data.frame into chunks that will be stored as elements in a list object.\r\n\r\n\r\nlist_master_predict <- split(x = master_predict,\r\n                             f = master_predict$geo_code)\r\n\r\n\r\n\r\nNotice that we have used the geo_code column in master_predict to define the chunks. Remember, that geo_code identifies each municipality, so we will be processing each municipality separately. This simplifies the steps that are required in the predict function (above) because all units processed in a chunk use the same municipality-level total population (i.e. df$pop_municipality[1]). The new object list_master_predict is a list with an element for each municipality that contains a data.frame with a row for each spatial unit within that municipality.\r\nNow, we must setup parallel processing by identifying the number of cores available, assigning them to a processing cluster, and activating the cluster.\r\n\r\n\r\ncores <- detectCores()\r\n  \r\ncluster <- makeCluster(cores)\r\n  \r\nregisterDoParallel(cluster)\r\n\r\n\r\n\r\nThen, we can run the predictions in parallel using this cluster.\r\n\r\n\r\npredicted <- foreach(i = 1:length(list_master_predict), \r\n                     .combine = 'rbind',\r\n                     .packages = c(\"randomForest\")) %dopar% \r\n  predict_pop(df = list_master_predict[[i]])\r\n\r\nstopCluster(cluster)\r\n\r\n\r\n\r\nThis code will pass each element i from list_master_predict to our predict function predict_pop() and then combine the resulting data.frames using the rbind() function. The last line of code simply deactivates our cluster of processing cores.\r\nThe last step is to merge the results back into our original data.frame master_predict using the id column that we setup earlier.\r\n\r\n\r\nmaster_predict <- merge(master_predict,\r\n                        predicted,\r\n                        by = 'id')\r\n\r\n\r\n\r\nNote: We have demonstrated parallel processing using the EA-level data in master_predict. It is important to note that EA-level predictions do not take too long to compute using the simpler approach (see section Weighting Layer). We recommend parallel processing only for larger tasks like generating gridded predictions from mastergrid_predict. We did not use this data in our example because it would potentially introduce complications that would distract from the demonstration of parallel processing, but the workflow that we demonstrated should be easily adaptable to accommodate any larger data sets.\r\nContributions\r\nThis tutorial was written by Doug Leasure and Edith Darin from the WorldPop Research Group at the University of Southampton with oversight from Andy Tatem. This work was part of a WorldPop collaboration with the Brazilian Institute of Geography and Statistics (IBGE), United Nations Population Fund (UNFPA), and the Environmental Systems Research Institute (Esri). Attila Lazar and Chris Jochem provided internal reviews that helped improve the tutorial.\r\n\r\nTutorial’s citation\r\nLeasure DR, Darin E, Tatem AJ. 2020. Small area population estimates using random forest top-down disaggregation: An R tutorial. WorldPop, University of Southampton. doi:10.5258/SOTON/WP00697.\r\n\r\n\r\n\r\nBondarenko, Maksym, Jeremiah Nieves, Alessandro Sorichetta, Forrest R Stevens, Andrea E Gaughan, Andrew Tatem, and others. 2018. wpgpRFPMS: WorldPop Random Forests population modelling R scripts, version 0.1.0. WorldPop, University of Southampton. https://doi.org/10.5258/SOTON/WP00665.\r\n\r\n\r\nBreiman, Leo. 2001. “Random Forests.” Machine Learning 45 (1): 5–32. https://doi.org/10.1023/A:1010933404324.\r\n\r\n\r\nCorporation, Microsoft, and Steve Weston. 2020. doParallel: Foreach Parallel Adaptor for the ’Parallel’ Package. https://CRAN.R-project.org/package=doParallel.\r\n\r\n\r\nDaniel Baston. 2020. exactextractr: Fast Extraction from Raster Datasets Using Polygons. https://CRAN.R-project.org/package=exactextractr.\r\n\r\n\r\nGenuer, Robin, Jean-Michel Poggi, and Christine Tuleau-Malot. 2010. “Variable Selection Using Random Forests.” Pattern Recognition Letters 31 (14): 2225–36. https://doi.org/10.1016/j.patrec.2010.03.014.\r\n\r\n\r\nHijmans, Robert J. 2020. raster: Geographic Data Analysis and Modeling. https://CRAN.R-project.org/package=raster.\r\n\r\n\r\nIBGE. 2019. Brazilian Territorial Division, 2019 Edition. Brazilian Institute of Geography and Environment (IBGE). https://www.ibge.gov.br/en/geosciences/territorial-organization/regional-division/23708-brazilian-territorial-division.html?=&t=o-que-e.\r\n\r\n\r\n———. 2020a. Meshes of Census Sectors Intra-Municipal Divisions. Brazilian Institute of Geography and Environment (IBGE). http://geoftp.ibge.gov.br/organizacao_do_territorio/malhas_territoriais/malhas_de_setores_censitarios__divisoes_intramunicipais/2019/Malha_de_setores_(shp)_Brasil/.\r\n\r\n\r\n———. 2020b. Population Estimates - Tables 2020. Brazilian Institute of Geography and Environment (IBGE). https://www.ibge.gov.br/en/statistics/social/18448-population-estimates.html?=&t=resultados.\r\n\r\n\r\nLiaw, Andy, and Matthew Wiener. 2002. “Classification and Regression by randomForest.” R News 2 (3): 18–22. https://cran.r-project.org/package=randomForest.\r\n\r\n\r\nLloyd, Christopher T, Heather Chamberlain, David Kerr, Greg Yetman, Linda Pistolesi, Forrest R Stevens, Andrea E Gaughan, et al. 2019. “Global Spatio-Temporally Harmonised Datasets for Producing High-Resolution Gridded Population Distribution Datasets.” Big Earth Data 3 (2): 108–39.\r\n\r\n\r\nLloyd, Christopher T, Alessandro Sorichetta, and Andrew J Tatem. 2017. “High Resolution Global Gridded Data for Use in Population Studies.” Scientific Data 4 (1): 1–17.\r\n\r\n\r\nPebesma, Edzer. 2018. “Simple Features for R: Standardized Support for Spatial Vector Data.” The R Journal 10 (1): 439–46. https://doi.org/10.32614/RJ-2018-009.\r\n\r\n\r\nR Core Team. 2020. R: A Language and Environment for Statistical Computing. Vienna, Austria: R Foundation for Statistical Computing. https://www.R-project.org/.\r\n\r\n\r\nSorichetta, Alessandro, Graeme M. Hornby, Forrest R. Stevens, Andrea E. Gaughan, Catherine Linard, and Andrew J. Tatem. 2015. “High-resolution gridded population datasets for Latin America and the Caribbean in 2010, 2015, and 2020.” Scientific Data 2 (1): 1–12. https://doi.org/10.1038/sdata.2015.45.\r\n\r\n\r\nStevens, Forrest R., Andrea E. Gaughan, Catherine Linard, and Andrew J. Tatem. 2015. “Disaggregating Census Data for Population Mapping Using Random Forests with Remotely-Sensed and Ancillary Data.” PLOS ONE 10 (2): e0107042. https://doi.org/10.1371/journal.pone.0107042.\r\n\r\n\r\nWorldPop, and CIESIN. 2018a. Administrative Areas: National Boundaries, Brazil. WorldPop, University of Southampton. https://doi.org/10.5258/SOTON/WP00651.\r\n\r\n\r\n———. 2018b. Geospatial covariate data layers: VIIRS night-time lights (2012-216), Brazil. WorldPop, University of Southampton. https://doi.org/10.5258/SOTON/WP00644.\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-07-02-top-down-r-tutorial/./dat/schema.jpg",
    "last_modified": "2021-08-11T11:57:08+01:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-07-09-modelling-burkina-faso-population/",
    "title": "Hybrid census in Burkina Faso: Bottom-up population modelling",
    "description": "I developped a Bayesian bottom-up population modelling to adress the challenge of the incomplete 2020 census in Burkina Faso. The model was combining GPS household location with remote sensing product in a Bayesian hierarchcical framework. The output is a hybrid gridded population that was endorsed by Burkina Faso Statistics Office.",
    "author": [
      {
        "name": "Edith Darin",
        "url": {}
      }
    ],
    "date": "2020-09-20",
    "categories": [],
    "contents": "\r\n\r\nContents\r\nIntroduction\r\nEstimating Missed Communes\r\nModel Method\r\nModel Implementation\r\nInput data\r\n\r\nModel results\r\nImplementing the model\r\nAssessing the model goodness-of-fit\r\n\r\n\r\nEstimating Gridded Population for the Entire Country\r\nModel Method\r\nModel Implementation\r\nInput data\r\n\r\nModel Results\r\nImplementing the model\r\nAssessing the model goodness-of-fit\r\n\r\n\r\nDiscussion\r\nContributions\r\nLicense\r\nSuggested Citation\r\nReferences\r\n\r\n\r\n\r\n\r\nIntroduction\r\nIn February 2020, the Institut National de la Statistique et de la Démographie du Burkina Faso (INSD) completed a census exercise aiming at enumerating the entire country population. Due to security issues in the North and the East regions, some communes (Burkinabe administrative unit level 3) could be only partially covered by governmental surveyors (38 out of 351 communes). The INSD requested support from the GRID3 (Geo-Referenced Infrastructure and Demographic Data for Development) project to estimate the unsurveyed population.\r\nIn December 2020, the INSD released its provisional census population counts for every communes which consisted in estimates for the unsurveyed areas, and census count corrected via a post-enumeration survey for the surveyed areas (Institut National de la Statistique et de la Démographie 2020). Parallel to that traditional publication, the INSD released also a high-resolution gridded population estimates, and its breakdown by age and sex group (WorldPop and Institut National de la Statistique et de la Démographie du Burkina Faso 2021).\r\nThe purpose of this methodological document is to explain:\r\nThe bottom-up modelling used to estimate population totals in incomplete communes\r\nThe top-down modelling used to disaggregate the published census population totals — a combination of estimation-based and enumeration-based commune totals — into high resolution gridded estimates\r\nThe produced dataset (WorldPop and Institut National de la Statistique et de la Démographie du Burkina Faso. 2021) can be downloaded from the WorldPop Open Population Repository (https://wopr.worldpop.org/?BFA/Population/v1.0) and explored on the woprVision data exploration interface (https://apps.worldpop.org/woprVision/).\r\nEstimating Missed Communes\r\nModel Method\r\n\r\n\r\n\r\nFigure 1: Schema for estimating population in missing communes\r\n\r\n\r\n\r\nThe ‘Bottom-up’ modelling followed the hierarchical Bayesian framework developed by Leasure et al. (2020) estimating population totals using sparse survey data. The method combines geospatial covariates available for the entire region of study with observed population data available only for a set of small-size clusters. The estimated relationship is then applied to the grid cells (3 arc-seconds, approximately 100m at the equator) of the unsurveyed areas to predict the population totals. To ensure consistency with the INSD traditional reporting, the gridded estimates were then aggregated at the commune level.\r\nThe hierarchical probabilistic framework enables to leverage statistical relationships between population and geospatial covariates from similar settled locations in order to predict elsewhere and to account for uncertainty in this process. The following equations describe the building blocks of the model:\r\n\\[\r\n\\begin{gathered}\r\n  N_i \\sim Poisson( D_i A_i ) \\\\\r\n  D_i \\sim LogNormal( \\bar{D}_i, \\sigma_{l_1,l_2, l_3}) \\\\\r\n  \\bar{D}_i = \\alpha_{l_1,l_2, l_3} + \\sum_{k=1}^{K} \\beta_k x_{i,k} \\\\ \r\n\\\\\r\n\\alpha_{l_1,l_2, l_3} \\sim Normal(11,3)\\\\\r\n\\beta_k \\sim Normal(0,1)\\\\\r\n\\sigma_{l_1,l_2, l_3} \\sim Truncated Normal(0,1,0)\r\n\\end{gathered}\r\n\\] with:\r\na Poisson distribution to model population count \\(N_i\\) in enumeration area \\(i\\)\r\na lognormal distribution to model population density (\\(D_i\\), which is the number of people per settled area in m\\(^2\\), \\(A_i\\))\r\na hierarchical setting for the variance of the lognormal, \\(\\sigma\\) estimated per level \\(l_1, l_2\\) and \\(l_3\\)\r\na mean of the lognormal, \\(\\bar{D}\\) defined deterministically with a hierarchical slope \\(\\alpha_{l_1,l_2,l_3}\\), plus a set of \\(K\\) covariates \\(x_k\\) with related coefficients \\(\\beta_k\\)\r\nModel Implementation\r\nInput data\r\n\r\n\r\n\r\nFigure 2: Population density of the selected enumeration areas\r\n\r\n\r\n\r\nPopulation\r\nThe raw census database consists of the available GPS records for individual and collective resident households. At the time of the analysis, digital Enumeration Areas (EA) were not available, thus for modelling purposes, we compute ad hoc EA boundaries as envelopes around the GPS points belonging to the same enumeration area. A careful selection is then made to remove inaccurate EAs due to error in data collection, EA miss-attribution, imprecise GPS location or inaccurate GPS recording (due to the location where the surveyor entered the observation in the device). We implemented the criteria using quantitative metrics such as: the standard deviation of GPS points for each EA, the number of observations falling in one grid cell, the people/building ratio and the people/settled area ratio.\r\nThe final database used for modelling contains 15 817 EAs which represents 69% of the raw database.\r\nTo prevent overestimating population in unsurveyed communes, we removed from every EAs individuals that were recorded as migrants and originated from the unsurveyed communes. This provides us with a baseline population where displacement from the insecure communes is temporary ignored and tackled at a later stage.\r\nBuilding footprints\r\nA core covariate in our model is the building footprints layer provided by Ecopia.AI and Maxar Technologies (2019). It is a satellite-imagery-based features extraction at 5m and gives a precise estimate of the built-up area in Burkina Faso. Figure 3 illustrates this for an area in Ouagadougou.\r\n\r\n\r\n\r\nFigure 3: Example of the building footprints in Ouagadougou\r\n\r\n\r\n\r\nFrom the building footprints we can calculate the settled area of each EA (i.e. the sum of each building area). During the model fitting, this is used to calculate population densities (people per settled area) from the observed counts.\r\nThe building footprints layer also provides the subset of grid cells for which to predict population count. We predict population only for the grid cells considered as settled, that contains at least one building from the building footprints layer.\r\nGeospatial covariates\r\nTo study Burkina Faso spatial population distribution, we selected 5 covariates from different sources based on their assumed correlation to population densities and on shared range of values between the EA level dataset and the grid cell level dataset.\r\nThe final set of covariates is:\r\nthe count of buildings in a 5km buffer derived from the building footprints layer (Ecopia.AI and Maxar Technologies 2019)\r\nthe distance to temporary rivers and secondary roads provided in the Base Nationale de Données Topographiques (Institut Géographique du Burkina Faso 2015)\r\nthe friction surface used for the Access to Cities project (Weiss, Nelson, Gibson, Temperley, Peedell, Lieber, Hancher, Poyart, Belchior, Fullman, and others 2018a)\r\nthe UN-adjusted unconstrained gridded estimates from WorldPop that disaggregated the Burkina Faso 2019 census projections (WorldPop Research Group, University of Southampton et al. 2018)\r\nFor classifying settlement consistenly with census definition, we used the labelling of each EA in the census database as urban or rural to produce a settlement type prediction at grid cell level.\r\nMore precisely, we used the caret R package (Kuhn et al. 2020) to fit a Gradient Boosting Machine with two covariates, distance to high urban settlement (Institut Géographique du Burkina Faso 2015) and building count in a 500m window (Ecopia.AI and Maxar Technologies 2019). The area under the curve metric of the classification model is 0.98, indicating an almost perfect fit.\r\nModel results\r\nImplementing the model\r\nThe final models is composed of three nested levels for modelling population density: the modelled settlement type, the regions (Burkinabe administrative unit level 1) and the communes.\r\nModel fit was done using the Stan software (Carpenter et al. 2017). Implementing scripts and distribution of estimated parameters can be found on Github: https://github.com/wpgp/BFA_population_v1_0_methods/tree/main/supplements.\r\nTo provide population totals for the unsurveyed communes, we aggregated the gridded bottom-up estimates using official boundaries (Institut Géographique du Burkina Faso 2015). Finally the estimated population totals were corrected for displacement based on the observed census migration status data. We added the migrants that were discarded when processing the census individual database (cf. Section ??) to the commune where they were enumerated and removed them from the unsurveyed commune where they were migrated from.\r\nThe model fit and prediction were done in R version 3.5.1., using the package rstan (Stan Development Team 2020), sf (Pebesma et al. 2020), raster (Hijmans et al. 2020), dplyr (Wickham et al. 2020), data.table (Dowle et al. 2020) and doParallel (Wallig et al. 2020).\r\nAssessing the model goodness-of-fit\r\nPrediction power of the final model is first assessed using a training dataset (70%) to fit the model and a test dataset (30%) to estimate the goodness-of-fit. The correlation between predictions and observations is 0.8. 95% of the test observations are in their 95% confidence interval. Bias (mean of residuals) is 45 people, imprecision (standard deviation of residuals) is 263 people and inaccuracy (mean of absolute residuals) is 169.\r\n\r\n\r\n\r\nFigure 4: Scatterplot of observed vs. predicted population count on test EAs. Red line shows perfect prediction\r\n\r\n\r\n\r\nThe second assessment was undertaken on the population totals for the completed communes, totals that were corrected with omission rates from the post-enumeration survey. This reference data enables us to test the sensitivity of the estimates to the selection process, more precisely two crucial steps:\r\nDrawing EA boundaries around GPS points. We have tested two alternative scenarios:\r\nusing a 25m buffer around the GPS points in Ouagadougou, a 25 m buffer in Saaba et Bobo-Dioulasso and a 100m buffer in the remaining zones;\r\nusing a 20m buffer around the GPS points in Ouagadougou, a 25m buffer in Bobo-Dioulasso and Saaba, a 80m buffer in other urban areas and a 120m buffer in rural areas.\r\n\r\nSelecting the threshold used to discard EA based on the population density. We have tested two alternative options:\r\nfixed national threshold and\r\ncustom thresholds based on the maximum population density per admin 2.\r\n\r\nTo assess the predicted totals, we compute a targeted Root Mean Squared Error for the complete communes nested in incomplete region:\r\n\\[\r\n\\sqrt[][\\frac{1}{n} \\sum_i (\\hat{y}_i - y_i)^2]\r\n\\]\r\nwhere \\(n\\) is the number of complete communes in incomplete regions (\\(n\\)=141), \\(y_i\\) the observed census population totals for commune \\(i\\) and \\(\\hat{y}_i\\) the predicted population totals for commune \\(i\\).\r\n\r\n\r\nTable 1: Sensitivity analysis results on predicted totals\r\n\r\n\r\n\r\nSelection procedures\r\n\r\n\r\n\r\n\r\nEA (%)*\r\n\r\n\r\n\r\n\r\nRMSE†\r\n\r\n\r\n\r\nDelineation\r\n\r\n\r\nDensity threshold\r\n\r\n\r\n\r\n\r\n\r\n\r\nScenario 1\r\n\r\n\r\n0.16\r\n\r\n\r\n5\r\n\r\n\r\n12 163\r\n\r\n\r\nScenario 2\r\n\r\n\r\n0.16\r\n\r\n\r\n4\r\n\r\n\r\n10 871\r\n\r\n\r\nScenario 2\r\n\r\n\r\n0.9 x maximum\r\n\r\n\r\n7\r\n\r\n\r\n9 966\r\n\r\n\r\nScenario 2\r\n\r\n\r\n0.8 x maximum\r\n\r\n\r\n9\r\n\r\n\r\n9 745\r\n\r\n\r\n* Additional EAs discarded because of selection procedures (in percentage)\r\n\r\n\r\n† RMSE was compiled over the complete communes from incomplete regions\r\n\r\n\r\nTable 1 shows that differentiating the size of the buffer between urban types does improve the goodness-of-fit. Furthermore choosing a resident density threshold based on the admin 2 maximum resident density succeeds in giving a more representative EA dataset that increase the external goodness-of-fit. Final model is represented in bold.\r\nEstimating Gridded Population for the Entire Country\r\nModel Method\r\n\r\n\r\n\r\nFigure 5: Schema for estimating gridded population for the entire country\r\n\r\n\r\n\r\nTo disaggregate the released communes census count into high-resolution gridded estimates, we adapted the dasymetric mapping explained in Stevens and al. (2015b) using the openly accessible scripts written by Bondarenko and al. (2018). The method consists in modeling population density by combining geospatial and remotely-sensed data in a Random Forest framework. This framework is chosen for its great predictive performance, the absence of complicated tuning parameter and its robustness to multicolinearity and multi-scale issues in the predictors (Robnik-Šikonja 2004).\r\nOnce the model is fitted at administrative level, it is then applied to each grid cell to obtain prediction of population density at a 100m x 100m resolution. This predicted density is then used as a weighting layer to disaggregate census population counts into the settled pixels based on a building footprint dataset from Ecopia.AI and Maxar Technologies (2019). The census counts are thus unevenly distributed across space to better reflect heterogeneous human settlement patterns.\r\nModel Implementation\r\nInput data\r\nPopulation\r\nThe officially released population counts at commune level, displayed in Figure 6 combine the surveyed totals (adjusted with post-enumeration survey non-respondent rates) and the estimated bottom-up totals.\r\n\r\n\r\n\r\nFigure 6: Map of commune population totals\r\n\r\n\r\n\r\nThe census provisional results include also an age and sex decomposition in 18 five-years-groups at national level (Institut National de la Statistique et de la Démographie 2020). These will be used to create the age and sex rasters.\r\nBuilding footprints\r\nThe building footprints layer was already presented in Section ??. For the disagregation exercise we derived four building attributes in addition to building count and settled grid cells, namely:\r\nBuilding area\r\nBuilding perimeter\r\nNearest neighbour distance\r\nNearest neighbour proximity (1/distance)\r\nThe above building attributes are summarised at grid cell level using eight aggregation methods: mean, median (med), standard deviation (sd), mean absolute deviation (mad), minimum, maximum, relative standard deviation (mean/sd) and relative mad (mad/med). Metrics based on the standard deviation or mean absolute deviation indicate the level of heterogeneity of the pixel.\r\nDespite the seemingly similarities between some building-footprints derived covariates, the underlying goal is to increase weak signals for the Random Forest modelling whose predictions will not be impacted by high level correlation (Genuer, Poggi, and Tuleau-Malot 2010).\r\nGeospatial covariates\r\nIn addition to spatial settlement characteristics (contained in the building footprints), we use geospatial covariates to explain the broader context of population distribution.\r\nWe constructed 27 additional covariates from six data sources:\r\n3 from the covariates mapped by the Malaria Atlas Project for their ‘Accessibility to cities’ and ‘Housing in Africa’ projects: travel time in 2015, friction surface in 2015 (Weiss, Nelson, Gibson, Temperley, Peedell, Lieber, Hancher, Poyart, Belchior, Fullman, and others 2018b) and mapping of improved housing conditions in 2015 (Tusting et al. 2019).\r\n4 from the climatic covariates from the Climatic Research Unit: temperature, precipitation, cloud cover and wetness (Harris et al. 2020)\r\n9 from the ESACCI land cover classification (Buchhorn et al. 2020), divided in the 9 overarching classes for which we computed the grid-cell-based distance\r\n3 from the settlement extent (Center for International Earth Science Information Network and Novel-T 2020) classified in 3 types (hamlet, small settlement, built-up areas) for which we computed the grid-cell-based distance\r\n5 from the Base Nationale de Données Topographiques (Institut Géographique du Burkina Faso 2015): the rivers network, the roads network and the settlement points classified in three types according to their urban status (low, middle, high), for which we computed the grid-cell-based distance\r\nthe WorldPop gridded census projection of 2019 (WorldPop Research Group, University of Southampton et al. 2018)\r\nModel Results\r\nImplementing the model\r\nTo model the relationship between census data and the entire set of covariates, we transform the population count into population density by dividing it with the area of all settled grid cells in the commune and then log-transform it (Forrest R. Stevens et al. 2015a). We then average the covariates using zonal mean for every communes. The procedure developed in Bondarenko et al. (2018) was used to both tune the Random Forest model and select covariates using their importance score to speed up the per-pixel prediction.\r\nOnce the model is fitted at commune level, we use it to predict the population density for each grid cell. This predicted density is then used as a weight to disaggregate the total population count for each commune. The disaggregated gridded population estimates are multiplied by the age and sex proportions from the national demographic pyramid to estimate population counts per age and sex group for each grid cell.\r\nThe code for the model fit and prediction can be found on Github: https://github.com/wpgp/BFA_population_v1_0_methods\r\nThe fit and the prediction were done in R version 3.5.1., using the package randomForest (Cutler and Wiener 2018), sf_0.9-5 (Pebesma et al. 2020), raster (Hijmans et al. 2020), dplyr (Wickham et al. 2020), data.table (Dowle et al. 2020) and doParallel (Wallig et al. 2020).\r\nAssessing the model goodness-of-fit\r\nCovariates importance We assess the importance of a predictor by showing the relative increase in the mean square error when the predictor is removed from the model. The order of magnitude might not be robust to the collinearity observed in the covariates set but the relative ranking is (Genuer, Poggi, and Tuleau-Malot 2010).\r\n\r\n\r\n\r\nFigure 7: Top 25 Covariates importance in the Random Forest model\r\n\r\n\r\n\r\nFigure 7 shows that the mean building count per pixel is by far the most important predictor, followed by the gridded population projections from WorldPop that informs population distribution from previous censuses. The presence in the top 25 covariates of different land cover classes confirms previous findings on the predictive power of land classification (Lloyd et al. 2019).\r\nAn interesting additional feature is the strong predictive power of building-derived metric depicting heterogeneity in a grid cell (standard deviation -sd-, mean absolute deviation -mad-, coefficient of variation -cv- and relative mean absolute deviation -mdcv-).\r\nAssessing the model A metric that is commonly used to assess a Random Forest model is the percentage of variance explained (Liaw and Wiener 2002). It corresponds to the “out-of-bag” mean squared error divided by the variance of the observations: \\[1 - \\frac{\\sum_i (y_i - \\hat{y}_i)^2}{\\sum_i (y_i - \\bar{y})^2}\\]whre \\(y_i\\) is the observed population totals for commune \\(i\\) with \\(\\bar{y}\\) its corresponding average and \\(\\hat{y}_i\\) is the predicted population totals for commune \\(i\\) on a test dataset.\r\nIn our model the percentage of variance explained is equal to 70.1%. For comparison the model developed by Stevens et al. (2015b) for Burkina Faso using census projections and a standardised set of covariates (Lloyd et al. 2019) had a percentage of variance explained of 59.1%1.\r\nThe difference is explained by the custom set of covariates used in our model, especially the one derived from the building footprints, and the restriction of population estimation and prediction to the settled grid cells.\r\nAssessing the prediction In Stevens and al. (2015b) external validation was undertaken by applying the modelling process to a coarser census scale and then aggregating predicted population per pixel at the finer census unit to compare it with census results. However in Burkina Faso, the coarser administrative unit after the commune is the province level that has only 45 units. We considered this sample size too small to perform a meaningful model assessment of the Random Forest modelling.\r\nNonetheless, we had access to the raw census database where household GPS points provide a geo-tagging of enumeration areas across the country. Thus, this oﬀers the possibility to check the model performance at a fine spatial scale. We manually selected a subset of 50 enumeration areas across the country in diﬀerent settlement settings based on the visual assessment of the satellite imagery. We then computed a predicted population by summing up the corresponding grid cells and performed a comparison analysis based on the relative prediction error (Figure 8 and 9):\r\n\\[\r\n\\frac{\\hat{y} - y}{y}*100\r\n\\]\r\nwhere \\(\\hat{y}\\) is the predicted and \\(y\\) the observed EA population count.\r\n\r\n\r\n\r\nFigure 8: Spatial distribution of the relative prediction errors. Dots shows the location of the selected EAs. The colours show the ranges of predictive errors. Settled pixels are shown in yellow.\r\n\r\n\r\n\r\n\r\n\r\n\r\nFigure 9: Distribution of the relative prediction errors.Grey bars represent each of the 50 selected EAs.The orange line shows the location of the 0% error, the black line summarises the overall error distribution.\r\n\r\n\r\n\r\nFigure 9 shows an average bias of the prediction of -3%. Imprecision (std. of relative error) is 27% and inaccuracy 21% (mean of the absolute relative error).\r\nThe greater prediction errors are occurring in rural area as shown by the spatial distribution of the settled cells without clear geographical clustering (Figure 8).\r\nDiscussion\r\nThe assumptions and limitations of this study can be summarised by topics.\r\nCountry extent Administrative boundary datasets include the entire surface of the country. Any settled grid cells outside of the boundaries from the Base Nationale de Données Topographiques (Institut Géographique du Burkina Faso 2015) were not included.\r\nData date Although the input data have varying reference years, the estimates should be considered as representing late 2019 as thisis the date of the census data collection.\r\nSettlement type The population counts in areas with primarily non-residential buildings may be over-estimated. Caution should be taken when using the population data in industrial (and other primarily non-residential) areas. Furthermore little variation can be modelled for densely populated urban areas. This is due to the scale of the input data used to fit the model, namely at administrative level 3, that does not capture well variation in a dense city such as Ouagadougou. Therefore precautions shall be taken when focusing the analysis in urban zones.\r\nBuilding footprints We assume that the building footprints data is accurate and that each building polygon corresponds to a building structure. However the date of the satellite imagery spans from 2009 to 2019 (see Figure 10). The estimated population counts may be inaccurate in areas where the imagery is old and buildings have recently been constructed. This issue was observed in the towns of Zorgho, Bâtié and Nanoro. But it is minimized by old satellite imagery being only used in remote area.\r\n\r\n\r\n\r\nFigure 10: Satellite imagery date used for extracting building footprints by Ecopia.AI, and Maxar Technologies. (2019)\r\n\r\n\r\n\r\nDiscrete population pattern Administrative boundaries are visible in the disagregated estimates whereby sharp population differences can be found for neighboring grid cells along the administrative unit delimitation. This is the consequence of the dasymetric top-down disagregation which ensures that the sum of every grid cells of the administrative unit does match with the total provided.\r\nModeled population The population that is predicted is the de jure resident population as defined by the INSD, that is planning in staying or having stayed already six months at the place where the census is taking place. This population dataset represent neither the ambient population, nor captures internal migration below the commune level.\r\nAge and sex pyramid The age and sex proportions are released by the INSD at the national level, therefore no subnational variations in proportion were considered for the gridded estimates.\r\nContributions\r\nThis work is part of the GRID3 (Geo-Referenced Infrastructure and Demographic Data for Development) project funded by the Bill and Melinda Gates Foundation (BMGF) and the United Kingdom’s Department for International Development (OPP1182408). Project partners include WorldPop at the University of Southampton, the United Nations Population Fund (UNFPA), Center for International Earth Science Information Network (CIESIN) in the Earth Institute at Columbia University, and the Flowminder Foundation. The Institut National de la Statistique et de la Démographie supported, facilitated this work, reviewed the results and provided the census database. The modelling work, geospatial data processing, stakeholder engagement and model report was led by Edith Darin with help from Mathias Kuépié. Support for the statistical modelling was provided by Gianluca Boo, Claire A. Dooley, Douglas R. Leasure and Chris W. Jochem. Gianluca Boo, Douglas R. Leasure and Attila N. Lazar provided a thorough review of the manuscript. Oversight was done by Andrew J. Tatem and Attila N. Lazar.\r\nLicense\r\nThis report may be redistributed using a Creative Commons Attribution 4.0 International (CC BY 4.0) License.\r\nSuggested Citation\r\nWorldPop and Institut National de la Statistique et de la Démographie du Burkina Faso. 2021. Census-based gridded population estimates for Burkina Faso (2019), version 1.0. WorldPop, University of Southampton. doi:10.5258/SOTON/WP00687.\r\nReferences\r\n\r\n\r\n\r\nBondarenko, Maksym, Jeremiah Nieves, Alessandro Sorichetta, Forrest R Stevens, Andrea E Gaughan, Andrew Tatem, and others. 2018. “wpgpRFPMS: WorldPop Random Forests Population Modelling r Scripts, Version 0.1. 0.”\r\n\r\n\r\nBuchhorn, Marcel, Bruno Smets, Luc Bertels, Bert De Roo, Myroslava Lesiv, Nandin-Erdene Tsendbazar, Martin Herold, and Steffen Fritz. 2020. “Copernicus Global Land Service: Land Cover 100m: collection 3: epoch 2019: Globe.” Zenodo. https://doi.org/10.5281/zenodo.3939050.\r\n\r\n\r\nCarpenter, Bob, Andrew Gelman, Matthew D Hoffman, Daniel Lee, Ben Goodrich, Michael Betancourt, Marcus Brubaker, Jiqiang Guo, Peter Li, and Allen Riddell. 2017. “Stan: A Probabilistic Programming Language.” Journal of Statistical Software 76 (1). https://doi.org/10.18637/jss.v076.i01.\r\n\r\n\r\nCenter for International Earth Science Information Network, and Novel-T. 2020. “Grid3 Burkina Faso Settlement Extents Version 01, Alpha.” https://doi.org/10.7916/d8-h47k-8637.\r\n\r\n\r\nCutler, Fortran original by Leo Breiman and Adele, and R. port by Andy Liaw and Matthew Wiener. 2018. randomForest: Breiman and Cutler’s Random Forests for Classification and Regression. https://CRAN.R-project.org/package=randomForest.\r\n\r\n\r\nDowle, Matt, Arun Srinivasan, Jan Gorecki, Michael Chirico, Pasha Stetsenko, Tom Short, Steve Lianoglou, et al. 2020. Data.table: Extension of ’Data.frame’. https://CRAN.R-project.org/package=data.table.\r\n\r\n\r\nEcopia.AI, and Maxar Technologies. 2019. Digitize Africa Data.\r\n\r\n\r\nGenuer, Robin, Jean-Michel Poggi, and Christine Tuleau-Malot. 2010. “Variable Selection Using Random Forests.” Pattern Recognition Letters 31 (14): 2225–36.\r\n\r\n\r\nHarris, Ian, Timothy J Osborn, Phil Jones, and David Lister. 2020. “Version 4 of the CRU TS Monthly High-Resolution Gridded Multivariate Climate Dataset.” Scientific Data 7 (1): 1–18.\r\n\r\n\r\nHijmans, Robert J., Jacob van Etten, Michael Sumner, Joe Cheng, Dan Baston, Andrew Bevan, Roger Bivand, et al. 2020. Raster: Geographic Data Analysis and Modeling. https://CRAN.R-project.org/package=raster.\r\n\r\n\r\nInstitut Géographique du Burkina Faso. 2015. “Base Nationale de Données Topographiques.”\r\n\r\n\r\nInstitut National de la Statistique et de la Démographie. 2020. “Cinquième Recensement Général de la Population et de l’Habitation du Burkina Faso - Résultats préliminaires.” INSD Ouagadougou, Burkina Faso.\r\n\r\n\r\nKuhn, Max, Jed Wing, Steve Weston, Andre Williams, Chris Keefer, Allan Engelhardt, Tony Cooper, et al. 2020. Caret: Classification and Regression Training. https://CRAN.R-project.org/package=caret.\r\n\r\n\r\nLeasure, Douglas R, Warren C Jochem, Eric M Weber, Vincent Seaman, and Andrew J Tatem. 2020. “National Population Mapping from Sparse Survey Data: A Hierarchical Bayesian Modeling Framework to Account for Uncertainty.” Proceedings of the National Academy of Sciences.\r\n\r\n\r\nLiaw, Andy, and Matthew Wiener. 2002. “Classification and Regression by randomForest.” R News 2 (3): 18–22. https://CRAN.R-project.org/doc/Rnews/.\r\n\r\n\r\nLloyd, Christopher T, Heather Chamberlain, David Kerr, Greg Yetman, Linda Pistolesi, Forrest R Stevens, Andrea E Gaughan, et al. 2019. “Global Spatio-Temporally Harmonised Datasets for Producing High-Resolution Gridded Population Distribution Datasets.” Big Earth Data 3 (2): 108–39. https://doi.org/10.1080/20964471.2019.1625151.\r\n\r\n\r\nPebesma, Edzer, Roger Bivand, Etienne Racine, Michael Sumner, Ian Cook, Tim Keitt, Robin Lovelace, et al. 2020. Sf: Simple Features for r. https://CRAN.R-project.org/package=sf.\r\n\r\n\r\nRobnik-Šikonja, Marko. 2004. “Improving Random Forests.” In European Conference on Machine Learning, 359–70. Springer.\r\n\r\n\r\nStan Development Team. 2020. “RStan: The R Interface to Stan.” http://mc-stan.org/.\r\n\r\n\r\nStevens, Forrest R., Andrea E. Gaughan, Catherine Linard, and Andrew J. Tatem. 2015a. “Disaggregating Census Data for Population Mapping Using Random Forests with Remotely-Sensed and Ancillary Data.” PLOS ONE 10 (2): e0107042. https://doi.org/10.1371/journal.pone.0107042.\r\n\r\n\r\nStevens, Forrest R, Andrea E Gaughan, Catherine Linard, and Andrew J Tatem. 2015b. “Disaggregating Census Data for Population Mapping Using Random Forests with Remotely-Sensed and Ancillary Data.” PloS One 10 (2). https://doi.org/10.1371/journal.pone.0107042.\r\n\r\n\r\nTusting, Lucy S, Donal Bisanzio, Graham Alabaster, Ewan Cameron, Richard Cibulskis, Michael Davies, Seth Flaxman, et al. 2019. “Mapping Changes in Housing in Sub-Saharan Africa from 2000 to 2015.” Nature 568 (7752): 391–94.\r\n\r\n\r\nWallig, Michelle, Microsoft Corporation, Steve Weston, and Dan Tenenbaum. 2020. doParallel: Foreach Parallel Adaptor for the ’Parallel’ Package. https://CRAN.R-project.org/package=doParallel.\r\n\r\n\r\nWeiss, D J, A Nelson, HS Gibson, W Temperley, S Peedell, A Lieber, M Hancher, E Poyart, S Belchior, N Fullman, and others. 2018b. “A Global Map of Travel Time to Cities to Assess Inequalities in Accessibility in 2015.” Nature 553 (7688): 333–36.\r\n\r\n\r\nWeiss, D J, A Nelson, HS Gibson, W Temperley, S Peedell, A Lieber, M Hancher, E Poyart, S Belchior, N Fullman, and others. 2018a. “A Global Map of Travel Time to Cities to Assess Inequalities in Accessibility in 2015.” Nature 553 (7688): 333336.\r\n\r\n\r\nWickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and RStudio. 2020. Dplyr: A Grammar of Data Manipulation. https://CRAN.R-project.org/package=dplyr.\r\n\r\n\r\nWorldPop Research Group, University of Southampton, Department of Geography and Geosciences, University of Louisville, Departement de Geographie, Universite de Namur, and Center for International Earth Science Information Network (CIESIN), Columbia University. 2018. “Global High Resolution Population Denominators Project - Funded by the Bill and Melinda Gates Foundation (Opp1134076).” https://doi.org/10.5258/SOTON/WP00645.\r\n\r\n\r\nWorldPop, and Institut National de la Statistique et de la Démographie du Burkina Faso. 2021. “Census-Based Gridded Population Estimates for Burkina Faso (2019), Version 1.0.” WorldPop, University of Southampton. https://doi.org/10.5258/SOTON/WP00687.\r\n\r\n\r\nSee Burkina Faso 2019 in http://dx.doi.org/10.5258/SOTON/WP00645 for more details.↩︎\r\n",
    "preview": "posts/2021-07-09-modelling-burkina-faso-population/./dat/resident_density_mean_admin3.png",
    "last_modified": "2021-08-02T18:31:38+01:00",
    "input_file": {},
    "preview_width": 1200,
    "preview_height": 796
  },
  {
    "path": "posts/2020-09-01-coopcycle/",
    "title": "CoopCycle: we socialize platform",
    "description": "Since 2017 I am a vice-president of the CoopCycle association  that fights for fair working rights in the bike delivery sector.",
    "author": [
      {
        "name": "Edith Darin",
        "url": {}
      }
    ],
    "date": "2020-09-01",
    "categories": [],
    "contents": "\r\n\r\nCoopCycle is an association that aims at creating an European federation of local bike delivery cooperative to mutualize costs and share the knowledge and lessons learned of a worker-owned delivery activity. The services offered by the network consist in developing a tailored platform/dispatch software that answers the needs of riders, advocating around bike delivery at different scales, applying for grants application or providing adivce on legislation, worker rights, marketing and branding.\r\nWe also created a custom licensing to restrict software access only to workers co-ops where production and economic value are democratically shared. Our objective is to allow couriers to build co-ops and then emancipate themselves from existing platforms (Deliveroo and co).\r\nIn 2021, CoopCycle gathered 65 collectives across three continents and six countries.\r\nWe won the Paris City Hall prize for Social Business (30k) and Call for Action in Seine-Saint-Denis (8k).\r\nTo learn more about the adventure: https://coopcycle.org/en/\r\nMy contributions\r\nAs a member I’m involved at different stages of the projet from working group animation, grants application, and local coop support to meetings organization and outreach activities.\r\nTalks\r\n“CoopCycle as a Showcase for Platform Cooperativsm”. New-York Platform Cooperativism Consortium 2019\r\n“How couriers can take control: A co-op alternative to Uber Eats and Deliveroo”, Manchester Co-operatives UK. \\[Novembre 2018\\] Video\r\n“CoopCycle as a Showcase for Platform Cooperativsm”. Hong-Kong Platform Cooperativism Consortium 2018 \\[Septembre 2018\\] Video\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2020-09-01-coopcycle/coopcycle_logo.jpg",
    "last_modified": "2021-10-21T13:49:53+01:00",
    "input_file": {}
  }
]
