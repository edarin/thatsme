<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Meet Edith: How to get a clear view of hierarchical data? Answer: Sunburst Charts</title>

<meta property="description" itemprop="description" content="Sunburst charts are a great tool to visualise hierarchichal data structure and unravel missing combinations. Useful as an exploratory analysis for Bayesian hierarchical models."/>

<link rel="canonical" href="https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-07-31"/>
<meta property="article:created" itemprop="dateCreated" content="2021-07-31"/>
<meta name="article:author" content="Edith Darin"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Meet Edith: How to get a clear view of hierarchical data? Answer: Sunburst Charts"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Sunburst charts are a great tool to visualise hierarchichal data structure and unravel missing combinations. Useful as an exploratory analysis for Bayesian hierarchical models."/>
<meta property="og:url" content="https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/"/>
<meta property="og:image" content="https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/./sunburst_2layers.png"/>
<meta property="og:image:width" content="661"/>
<meta property="og:image:height" content="409"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Meet Edith"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="Meet Edith: How to get a clear view of hierarchical data? Answer: Sunburst Charts"/>
<meta property="twitter:description" content="Sunburst charts are a great tool to visualise hierarchichal data structure and unravel missing combinations. Useful as an exploratory analysis for Bayesian hierarchical models."/>
<meta property="twitter:url" content="https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/"/>
<meta property="twitter:image" content="https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/./sunburst_2layers.png"/>
<meta property="twitter:image:width" content="661"/>
<meta property="twitter:image:height" content="409"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="Meet Edith: How to get a clear view of hierarchical data? Answer: Sunburst Charts"/>
<meta name="citation_fulltext_html_url" content="https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/"/>
<meta name="citation_online_date" content="2021/07/31"/>
<meta name="citation_publication_date" content="2021/07/31"/>
<meta name="citation_author" content="Edith Darin"/>
<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=National population mapping from sparse survey data: A hierarchical Bayesian modeling framework to account for uncertainty;citation_publication_date=2020;citation_volume=117;citation_doi=10.1073/pnas.1913050117;citation_author=Douglas R. Leasure;citation_author=Warren C. Jochem;citation_author=Eric M. Weber;citation_author=Vincent Seaman;citation_author=Andrew J. Tatem"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output","preview","bibliography","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["How to get a clear view of hierarchical data? Answer: Sunburst Charts"]},{"type":"character","attributes":{},"value":["Sunburst charts are a great tool to visualise hierarchichal data structure and unravel missing combinations. Useful as an exploratory analysis for Bayesian hierarchical models."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Edith Darin"]}]}]},{"type":"character","attributes":{},"value":["07-31-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","code_folding"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["show"]}]}]},{"type":"character","attributes":{},"value":["./sunburst_2layers.png"]},{"type":"character","attributes":{},"value":["references.bib"]},{"type":"character","attributes":{},"value":["https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/"]},{"type":"character","attributes":{},"value":["https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["nga_demo_data.xls","references.bib","sunburst.png","sunburst_2layers.png","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/anchor-4.2.2/anchor.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/bowser-1.9.3/bowser.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/crosstalk-1.1.1/css/crosstalk.css","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/crosstalk-1.1.1/js/crosstalk.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/crosstalk-1.1.1/js/crosstalk.js.map","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/crosstalk-1.1.1/js/crosstalk.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/crosstalk-1.1.1/js/crosstalk.min.js.map","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/distill-2.2.21/template.v2.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/figure-html5/popDens-boxplot-1.png","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/header-attrs-2.9/header-attrs.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/htmlwidgets-1.5.3/htmlwidgets.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/jquery-1.11.3/jquery.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/jquery-3.5.1/jquery-AUTHORS.txt","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/jquery-3.5.1/jquery.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/jquery-3.5.1/jquery.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/jquery-3.5.1/jquery.min.map","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/kePrint-0.0.1/kePrint.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/lightable-0.0.1/lightable.css","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/plotly-binding-4.9.4.1/plotly.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/plotly-main-1.57.1/plotly-latest.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/popper-2.6.0/popper.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/tippy-6.2.7/tippy-bundle.umd.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/tippy-6.2.7/tippy-light-border.css","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/tippy-6.2.7/tippy.css","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/tippy-6.2.7/tippy.umd.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/typedarray-0.1/typedarray.min.js","unraveling-hierarchichal-data-structure-with-sunburst-charts_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #000000;
  --header-color:    rgba(0, 0, 0, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #0F2E3D;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */
</style>
<style type="text/css">
/* base variables */

/* Edit the CSS properties in this file to create a custom
   Distill theme. Only edit values in the right column
   for each row; values shown are the CSS defaults.
   To return any property to the default,
   you may set its value to: unset
   All rows must end with a semi-colon.                      */

/* Optional: embed custom fonts here with `@import`          */
/* This must remain at the top of this file.                 */



html {
  /*-- Main font sizes --*/
  --title-size:      50px;
  --body-size:       1.06rem;
  --code-size:       14px;
  --aside-size:      12px;
  --fig-cap-size:    13px;
  /*-- Main font colors --*/
  --title-color:     #592524;
  --header-color:    rgba(89, 37, 36, 0.8);
  --body-color:      rgba(0, 0, 0, 0.8);
  --aside-color:     rgba(0, 0, 0, 0.6);
  --fig-cap-color:   rgba(0, 0, 0, 0.6);
  /*-- Specify custom fonts ~~~ must be imported above   --*/
  --heading-font:    sans-serif;
  --mono-font:       monospace;
  --body-font:       sans-serif;
  --navbar-font:     sans-serif;  /* websites + blogs only */
}

/*-- ARTICLE METADATA --*/
d-byline {
  --heading-size:    0.6rem;
  --heading-color:   rgba(0, 0, 0, 0.5);
  --body-size:       0.8rem;
  --body-color:      rgba(0, 0, 0, 0.8);
}

/*-- ARTICLE TABLE OF CONTENTS --*/
.d-contents {
  --heading-size:    18px;
  --contents-size:   13px;
}

/*-- ARTICLE APPENDIX --*/
d-appendix {
  --heading-size:    15px;
  --heading-color:   rgba(0, 0, 0, 0.65);
  --text-size:       0.8em;
  --text-color:      rgba(0, 0, 0, 0.5);
}

/*-- WEBSITE HEADER + FOOTER --*/
/* These properties only apply to Distill sites and blogs  */

.distill-site-header {
  --title-size:       18px;
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #592524;
  --link-color:       rgba(255, 255, 255, 0.8);
}

.distill-site-footer {
  --text-color:       rgba(255, 255, 255, 0.8);
  --text-size:        15px;
  --hover-color:      white;
  --bkgd-color:       #592524;
}

/*-- Additional custom styles --*/
/* Add any additional CSS rules below                      */

h1, h2, h3, h4, h5, h6 {
  color: #592524;
}

a {
  color: #913d3b;
}
a:hover {
  color: #913d3b;
}</style>
<style type="text/css">
/* base style */

/* FONT FAMILIES */

:root {
  --heading-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  --mono-default: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  --body-default: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

body,
.posts-list .post-preview p,
.posts-list .description p {
  font-family: var(--body-font), var(--body-default);
}

h1, h2, h3, h4, h5, h6,
.posts-list .post-preview h2,
.posts-list .description h2 {
  font-family: var(--heading-font), var(--heading-default);
}

d-article div.sourceCode code,
d-article pre code {
  font-family: var(--mono-font), var(--mono-default);
}


/*-- TITLE --*/
d-title h1,
.posts-list > h1 {
  color: var(--title-color, black);
}

d-title h1 {
  font-size: var(--title-size, 50px);
}

/*-- HEADERS --*/
d-article h1,
d-article h2,
d-article h3,
d-article h4,
d-article h5,
d-article h6 {
  color: var(--header-color, rgba(0, 0, 0, 0.8));
}

/*-- BODY --*/
d-article > p,  /* only text inside of <p> tags */
d-article > ul, /* lists */
d-article > ol {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
  font-size: var(--body-size, 1.06rem);
}


/*-- CODE --*/
d-article div.sourceCode code,
d-article pre code {
  font-size: var(--code-size, 14px);
}

/*-- ASIDE --*/
d-article aside {
  font-size: var(--aside-size, 12px);
  color: var(--aside-color, rgba(0, 0, 0, 0.6));
}

/*-- FIGURE CAPTIONS --*/
figure .caption,
figure figcaption,
.figure .caption {
  font-size: var(--fig-cap-size, 13px);
  color: var(--fig-cap-color, rgba(0, 0, 0, 0.6));
}

/*-- METADATA --*/
d-byline h3 {
  font-size: var(--heading-size, 0.6rem);
  color: var(--heading-color, rgba(0, 0, 0, 0.5));
}

d-byline {
  font-size: var(--body-size, 0.8rem);
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

d-byline a,
d-article d-byline a {
  color: var(--body-color, rgba(0, 0, 0, 0.8));
}

/*-- TABLE OF CONTENTS --*/
.d-contents nav h3 {
  font-size: var(--heading-size, 18px);
}

.d-contents nav a {
  font-size: var(--contents-size, 13px);
}

/*-- APPENDIX --*/
d-appendix h3 {
  font-size: var(--heading-size, 15px);
  color: var(--heading-color, rgba(0, 0, 0, 0.65));
}

d-appendix {
  font-size: var(--text-size, 0.8em);
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

d-appendix d-footnote-list a.footnote-backlink {
  color: var(--text-color, rgba(0, 0, 0, 0.5));
}

/*-- WEBSITE HEADER + FOOTER --*/
.distill-site-header .title {
  font-size: var(--title-size, 18px);
  font-family: var(--navbar-font), var(--heading-default);
}

.distill-site-header a,
.nav-dropdown .nav-dropbtn {
  font-family: var(--navbar-font), var(--heading-default);
}

.nav-dropdown .nav-dropbtn {
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  font-size: var(--text-size, 15px);
}

.distill-site-header a:hover,
.nav-dropdown:hover .nav-dropbtn {
  color: var(--hover-color, white);
}

.distill-site-header {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer {
  font-size: var(--text-size, 15px);
  color: var(--text-color, rgba(255, 255, 255, 0.8));
  background-color: var(--bkgd-color, #0F2E3D);
}

.distill-site-footer a:hover {
  color: var(--hover-color, white);
}</style>
<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.9/header-attrs.js"></script>
  <script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
  <script src="../../site_libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
  <script src="../../site_libs/plotly-binding-4.9.4.1/plotly.js"></script>
  <script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
  <script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
  <link href="../../site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
  <script src="../../site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
  <link href="../../site_libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
  <script src="../../site_libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"How to get a clear view of hierarchical data? Answer: Sunburst Charts","description":"Sunburst charts are a great tool to visualise hierarchichal data structure and unravel missing combinations. Useful as an exploratory analysis for Bayesian hierarchical models.","authors":[{"author":"Edith Darin","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-07-31T00:00:00.000+01:00","citationText":"Darin, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Meet Edith</a>
<a href="../../portfolio.html">Portfolio</a>
<a href="../../posts.html">Posts</a>
</div>
<div class="nav-right">
<a href="../../publications.html">Publications</a>
<a href="../../talks.html">Talks</a>
<a href="https://raw.githubusercontent.com/edarin/thatsme/main/cv/cv.pdf">Resume</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>How to get a clear view of hierarchical data? Answer: Sunburst Charts</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Sunburst charts are a great tool to visualise hierarchichal data structure and unravel missing combinations. Useful as an exploratory analysis for Bayesian hierarchical models.</p></p>
</div>

<div class="d-byline">
  Edith Darin  
  
<br/>07-31-2021
</div>

<div class="d-article">
<h1 id="background">Background</h1>
<p>Bayesian models are great for hierarchical data, that is <strong>observations that have a grouped structure</strong>, typically grades of students that belongs to different classrooms in different schools.</p>
<p>This type of data structure violates the assumption of independence, key for basic models and can produce mislead conclusions, when the group-specific patterns differ from the global pattern.</p>
<p>But the point here is not to describe Bayesian hierarchichal models.</p>
<p>We are taking a step backward and <strong>we want to visualise the hierarchical structure of our data</strong>, for two reasons:</p>
<ul>
<li><p>communicate with a lay audience</p></li>
<li><p>explore the groupings</p></li>
</ul>
<p>Indeed there are two types of data hierarchy: crossed and nested. A <strong>crossed design</strong> happens when all combination of groupings exist (either in data or in reality). Typically if we were to distinguish between foreign-born and native students, we would expect that this grouping can occur in every classroom. On the opposite, a <strong>nested design</strong> describes a strict hierarchy, typically, one classroom belongs to one and only one school.</p>
<p>We want to show that sunburst charts<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> are a great tool to visualise the hierarchy and combined with some tidyverse magic can unravel missing combinations.</p>
<p><img src="sunburst.png" title="Example of a sunburst chart" /></p>
<h1 id="r-set-up">R set-up</h1>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://tidyverse.tidyverse.org'>tidyverse</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>RColorBrewer</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://haozhu233.github.io/kableExtra/'>kableExtra</a></span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://plotly-r.com'>plotly</a></span><span class='op'>)</span> <span class='co'># contains function for sunburst plot</span>
</code></pre>
</div>
</details>
</div>
<h1 id="data">Data</h1>
<p>We will use a dataset provided by Leasure and al. as supplement to their paper <span class="citation" data-cites="leasure2020a">(<a href="#ref-leasure2020a" role="doc-biblioref">Douglas R. Leasure et al. 2020a</a>)</span>.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># download  tutorial data</span>
<span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span>
  <span class='st'>"https://www.pnas.org/highwire/filestream/949050/field_highwire_adjunct_files/1/pnas.1913050117.sd01.xls"</span>,
  <span class='st'>'_posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/nga_demo_data.xls'</span>,
  method<span class='op'>=</span><span class='st'>'libcurl'</span>,
  mode<span class='op'>=</span><span class='st'>'wb'</span>
<span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>It consist in household surveys that collected information on the total population in 1141 clusters in 15 of 37 states in Nigeria during 2016 and 2017. The surveys are further described in <span class="citation" data-cites="leasure2020"><a href="#ref-leasure2020" role="doc-biblioref">Douglas R. Leasure et al.</a> (<a href="#ref-leasure2020" role="doc-biblioref">2020b</a>)</span> and <span class="citation" data-cites="weber2018"><a href="#ref-weber2018" role="doc-biblioref">Weber et al.</a> (<a href="#ref-weber2018" role="doc-biblioref">2018</a>)</span>.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># prepare data</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='fu'>readxl</span><span class='fu'>::</span><span class='fu'><a href='https://readxl.tidyverse.org/reference/read_excel.html'>read_excel</a></span><span class='op'>(</span><span class='st'>'_posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/nga_demo_data.xls'</span><span class='op'>)</span>

<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='va'>data</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'cluster'</span>,<span class='fl'>1</span><span class='op'>:</span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span><span class='op'>)</span>,
    pop_density<span class='op'>=</span><span class='va'>N</span><span class='op'>/</span><span class='va'>A</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/rename.html'>rename</a></span><span class='op'>(</span>
    population<span class='op'>=</span><span class='va'>N</span>
  <span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>id</span>, <span class='va'>population</span>, <span class='va'>pop_density</span>, <span class='va'>type</span>, <span class='va'>region</span>, <span class='va'>state</span>, <span class='va'>local</span> <span class='op'>)</span>

<span class='va'>data</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='op'>)</span>  <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kbl.html'>kbl</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_classic.html'>kable_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<table class=" lightable-minimal" style="font-family: &quot;Trebuchet MS&quot;, verdana, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
id
</th>
<th style="text-align:right;">
population
</th>
<th style="text-align:right;">
pop_density
</th>
<th style="text-align:right;">
type
</th>
<th style="text-align:right;">
region
</th>
<th style="text-align:right;">
state
</th>
<th style="text-align:right;">
local
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
cluster1
</td>
<td style="text-align:right;">
547
</td>
<td style="text-align:right;">
180.11207
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
cluster2
</td>
<td style="text-align:right;">
803
</td>
<td style="text-align:right;">
268.57792
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10
</td>
</tr>
<tr>
<td style="text-align:left;">
cluster3
</td>
<td style="text-align:right;">
750
</td>
<td style="text-align:right;">
243.64275
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
cluster4
</td>
<td style="text-align:right;">
281
</td>
<td style="text-align:right;">
93.06772
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
17
</td>
</tr>
<tr>
<td style="text-align:left;">
cluster5
</td>
<td style="text-align:right;">
730
</td>
<td style="text-align:right;">
241.30606
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
cluster6
</td>
<td style="text-align:right;">
529
</td>
<td style="text-align:right;">
171.19344
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
17
</td>
</tr>
</tbody>
</table>
</div>
<p>There are two sources of grouping in the data: by settlement type and by administrative divisions. There is three levels of administrative divisions reported: region, state and local governement area <code>local</code>. Settlement type is characteristic of a <strong>crossed hierarchy</strong>: every settlement type can be (potentially) present in all subgrouping eg in all regions, states or local government area.</p>
<p>We plot first the variation of the response variable <code>population_density</code> by settlement type</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># plot population density per region</span>
<span class='fu'>ggplot</span><span class='op'>(</span><span class='va'>data</span> <span class='op'>%&gt;%</span> 
         <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span>
           <span class='va'>region</span>
         <span class='op'>)</span> <span class='op'>%&gt;%</span> 
         <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
           mean_popDens <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>pop_density</span><span class='op'>)</span>
           <span class='op'>)</span> <span class='op'>%&gt;%</span> 
         <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span>, 
       <span class='fu'>aes</span><span class='op'>(</span>fill<span class='op'>=</span><span class='va'>mean_popDens</span>, x<span class='op'>=</span><span class='va'>pop_density</span>, y<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>region</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>geom_boxplot</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>theme_minimal</span><span class='op'>(</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>scale_fill_stepsn</span><span class='op'>(</span> colours <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html'>brewer.pal</a></span><span class='op'>(</span><span class='fl'>6</span>, <span class='st'>"YlOrRd"</span><span class='op'>)</span><span class='op'>)</span><span class='op'>+</span>
  <span class='fu'>labs</span><span class='op'>(</span>fill<span class='op'>=</span><span class='st'>'Mean \npopulation \ndensity'</span>, x<span class='op'>=</span><span class='st'>'Population density'</span>, y<span class='op'>=</span><span class='st'>'Region'</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div class="figure"><span id="fig:popDens-boxplot"></span>
<img src="unraveling-hierarchichal-data-structure-with-sunburst-charts_files/figure-html5/popDens-boxplot-1.png" alt="Boxplot of population densities per region" width="624" />
<p class="caption">
Figure 1: Boxplot of population densities per region
</p>
</div>
</div>
<p>Figure <a href="#fig:popDens-boxplot">1</a> shows the motivation for building a hierarchical model.</p>
<h1 id="visualising-the-hierarchical-structure">Visualising the hierarchical structure</h1>
<p>We will make the use of the chart type <code>sunburst</code>of the package <code>plotly</code>.</p>
<p>We need first to prepare the data with unique identifier for each administrative region:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create unique id for the nested admin level</span>
<span class='va'>data</span> <span class='op'>&lt;-</span> <span class='va'>data</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>state<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>state</span>,<span class='va'>region</span><span class='op'>)</span>,
         local <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='va'>state</span>, <span class='va'>local</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
</div>
<p>A sunburst chart is divided into concentric layers that are defined by the <code>id</code>of each grouping and its corresponding parent.</p>
<p>We define the first layer, that is the kernel of the circles with the level <code>type</code>from the hierarchy. Because it is the kernel it has no parents we leave this attribute blank. We define also an attribute <code>hover</code>to display the number of clusters in each grouping on hover.</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>layer1</span> <span class='op'>&lt;-</span> <span class='va'>data</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>type</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span><span class='op'>)</span>,
      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'settlement &lt;br&gt;'</span>, <span class='va'>type</span><span class='op'>)</span>,
      parents <span class='op'>=</span> <span class='st'>''</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ids</span>,<span class='va'>labels</span>, <span class='va'>parents</span>,<span class='va'>n</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    hover<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'\n sample size'</span>, <span class='va'>n</span><span class='op'>)</span>
  <span class='op'>)</span>

<span class='fu'><a href='https://docs.ropensci.org/plotly/reference/plot_ly.html'>plot_ly</a></span><span class='op'>(</span><span class='va'>layer1</span>, 
        ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>ids</span>, 
        labels <span class='op'>=</span> <span class='op'>~</span><span class='va'>labels</span>, 
        parents <span class='op'>=</span> <span class='op'>~</span><span class='va'>parents</span>, 
        type <span class='op'>=</span> <span class='st'>'sunburst'</span>, 
        hovertext<span class='op'>=</span><span class='op'>~</span><span class='va'>hover</span>, insidetextorientation<span class='op'>=</span><span class='st'>'radial'</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-ba31c216a55c09f88212" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ba31c216a55c09f88212">{"x":{"visdat":{"820c519f3af5":["function () ","plotlyVisDat"]},"cur_data":"820c519f3af5","attrs":{"820c519f3af5":{"ids":{},"labels":{},"parents":{},"hovertext":{},"insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"ids":["settlement1","settlement2","settlement3","settlement4","settlement5"],"labels":["settlement <br>1","settlement <br>2","settlement <br>3","settlement <br>4","settlement <br>5"],"parents":["","","","",""],"hovertext":["<br /> sample size 117","<br /> sample size 164","<br /> sample size 106","<br /> sample size 113","<br /> sample size 641"],"insidetextorientation":"radial","type":"sunburst","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<p>The next level corresponds the region and has for parent the settlement type ids previously defined:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sunburst_data_2layers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span>
  <span class='co'># first layer</span>
  <span class='va'>layer1</span>,
  <span class='co'># second layer</span>
  <span class='va'>data</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>type</span>, <span class='va'>region</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span><span class='op'>)</span>,
      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'region '</span>, <span class='va'>region</span><span class='op'>)</span>,
      parents <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ids</span>,<span class='va'>labels</span>, <span class='va'>parents</span>,<span class='va'>n</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    hover<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>ids</span>, <span class='st'>'\n sample size'</span>, <span class='va'>n</span><span class='op'>)</span>
  <span class='op'>)</span><span class='op'>)</span> 

<span class='fu'><a href='https://docs.ropensci.org/plotly/reference/plot_ly.html'>plot_ly</a></span><span class='op'>(</span><span class='va'>sunburst_data_2layers</span>, 
        ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>ids</span>, 
        labels <span class='op'>=</span> <span class='op'>~</span><span class='va'>labels</span>,
        parents <span class='op'>=</span> <span class='op'>~</span><span class='va'>parents</span>, 
        type <span class='op'>=</span> <span class='st'>'sunburst'</span>, 
        hovertext<span class='op'>=</span><span class='op'>~</span><span class='va'>hover</span>, insidetextorientation<span class='op'>=</span><span class='st'>'radial'</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div id="htmlwidget-86a627875e80bed4020a" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-86a627875e80bed4020a">{"x":{"visdat":{"820c5e6f3d2f":["function () ","plotlyVisDat"]},"cur_data":"820c5e6f3d2f","attrs":{"820c5e6f3d2f":{"ids":{},"labels":{},"parents":{},"hovertext":{},"insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"ids":["settlement1","settlement2","settlement3","settlement4","settlement5","settlement 1 - region 1","settlement 1 - region 2","settlement 1 - region 3","settlement 1 - region 5","settlement 1 - region 6","settlement 1 - region 7","settlement 1 - region 8","settlement 1 - region 9","settlement 1 - region 11","settlement 2 - region 1","settlement 2 - region 2","settlement 2 - region 3","settlement 2 - region 5","settlement 2 - region 6","settlement 2 - region 7","settlement 2 - region 8","settlement 2 - region 9","settlement 2 - region 11","settlement 3 - region 1","settlement 3 - region 2","settlement 3 - region 3","settlement 3 - region 5","settlement 3 - region 6","settlement 3 - region 7","settlement 3 - region 8","settlement 3 - region 9","settlement 3 - region 11","settlement 4 - region 1","settlement 4 - region 2","settlement 4 - region 3","settlement 4 - region 5","settlement 4 - region 6","settlement 4 - region 7","settlement 4 - region 8","settlement 4 - region 9","settlement 4 - region 11","settlement 5 - region 1","settlement 5 - region 2","settlement 5 - region 3","settlement 5 - region 4","settlement 5 - region 5","settlement 5 - region 6","settlement 5 - region 7","settlement 5 - region 8","settlement 5 - region 9","settlement 5 - region 10","settlement 5 - region 11"],"labels":["settlement <br>1","settlement <br>2","settlement <br>3","settlement <br>4","settlement <br>5","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11"],"parents":["","","","","","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5"],"hovertext":["<br /> sample size 117","<br /> sample size 164","<br /> sample size 106","<br /> sample size 113","<br /> sample size 641","settlement 1 - region 1 <br /> sample size 13","settlement 1 - region 2 <br /> sample size 13","settlement 1 - region 3 <br /> sample size 10","settlement 1 - region 5 <br /> sample size 14","settlement 1 - region 6 <br /> sample size 15","settlement 1 - region 7 <br /> sample size 13","settlement 1 - region 8 <br /> sample size 12","settlement 1 - region 9 <br /> sample size 13","settlement 1 - region 11 <br /> sample size 14","settlement 2 - region 1 <br /> sample size 15","settlement 2 - region 2 <br /> sample size 14","settlement 2 - region 3 <br /> sample size 15","settlement 2 - region 5 <br /> sample size 15","settlement 2 - region 6 <br /> sample size 15","settlement 2 - region 7 <br /> sample size 14","settlement 2 - region 8 <br /> sample size 12","settlement 2 - region 9 <br /> sample size 49","settlement 2 - region 11 <br /> sample size 15","settlement 3 - region 1 <br /> sample size 11","settlement 3 - region 2 <br /> sample size 12","settlement 3 - region 3 <br /> sample size 9","settlement 3 - region 5 <br /> sample size 11","settlement 3 - region 6 <br /> sample size 7","settlement 3 - region 7 <br /> sample size 10","settlement 3 - region 8 <br /> sample size 13","settlement 3 - region 9 <br /> sample size 19","settlement 3 - region 11 <br /> sample size 14","settlement 4 - region 1 <br /> sample size 13","settlement 4 - region 2 <br /> sample size 12","settlement 4 - region 3 <br /> sample size 14","settlement 4 - region 5 <br /> sample size 12","settlement 4 - region 6 <br /> sample size 6","settlement 4 - region 7 <br /> sample size 14","settlement 4 - region 8 <br /> sample size 15","settlement 4 - region 9 <br /> sample size 14","settlement 4 - region 11 <br /> sample size 13","settlement 5 - region 1 <br /> sample size 49","settlement 5 - region 2 <br /> sample size 52","settlement 5 - region 3 <br /> sample size 52","settlement 5 - region 4 <br /> sample size 43","settlement 5 - region 5 <br /> sample size 47","settlement 5 - region 6 <br /> sample size 58","settlement 5 - region 7 <br /> sample size 51","settlement 5 - region 8 <br /> sample size 44","settlement 5 - region 9 <br /> sample size 114","settlement 5 - region 10 <br /> sample size 81","settlement 5 - region 11 <br /> sample size 50"],"insidetextorientation":"radial","type":"sunburst","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<p>To get the full picture we add the two levels, <code>state</code>and <code>local</code> .</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create data for sunburst plot</span>
<span class='va'>sunburst_data_4layers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span>
  <span class='co'># first layer</span>
  <span class='va'>layer1</span>,
  <span class='co'># second layer</span>
  <span class='va'>data</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>type</span>, <span class='va'>region</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span><span class='op'>)</span>,
      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'region '</span>, <span class='va'>region</span><span class='op'>)</span>,
      parents <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ids</span>,<span class='va'>labels</span>, <span class='va'>parents</span>,<span class='va'>n</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    hover<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>ids</span>, <span class='st'>'\n sample size'</span>, <span class='va'>n</span><span class='op'>)</span>
  <span class='op'>)</span>,
  <span class='co'># third layer</span>
  <span class='va'>data</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>type</span>, <span class='va'>region</span>, <span class='va'>state</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span>, <span class='st'>'-'</span>, <span class='st'>'state'</span>, <span class='va'>state</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span><span class='op'>)</span>,
      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'state '</span>, <span class='va'>state</span><span class='op'>)</span>,
      parents <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ids</span>,<span class='va'>labels</span>, <span class='va'>parents</span>,<span class='va'>n</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    hover<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>ids</span>, <span class='st'>'\n sample size'</span>, <span class='va'>n</span><span class='op'>)</span>
  <span class='op'>)</span>,
  <span class='co'># fourth layer</span>
  <span class='va'>data</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>type</span>, <span class='va'>region</span>, <span class='va'>state</span>, <span class='va'>local</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fu'>n</span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span>, <span class='st'>'-'</span>, <span class='st'>'state'</span>, <span class='va'>state</span>,  <span class='st'>'-'</span>, <span class='va'>local</span><span class='op'>)</span>,
      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'local '</span>, <span class='va'>local</span><span class='op'>)</span>,
      parents <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span>, <span class='st'>'-'</span>, <span class='st'>'state'</span>, <span class='va'>state</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ids</span>,<span class='va'>labels</span>, <span class='va'>parents</span>,<span class='va'>n</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
    hover<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>ids</span>, <span class='st'>'\n sample size'</span>, <span class='va'>n</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'><a href='https://docs.ropensci.org/plotly/reference/plot_ly.html'>plot_ly</a></span><span class='op'>(</span><span class='va'>sunburst_data_4layers</span>, 
        ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>ids</span>, 
        labels <span class='op'>=</span> <span class='op'>~</span><span class='va'>labels</span>, 
        parents <span class='op'>=</span> <span class='op'>~</span><span class='va'>parents</span>, 
        type <span class='op'>=</span> <span class='st'>'sunburst'</span>, 
        hovertext<span class='op'>=</span><span class='op'>~</span><span class='va'>hover</span>, insidetextorientation<span class='op'>=</span><span class='st'>'radial'</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div class="figure"><span id="fig:group-schema"></span>
<div id="htmlwidget-c363da11c4848f9013a7" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c363da11c4848f9013a7">{"x":{"visdat":{"820cf197e29":["function () ","plotlyVisDat"]},"cur_data":"820cf197e29","attrs":{"820cf197e29":{"ids":{},"labels":{},"parents":{},"hovertext":{},"insidetextorientation":"radial","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sunburst"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"ids":["settlement1","settlement2","settlement3","settlement4","settlement5","settlement 1 - region 1","settlement 1 - region 2","settlement 1 - region 3","settlement 1 - region 5","settlement 1 - region 6","settlement 1 - region 7","settlement 1 - region 8","settlement 1 - region 9","settlement 1 - region 11","settlement 2 - region 1","settlement 2 - region 2","settlement 2 - region 3","settlement 2 - region 5","settlement 2 - region 6","settlement 2 - region 7","settlement 2 - region 8","settlement 2 - region 9","settlement 2 - region 11","settlement 3 - region 1","settlement 3 - region 2","settlement 3 - region 3","settlement 3 - region 5","settlement 3 - region 6","settlement 3 - region 7","settlement 3 - region 8","settlement 3 - region 9","settlement 3 - region 11","settlement 4 - region 1","settlement 4 - region 2","settlement 4 - region 3","settlement 4 - region 5","settlement 4 - region 6","settlement 4 - region 7","settlement 4 - region 8","settlement 4 - region 9","settlement 4 - region 11","settlement 5 - region 1","settlement 5 - region 2","settlement 5 - region 3","settlement 5 - region 4","settlement 5 - region 5","settlement 5 - region 6","settlement 5 - region 7","settlement 5 - region 8","settlement 5 - region 9","settlement 5 - region 10","settlement 5 - region 11","settlement 1 - region 1 - state 11 - region 1","settlement 1 - region 2 - state 12 - region 2","settlement 1 - region 3 - state 13 - region 3","settlement 1 - region 5 - state 15 - region 5","settlement 1 - region 6 - state 16 - region 6","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 8 - state 18 - region 8","settlement 1 - region 9 - state 29 - region 9","settlement 1 - region 9 - state 39 - region 9","settlement 1 - region 11 - state 111 - region 11","settlement 2 - region 1 - state 11 - region 1","settlement 2 - region 2 - state 12 - region 2","settlement 2 - region 3 - state 13 - region 3","settlement 2 - region 5 - state 15 - region 5","settlement 2 - region 6 - state 16 - region 6","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 8 - state 18 - region 8","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 11 - state 111 - region 11","settlement 3 - region 1 - state 11 - region 1","settlement 3 - region 2 - state 12 - region 2","settlement 3 - region 3 - state 13 - region 3","settlement 3 - region 5 - state 15 - region 5","settlement 3 - region 6 - state 16 - region 6","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 8 - state 18 - region 8","settlement 3 - region 9 - state 29 - region 9","settlement 3 - region 9 - state 39 - region 9","settlement 3 - region 11 - state 111 - region 11","settlement 4 - region 1 - state 11 - region 1","settlement 4 - region 2 - state 12 - region 2","settlement 4 - region 3 - state 13 - region 3","settlement 4 - region 5 - state 15 - region 5","settlement 4 - region 6 - state 16 - region 6","settlement 4 - region 7 - state 17 - region 7","settlement 4 - region 8 - state 18 - region 8","settlement 4 - region 9 - state 29 - region 9","settlement 4 - region 9 - state 39 - region 9","settlement 4 - region 11 - state 111 - region 11","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 22 - region 2","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 8 - state 18 - region 8","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 11 - state 111 - region 11","settlement 1 - region 1 - state 11 - 111","settlement 1 - region 1 - state 11 - 1110","settlement 1 - region 1 - state 11 - 112","settlement 1 - region 2 - state 12 - 1210","settlement 1 - region 2 - state 12 - 1211","settlement 1 - region 2 - state 12 - 1212","settlement 1 - region 2 - state 12 - 1217","settlement 1 - region 2 - state 12 - 123","settlement 1 - region 2 - state 12 - 124","settlement 1 - region 3 - state 13 - 1310","settlement 1 - region 3 - state 13 - 1311","settlement 1 - region 3 - state 13 - 132","settlement 1 - region 5 - state 15 - 157","settlement 1 - region 6 - state 16 - 161","settlement 1 - region 6 - state 16 - 164","settlement 1 - region 7 - state 17 - 172","settlement 1 - region 7 - state 17 - 1720","settlement 1 - region 7 - state 17 - 1721","settlement 1 - region 7 - state 17 - 1727","settlement 1 - region 7 - state 17 - 175","settlement 1 - region 7 - state 17 - 177","settlement 1 - region 7 - state 17 - 178","settlement 1 - region 8 - state 18 - 182","settlement 1 - region 8 - state 18 - 183","settlement 1 - region 8 - state 18 - 184","settlement 1 - region 8 - state 18 - 186","settlement 1 - region 9 - state 29 - 2914","settlement 1 - region 9 - state 29 - 2918","settlement 1 - region 9 - state 39 - 3913","settlement 1 - region 9 - state 39 - 3915","settlement 1 - region 9 - state 39 - 395","settlement 1 - region 11 - state 111 - 11112","settlement 1 - region 11 - state 111 - 11113","settlement 1 - region 11 - state 111 - 11114","settlement 1 - region 11 - state 111 - 11116","settlement 1 - region 11 - state 111 - 11117","settlement 1 - region 11 - state 111 - 1112","settlement 1 - region 11 - state 111 - 1113","settlement 1 - region 11 - state 111 - 1116","settlement 1 - region 11 - state 111 - 1118","settlement 1 - region 11 - state 111 - 1119","settlement 2 - region 1 - state 11 - 1112","settlement 2 - region 1 - state 11 - 1124","settlement 2 - region 1 - state 11 - 116","settlement 2 - region 1 - state 11 - 117","settlement 2 - region 2 - state 12 - 1211","settlement 2 - region 2 - state 12 - 1212","settlement 2 - region 2 - state 12 - 1213","settlement 2 - region 2 - state 12 - 1216","settlement 2 - region 2 - state 12 - 1217","settlement 2 - region 3 - state 13 - 1310","settlement 2 - region 3 - state 13 - 1311","settlement 2 - region 3 - state 13 - 1313","settlement 2 - region 3 - state 13 - 132","settlement 2 - region 5 - state 15 - 157","settlement 2 - region 6 - state 16 - 161","settlement 2 - region 6 - state 16 - 164","settlement 2 - region 7 - state 17 - 1710","settlement 2 - region 7 - state 17 - 1714","settlement 2 - region 7 - state 17 - 1720","settlement 2 - region 7 - state 17 - 1724","settlement 2 - region 7 - state 17 - 1727","settlement 2 - region 7 - state 17 - 175","settlement 2 - region 7 - state 17 - 177","settlement 2 - region 7 - state 17 - 179","settlement 2 - region 8 - state 18 - 182","settlement 2 - region 8 - state 18 - 183","settlement 2 - region 8 - state 18 - 186","settlement 2 - region 9 - state 29 - 291","settlement 2 - region 9 - state 29 - 2913","settlement 2 - region 9 - state 29 - 2914","settlement 2 - region 9 - state 29 - 2918","settlement 2 - region 9 - state 29 - 292","settlement 2 - region 9 - state 29 - 293","settlement 2 - region 9 - state 29 - 297","settlement 2 - region 9 - state 29 - 298","settlement 2 - region 9 - state 39 - 3913","settlement 2 - region 9 - state 39 - 3918","settlement 2 - region 9 - state 39 - 3923","settlement 2 - region 9 - state 39 - 3926","settlement 2 - region 9 - state 39 - 3928","settlement 2 - region 9 - state 39 - 395","settlement 2 - region 9 - state 39 - 397","settlement 2 - region 9 - state 39 - 398","settlement 2 - region 11 - state 111 - 11110","settlement 2 - region 11 - state 111 - 11111","settlement 2 - region 11 - state 111 - 11112","settlement 2 - region 11 - state 111 - 11113","settlement 2 - region 11 - state 111 - 1113","settlement 3 - region 1 - state 11 - 111","settlement 3 - region 1 - state 11 - 1110","settlement 3 - region 1 - state 11 - 112","settlement 3 - region 1 - state 11 - 1124","settlement 3 - region 1 - state 11 - 116","settlement 3 - region 2 - state 12 - 121","settlement 3 - region 2 - state 12 - 1211","settlement 3 - region 2 - state 12 - 1216","settlement 3 - region 2 - state 12 - 1217","settlement 3 - region 3 - state 13 - 1310","settlement 3 - region 3 - state 13 - 1311","settlement 3 - region 3 - state 13 - 1313","settlement 3 - region 5 - state 15 - 154","settlement 3 - region 5 - state 15 - 157","settlement 3 - region 6 - state 16 - 161","settlement 3 - region 6 - state 16 - 164","settlement 3 - region 6 - state 16 - 165","settlement 3 - region 7 - state 17 - 1710","settlement 3 - region 7 - state 17 - 1714","settlement 3 - region 7 - state 17 - 1721","settlement 3 - region 7 - state 17 - 1724","settlement 3 - region 7 - state 17 - 1725","settlement 3 - region 7 - state 17 - 1727","settlement 3 - region 7 - state 17 - 176","settlement 3 - region 8 - state 18 - 182","settlement 3 - region 8 - state 18 - 186","settlement 3 - region 9 - state 29 - 2914","settlement 3 - region 9 - state 29 - 292","settlement 3 - region 9 - state 29 - 293","settlement 3 - region 9 - state 29 - 297","settlement 3 - region 9 - state 29 - 298","settlement 3 - region 9 - state 39 - 3913","settlement 3 - region 9 - state 39 - 3915","settlement 3 - region 9 - state 39 - 3918","settlement 3 - region 9 - state 39 - 3923","settlement 3 - region 9 - state 39 - 3926","settlement 3 - region 11 - state 111 - 1111","settlement 3 - region 11 - state 111 - 11110","settlement 3 - region 11 - state 111 - 11112","settlement 3 - region 11 - state 111 - 11113","settlement 3 - region 11 - state 111 - 11117","settlement 3 - region 11 - state 111 - 1112","settlement 3 - region 11 - state 111 - 1113","settlement 3 - region 11 - state 111 - 1114","settlement 3 - region 11 - state 111 - 1118","settlement 4 - region 1 - state 11 - 1110","settlement 4 - region 1 - state 11 - 1124","settlement 4 - region 1 - state 11 - 116","settlement 4 - region 2 - state 12 - 121","settlement 4 - region 2 - state 12 - 1212","settlement 4 - region 2 - state 12 - 1213","settlement 4 - region 2 - state 12 - 1216","settlement 4 - region 2 - state 12 - 1217","settlement 4 - region 2 - state 12 - 125","settlement 4 - region 3 - state 13 - 1311","settlement 4 - region 5 - state 15 - 157","settlement 4 - region 6 - state 16 - 161","settlement 4 - region 6 - state 16 - 164","settlement 4 - region 7 - state 17 - 1710","settlement 4 - region 7 - state 17 - 1714","settlement 4 - region 7 - state 17 - 1720","settlement 4 - region 7 - state 17 - 176","settlement 4 - region 7 - state 17 - 178","settlement 4 - region 8 - state 18 - 183","settlement 4 - region 8 - state 18 - 186","settlement 4 - region 9 - state 29 - 2913","settlement 4 - region 9 - state 29 - 292","settlement 4 - region 9 - state 29 - 295","settlement 4 - region 9 - state 29 - 297","settlement 4 - region 9 - state 29 - 298","settlement 4 - region 9 - state 39 - 3915","settlement 4 - region 9 - state 39 - 3926","settlement 4 - region 11 - state 111 - 11111","settlement 4 - region 11 - state 111 - 11115","settlement 4 - region 11 - state 111 - 1114","settlement 4 - region 11 - state 111 - 1115","settlement 4 - region 11 - state 111 - 1118","settlement 5 - region 1 - state 11 - 111","settlement 5 - region 1 - state 11 - 1110","settlement 5 - region 1 - state 11 - 1111","settlement 5 - region 1 - state 11 - 1112","settlement 5 - region 1 - state 11 - 1113","settlement 5 - region 1 - state 11 - 1114","settlement 5 - region 1 - state 11 - 1115","settlement 5 - region 1 - state 11 - 1116","settlement 5 - region 1 - state 11 - 1117","settlement 5 - region 1 - state 11 - 1118","settlement 5 - region 1 - state 11 - 1119","settlement 5 - region 1 - state 11 - 112","settlement 5 - region 1 - state 11 - 1120","settlement 5 - region 1 - state 11 - 1121","settlement 5 - region 1 - state 11 - 1122","settlement 5 - region 1 - state 11 - 1123","settlement 5 - region 1 - state 11 - 113","settlement 5 - region 1 - state 11 - 114","settlement 5 - region 1 - state 11 - 115","settlement 5 - region 1 - state 11 - 116","settlement 5 - region 1 - state 11 - 118","settlement 5 - region 1 - state 11 - 119","settlement 5 - region 2 - state 12 - 1210","settlement 5 - region 2 - state 12 - 1211","settlement 5 - region 2 - state 12 - 1214","settlement 5 - region 2 - state 12 - 1215","settlement 5 - region 2 - state 12 - 1217","settlement 5 - region 2 - state 12 - 122","settlement 5 - region 2 - state 12 - 123","settlement 5 - region 2 - state 12 - 124","settlement 5 - region 2 - state 12 - 125","settlement 5 - region 2 - state 12 - 126","settlement 5 - region 2 - state 12 - 127","settlement 5 - region 2 - state 12 - 128","settlement 5 - region 2 - state 12 - 129","settlement 5 - region 2 - state 22 - 221","settlement 5 - region 3 - state 13 - 131","settlement 5 - region 3 - state 13 - 1310","settlement 5 - region 3 - state 13 - 1312","settlement 5 - region 3 - state 13 - 1314","settlement 5 - region 3 - state 13 - 1315","settlement 5 - region 3 - state 13 - 1316","settlement 5 - region 3 - state 13 - 1317","settlement 5 - region 3 - state 13 - 133","settlement 5 - region 3 - state 13 - 134","settlement 5 - region 3 - state 13 - 135","settlement 5 - region 3 - state 13 - 136","settlement 5 - region 3 - state 13 - 137","settlement 5 - region 3 - state 13 - 138","settlement 5 - region 3 - state 13 - 139","settlement 5 - region 4 - state 14 - 141","settlement 5 - region 4 - state 14 - 1410","settlement 5 - region 4 - state 14 - 1411","settlement 5 - region 4 - state 14 - 1412","settlement 5 - region 4 - state 14 - 1413","settlement 5 - region 4 - state 14 - 1414","settlement 5 - region 4 - state 14 - 142","settlement 5 - region 4 - state 14 - 143","settlement 5 - region 4 - state 14 - 144","settlement 5 - region 4 - state 14 - 145","settlement 5 - region 4 - state 14 - 146","settlement 5 - region 4 - state 14 - 147","settlement 5 - region 4 - state 14 - 148","settlement 5 - region 4 - state 14 - 149","settlement 5 - region 5 - state 15 - 151","settlement 5 - region 5 - state 15 - 152","settlement 5 - region 5 - state 15 - 153","settlement 5 - region 5 - state 15 - 154","settlement 5 - region 5 - state 15 - 155","settlement 5 - region 5 - state 15 - 156","settlement 5 - region 5 - state 15 - 157","settlement 5 - region 6 - state 16 - 161","settlement 5 - region 6 - state 16 - 1610","settlement 5 - region 6 - state 16 - 1611","settlement 5 - region 6 - state 16 - 1612","settlement 5 - region 6 - state 16 - 1613","settlement 5 - region 6 - state 16 - 162","settlement 5 - region 6 - state 16 - 163","settlement 5 - region 6 - state 16 - 164","settlement 5 - region 6 - state 16 - 165","settlement 5 - region 6 - state 16 - 166","settlement 5 - region 6 - state 16 - 167","settlement 5 - region 6 - state 16 - 168","settlement 5 - region 6 - state 16 - 169","settlement 5 - region 7 - state 17 - 171","settlement 5 - region 7 - state 17 - 1711","settlement 5 - region 7 - state 17 - 1712","settlement 5 - region 7 - state 17 - 1713","settlement 5 - region 7 - state 17 - 1714","settlement 5 - region 7 - state 17 - 1715","settlement 5 - region 7 - state 17 - 1716","settlement 5 - region 7 - state 17 - 1717","settlement 5 - region 7 - state 17 - 1718","settlement 5 - region 7 - state 17 - 1719","settlement 5 - region 7 - state 17 - 172","settlement 5 - region 7 - state 17 - 1720","settlement 5 - region 7 - state 17 - 1721","settlement 5 - region 7 - state 17 - 1722","settlement 5 - region 7 - state 17 - 1723","settlement 5 - region 7 - state 17 - 1724","settlement 5 - region 7 - state 17 - 1726","settlement 5 - region 7 - state 17 - 1728","settlement 5 - region 7 - state 17 - 1729","settlement 5 - region 7 - state 17 - 173","settlement 5 - region 7 - state 17 - 1730","settlement 5 - region 7 - state 17 - 174","settlement 5 - region 8 - state 18 - 181","settlement 5 - region 8 - state 18 - 182","settlement 5 - region 8 - state 18 - 183","settlement 5 - region 8 - state 18 - 184","settlement 5 - region 8 - state 18 - 185","settlement 5 - region 8 - state 18 - 186","settlement 5 - region 9 - state 19 - 191","settlement 5 - region 9 - state 19 - 1910","settlement 5 - region 9 - state 19 - 1911","settlement 5 - region 9 - state 19 - 1912","settlement 5 - region 9 - state 19 - 1913","settlement 5 - region 9 - state 19 - 1914","settlement 5 - region 9 - state 19 - 1915","settlement 5 - region 9 - state 19 - 192","settlement 5 - region 9 - state 19 - 193","settlement 5 - region 9 - state 19 - 194","settlement 5 - region 9 - state 19 - 195","settlement 5 - region 9 - state 19 - 196","settlement 5 - region 9 - state 19 - 197","settlement 5 - region 9 - state 19 - 198","settlement 5 - region 9 - state 19 - 199","settlement 5 - region 9 - state 29 - 291","settlement 5 - region 9 - state 29 - 2910","settlement 5 - region 9 - state 29 - 2911","settlement 5 - region 9 - state 29 - 2912","settlement 5 - region 9 - state 29 - 2913","settlement 5 - region 9 - state 29 - 2915","settlement 5 - region 9 - state 29 - 2916","settlement 5 - region 9 - state 29 - 2917","settlement 5 - region 9 - state 29 - 292","settlement 5 - region 9 - state 29 - 293","settlement 5 - region 9 - state 29 - 294","settlement 5 - region 9 - state 29 - 295","settlement 5 - region 9 - state 29 - 296","settlement 5 - region 9 - state 29 - 299","settlement 5 - region 9 - state 39 - 391","settlement 5 - region 9 - state 39 - 3910","settlement 5 - region 9 - state 39 - 3911","settlement 5 - region 9 - state 39 - 3912","settlement 5 - region 9 - state 39 - 3914","settlement 5 - region 9 - state 39 - 3916","settlement 5 - region 9 - state 39 - 3917","settlement 5 - region 9 - state 39 - 3919","settlement 5 - region 9 - state 39 - 392","settlement 5 - region 9 - state 39 - 3920","settlement 5 - region 9 - state 39 - 3921","settlement 5 - region 9 - state 39 - 3922","settlement 5 - region 9 - state 39 - 3924","settlement 5 - region 9 - state 39 - 3925","settlement 5 - region 9 - state 39 - 3927","settlement 5 - region 9 - state 39 - 3929","settlement 5 - region 9 - state 39 - 393","settlement 5 - region 9 - state 39 - 394","settlement 5 - region 9 - state 39 - 396","settlement 5 - region 9 - state 39 - 397","settlement 5 - region 9 - state 39 - 399","settlement 5 - region 10 - state 110 - 1101","settlement 5 - region 10 - state 110 - 11010","settlement 5 - region 10 - state 110 - 11011","settlement 5 - region 10 - state 110 - 11012","settlement 5 - region 10 - state 110 - 1102","settlement 5 - region 10 - state 110 - 1103","settlement 5 - region 10 - state 110 - 1104","settlement 5 - region 10 - state 110 - 1105","settlement 5 - region 10 - state 110 - 1106","settlement 5 - region 10 - state 110 - 1107","settlement 5 - region 10 - state 110 - 1108","settlement 5 - region 10 - state 110 - 1109","settlement 5 - region 10 - state 210 - 2101","settlement 5 - region 10 - state 210 - 21010","settlement 5 - region 10 - state 210 - 21011","settlement 5 - region 10 - state 210 - 21012","settlement 5 - region 10 - state 210 - 2102","settlement 5 - region 10 - state 210 - 2103","settlement 5 - region 10 - state 210 - 2104","settlement 5 - region 10 - state 210 - 2105","settlement 5 - region 10 - state 210 - 2106","settlement 5 - region 10 - state 210 - 2107","settlement 5 - region 10 - state 210 - 2108","settlement 5 - region 10 - state 210 - 2109","settlement 5 - region 11 - state 111 - 11112","settlement 5 - region 11 - state 111 - 1114","settlement 5 - region 11 - state 111 - 1116","settlement 5 - region 11 - state 111 - 1117","settlement 5 - region 11 - state 111 - 1118","settlement 5 - region 11 - state 111 - 1119"],"labels":["settlement <br>1","settlement <br>2","settlement <br>3","settlement <br>4","settlement <br>5","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11","state 11","state 12","state 13","state 15","state 16","state 17","state 18","state 29","state 39","state 111","state 11","state 12","state 13","state 15","state 16","state 17","state 18","state 29","state 39","state 111","state 11","state 12","state 13","state 15","state 16","state 17","state 18","state 29","state 39","state 111","state 11","state 12","state 13","state 15","state 16","state 17","state 18","state 29","state 39","state 111","state 11","state 12","state 22","state 13","state 14","state 15","state 16","state 17","state 18","state 19","state 29","state 39","state 110","state 210","state 111","local 111","local 1110","local 112","local 1210","local 1211","local 1212","local 1217","local 123","local 124","local 1310","local 1311","local 132","local 157","local 161","local 164","local 172","local 1720","local 1721","local 1727","local 175","local 177","local 178","local 182","local 183","local 184","local 186","local 2914","local 2918","local 3913","local 3915","local 395","local 11112","local 11113","local 11114","local 11116","local 11117","local 1112","local 1113","local 1116","local 1118","local 1119","local 1112","local 1124","local 116","local 117","local 1211","local 1212","local 1213","local 1216","local 1217","local 1310","local 1311","local 1313","local 132","local 157","local 161","local 164","local 1710","local 1714","local 1720","local 1724","local 1727","local 175","local 177","local 179","local 182","local 183","local 186","local 291","local 2913","local 2914","local 2918","local 292","local 293","local 297","local 298","local 3913","local 3918","local 3923","local 3926","local 3928","local 395","local 397","local 398","local 11110","local 11111","local 11112","local 11113","local 1113","local 111","local 1110","local 112","local 1124","local 116","local 121","local 1211","local 1216","local 1217","local 1310","local 1311","local 1313","local 154","local 157","local 161","local 164","local 165","local 1710","local 1714","local 1721","local 1724","local 1725","local 1727","local 176","local 182","local 186","local 2914","local 292","local 293","local 297","local 298","local 3913","local 3915","local 3918","local 3923","local 3926","local 1111","local 11110","local 11112","local 11113","local 11117","local 1112","local 1113","local 1114","local 1118","local 1110","local 1124","local 116","local 121","local 1212","local 1213","local 1216","local 1217","local 125","local 1311","local 157","local 161","local 164","local 1710","local 1714","local 1720","local 176","local 178","local 183","local 186","local 2913","local 292","local 295","local 297","local 298","local 3915","local 3926","local 11111","local 11115","local 1114","local 1115","local 1118","local 111","local 1110","local 1111","local 1112","local 1113","local 1114","local 1115","local 1116","local 1117","local 1118","local 1119","local 112","local 1120","local 1121","local 1122","local 1123","local 113","local 114","local 115","local 116","local 118","local 119","local 1210","local 1211","local 1214","local 1215","local 1217","local 122","local 123","local 124","local 125","local 126","local 127","local 128","local 129","local 221","local 131","local 1310","local 1312","local 1314","local 1315","local 1316","local 1317","local 133","local 134","local 135","local 136","local 137","local 138","local 139","local 141","local 1410","local 1411","local 1412","local 1413","local 1414","local 142","local 143","local 144","local 145","local 146","local 147","local 148","local 149","local 151","local 152","local 153","local 154","local 155","local 156","local 157","local 161","local 1610","local 1611","local 1612","local 1613","local 162","local 163","local 164","local 165","local 166","local 167","local 168","local 169","local 171","local 1711","local 1712","local 1713","local 1714","local 1715","local 1716","local 1717","local 1718","local 1719","local 172","local 1720","local 1721","local 1722","local 1723","local 1724","local 1726","local 1728","local 1729","local 173","local 1730","local 174","local 181","local 182","local 183","local 184","local 185","local 186","local 191","local 1910","local 1911","local 1912","local 1913","local 1914","local 1915","local 192","local 193","local 194","local 195","local 196","local 197","local 198","local 199","local 291","local 2910","local 2911","local 2912","local 2913","local 2915","local 2916","local 2917","local 292","local 293","local 294","local 295","local 296","local 299","local 391","local 3910","local 3911","local 3912","local 3914","local 3916","local 3917","local 3919","local 392","local 3920","local 3921","local 3922","local 3924","local 3925","local 3927","local 3929","local 393","local 394","local 396","local 397","local 399","local 1101","local 11010","local 11011","local 11012","local 1102","local 1103","local 1104","local 1105","local 1106","local 1107","local 1108","local 1109","local 2101","local 21010","local 21011","local 21012","local 2102","local 2103","local 2104","local 2105","local 2106","local 2107","local 2108","local 2109","local 11112","local 1114","local 1116","local 1117","local 1118","local 1119"],"parents":["","","","","","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement 1 - region 1","settlement 1 - region 2","settlement 1 - region 3","settlement 1 - region 5","settlement 1 - region 6","settlement 1 - region 7","settlement 1 - region 8","settlement 1 - region 9","settlement 1 - region 9","settlement 1 - region 11","settlement 2 - region 1","settlement 2 - region 2","settlement 2 - region 3","settlement 2 - region 5","settlement 2 - region 6","settlement 2 - region 7","settlement 2 - region 8","settlement 2 - region 9","settlement 2 - region 9","settlement 2 - region 11","settlement 3 - region 1","settlement 3 - region 2","settlement 3 - region 3","settlement 3 - region 5","settlement 3 - region 6","settlement 3 - region 7","settlement 3 - region 8","settlement 3 - region 9","settlement 3 - region 9","settlement 3 - region 11","settlement 4 - region 1","settlement 4 - region 2","settlement 4 - region 3","settlement 4 - region 5","settlement 4 - region 6","settlement 4 - region 7","settlement 4 - region 8","settlement 4 - region 9","settlement 4 - region 9","settlement 4 - region 11","settlement 5 - region 1","settlement 5 - region 2","settlement 5 - region 2","settlement 5 - region 3","settlement 5 - region 4","settlement 5 - region 5","settlement 5 - region 6","settlement 5 - region 7","settlement 5 - region 8","settlement 5 - region 9","settlement 5 - region 9","settlement 5 - region 9","settlement 5 - region 10","settlement 5 - region 10","settlement 5 - region 11","settlement 1 - region 1 - state 11 - region 1","settlement 1 - region 1 - state 11 - region 1","settlement 1 - region 1 - state 11 - region 1","settlement 1 - region 2 - state 12 - region 2","settlement 1 - region 2 - state 12 - region 2","settlement 1 - region 2 - state 12 - region 2","settlement 1 - region 2 - state 12 - region 2","settlement 1 - region 2 - state 12 - region 2","settlement 1 - region 2 - state 12 - region 2","settlement 1 - region 3 - state 13 - region 3","settlement 1 - region 3 - state 13 - region 3","settlement 1 - region 3 - state 13 - region 3","settlement 1 - region 5 - state 15 - region 5","settlement 1 - region 6 - state 16 - region 6","settlement 1 - region 6 - state 16 - region 6","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 7 - state 17 - region 7","settlement 1 - region 8 - state 18 - region 8","settlement 1 - region 8 - state 18 - region 8","settlement 1 - region 8 - state 18 - region 8","settlement 1 - region 8 - state 18 - region 8","settlement 1 - region 9 - state 29 - region 9","settlement 1 - region 9 - state 29 - region 9","settlement 1 - region 9 - state 39 - region 9","settlement 1 - region 9 - state 39 - region 9","settlement 1 - region 9 - state 39 - region 9","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 1 - region 11 - state 111 - region 11","settlement 2 - region 1 - state 11 - region 1","settlement 2 - region 1 - state 11 - region 1","settlement 2 - region 1 - state 11 - region 1","settlement 2 - region 1 - state 11 - region 1","settlement 2 - region 2 - state 12 - region 2","settlement 2 - region 2 - state 12 - region 2","settlement 2 - region 2 - state 12 - region 2","settlement 2 - region 2 - state 12 - region 2","settlement 2 - region 2 - state 12 - region 2","settlement 2 - region 3 - state 13 - region 3","settlement 2 - region 3 - state 13 - region 3","settlement 2 - region 3 - state 13 - region 3","settlement 2 - region 3 - state 13 - region 3","settlement 2 - region 5 - state 15 - region 5","settlement 2 - region 6 - state 16 - region 6","settlement 2 - region 6 - state 16 - region 6","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 7 - state 17 - region 7","settlement 2 - region 8 - state 18 - region 8","settlement 2 - region 8 - state 18 - region 8","settlement 2 - region 8 - state 18 - region 8","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 29 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 9 - state 39 - region 9","settlement 2 - region 11 - state 111 - region 11","settlement 2 - region 11 - state 111 - region 11","settlement 2 - region 11 - state 111 - region 11","settlement 2 - region 11 - state 111 - region 11","settlement 2 - region 11 - state 111 - region 11","settlement 3 - region 1 - state 11 - region 1","settlement 3 - region 1 - state 11 - region 1","settlement 3 - region 1 - state 11 - region 1","settlement 3 - region 1 - state 11 - region 1","settlement 3 - region 1 - state 11 - region 1","settlement 3 - region 2 - state 12 - region 2","settlement 3 - region 2 - state 12 - region 2","settlement 3 - region 2 - state 12 - region 2","settlement 3 - region 2 - state 12 - region 2","settlement 3 - region 3 - state 13 - region 3","settlement 3 - region 3 - state 13 - region 3","settlement 3 - region 3 - state 13 - region 3","settlement 3 - region 5 - state 15 - region 5","settlement 3 - region 5 - state 15 - region 5","settlement 3 - region 6 - state 16 - region 6","settlement 3 - region 6 - state 16 - region 6","settlement 3 - region 6 - state 16 - region 6","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 7 - state 17 - region 7","settlement 3 - region 8 - state 18 - region 8","settlement 3 - region 8 - state 18 - region 8","settlement 3 - region 9 - state 29 - region 9","settlement 3 - region 9 - state 29 - region 9","settlement 3 - region 9 - state 29 - region 9","settlement 3 - region 9 - state 29 - region 9","settlement 3 - region 9 - state 29 - region 9","settlement 3 - region 9 - state 39 - region 9","settlement 3 - region 9 - state 39 - region 9","settlement 3 - region 9 - state 39 - region 9","settlement 3 - region 9 - state 39 - region 9","settlement 3 - region 9 - state 39 - region 9","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 3 - region 11 - state 111 - region 11","settlement 4 - region 1 - state 11 - region 1","settlement 4 - region 1 - state 11 - region 1","settlement 4 - region 1 - state 11 - region 1","settlement 4 - region 2 - state 12 - region 2","settlement 4 - region 2 - state 12 - region 2","settlement 4 - region 2 - state 12 - region 2","settlement 4 - region 2 - state 12 - region 2","settlement 4 - region 2 - state 12 - region 2","settlement 4 - region 2 - state 12 - region 2","settlement 4 - region 3 - state 13 - region 3","settlement 4 - region 5 - state 15 - region 5","settlement 4 - region 6 - state 16 - region 6","settlement 4 - region 6 - state 16 - region 6","settlement 4 - region 7 - state 17 - region 7","settlement 4 - region 7 - state 17 - region 7","settlement 4 - region 7 - state 17 - region 7","settlement 4 - region 7 - state 17 - region 7","settlement 4 - region 7 - state 17 - region 7","settlement 4 - region 8 - state 18 - region 8","settlement 4 - region 8 - state 18 - region 8","settlement 4 - region 9 - state 29 - region 9","settlement 4 - region 9 - state 29 - region 9","settlement 4 - region 9 - state 29 - region 9","settlement 4 - region 9 - state 29 - region 9","settlement 4 - region 9 - state 29 - region 9","settlement 4 - region 9 - state 39 - region 9","settlement 4 - region 9 - state 39 - region 9","settlement 4 - region 11 - state 111 - region 11","settlement 4 - region 11 - state 111 - region 11","settlement 4 - region 11 - state 111 - region 11","settlement 4 - region 11 - state 111 - region 11","settlement 4 - region 11 - state 111 - region 11","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 1 - state 11 - region 1","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 12 - region 2","settlement 5 - region 2 - state 22 - region 2","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 3 - state 13 - region 3","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 4 - state 14 - region 4","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 5 - state 15 - region 5","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 6 - state 16 - region 6","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 7 - state 17 - region 7","settlement 5 - region 8 - state 18 - region 8","settlement 5 - region 8 - state 18 - region 8","settlement 5 - region 8 - state 18 - region 8","settlement 5 - region 8 - state 18 - region 8","settlement 5 - region 8 - state 18 - region 8","settlement 5 - region 8 - state 18 - region 8","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 19 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 29 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 9 - state 39 - region 9","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 110 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 10 - state 210 - region 10","settlement 5 - region 11 - state 111 - region 11","settlement 5 - region 11 - state 111 - region 11","settlement 5 - region 11 - state 111 - region 11","settlement 5 - region 11 - state 111 - region 11","settlement 5 - region 11 - state 111 - region 11","settlement 5 - region 11 - state 111 - region 11"],"hovertext":["<br /> sample size 117","<br /> sample size 164","<br /> sample size 106","<br /> sample size 113","<br /> sample size 641","settlement 1 - region 1 <br /> sample size 13","settlement 1 - region 2 <br /> sample size 13","settlement 1 - region 3 <br /> sample size 10","settlement 1 - region 5 <br /> sample size 14","settlement 1 - region 6 <br /> sample size 15","settlement 1 - region 7 <br /> sample size 13","settlement 1 - region 8 <br /> sample size 12","settlement 1 - region 9 <br /> sample size 13","settlement 1 - region 11 <br /> sample size 14","settlement 2 - region 1 <br /> sample size 15","settlement 2 - region 2 <br /> sample size 14","settlement 2 - region 3 <br /> sample size 15","settlement 2 - region 5 <br /> sample size 15","settlement 2 - region 6 <br /> sample size 15","settlement 2 - region 7 <br /> sample size 14","settlement 2 - region 8 <br /> sample size 12","settlement 2 - region 9 <br /> sample size 49","settlement 2 - region 11 <br /> sample size 15","settlement 3 - region 1 <br /> sample size 11","settlement 3 - region 2 <br /> sample size 12","settlement 3 - region 3 <br /> sample size 9","settlement 3 - region 5 <br /> sample size 11","settlement 3 - region 6 <br /> sample size 7","settlement 3 - region 7 <br /> sample size 10","settlement 3 - region 8 <br /> sample size 13","settlement 3 - region 9 <br /> sample size 19","settlement 3 - region 11 <br /> sample size 14","settlement 4 - region 1 <br /> sample size 13","settlement 4 - region 2 <br /> sample size 12","settlement 4 - region 3 <br /> sample size 14","settlement 4 - region 5 <br /> sample size 12","settlement 4 - region 6 <br /> sample size 6","settlement 4 - region 7 <br /> sample size 14","settlement 4 - region 8 <br /> sample size 15","settlement 4 - region 9 <br /> sample size 14","settlement 4 - region 11 <br /> sample size 13","settlement 5 - region 1 <br /> sample size 49","settlement 5 - region 2 <br /> sample size 52","settlement 5 - region 3 <br /> sample size 52","settlement 5 - region 4 <br /> sample size 43","settlement 5 - region 5 <br /> sample size 47","settlement 5 - region 6 <br /> sample size 58","settlement 5 - region 7 <br /> sample size 51","settlement 5 - region 8 <br /> sample size 44","settlement 5 - region 9 <br /> sample size 114","settlement 5 - region 10 <br /> sample size 81","settlement 5 - region 11 <br /> sample size 50","settlement 1 - region 1 - state 11 - region 1 <br /> sample size 13","settlement 1 - region 2 - state 12 - region 2 <br /> sample size 13","settlement 1 - region 3 - state 13 - region 3 <br /> sample size 10","settlement 1 - region 5 - state 15 - region 5 <br /> sample size 14","settlement 1 - region 6 - state 16 - region 6 <br /> sample size 15","settlement 1 - region 7 - state 17 - region 7 <br /> sample size 13","settlement 1 - region 8 - state 18 - region 8 <br /> sample size 12","settlement 1 - region 9 - state 29 - region 9 <br /> sample size 6","settlement 1 - region 9 - state 39 - region 9 <br /> sample size 7","settlement 1 - region 11 - state 111 - region 11 <br /> sample size 14","settlement 2 - region 1 - state 11 - region 1 <br /> sample size 15","settlement 2 - region 2 - state 12 - region 2 <br /> sample size 14","settlement 2 - region 3 - state 13 - region 3 <br /> sample size 15","settlement 2 - region 5 - state 15 - region 5 <br /> sample size 15","settlement 2 - region 6 - state 16 - region 6 <br /> sample size 15","settlement 2 - region 7 - state 17 - region 7 <br /> sample size 14","settlement 2 - region 8 - state 18 - region 8 <br /> sample size 12","settlement 2 - region 9 - state 29 - region 9 <br /> sample size 21","settlement 2 - region 9 - state 39 - region 9 <br /> sample size 28","settlement 2 - region 11 - state 111 - region 11 <br /> sample size 15","settlement 3 - region 1 - state 11 - region 1 <br /> sample size 11","settlement 3 - region 2 - state 12 - region 2 <br /> sample size 12","settlement 3 - region 3 - state 13 - region 3 <br /> sample size 9","settlement 3 - region 5 - state 15 - region 5 <br /> sample size 11","settlement 3 - region 6 - state 16 - region 6 <br /> sample size 7","settlement 3 - region 7 - state 17 - region 7 <br /> sample size 10","settlement 3 - region 8 - state 18 - region 8 <br /> sample size 13","settlement 3 - region 9 - state 29 - region 9 <br /> sample size 11","settlement 3 - region 9 - state 39 - region 9 <br /> sample size 8","settlement 3 - region 11 - state 111 - region 11 <br /> sample size 14","settlement 4 - region 1 - state 11 - region 1 <br /> sample size 13","settlement 4 - region 2 - state 12 - region 2 <br /> sample size 12","settlement 4 - region 3 - state 13 - region 3 <br /> sample size 14","settlement 4 - region 5 - state 15 - region 5 <br /> sample size 12","settlement 4 - region 6 - state 16 - region 6 <br /> sample size 6","settlement 4 - region 7 - state 17 - region 7 <br /> sample size 14","settlement 4 - region 8 - state 18 - region 8 <br /> sample size 15","settlement 4 - region 9 - state 29 - region 9 <br /> sample size 8","settlement 4 - region 9 - state 39 - region 9 <br /> sample size 6","settlement 4 - region 11 - state 111 - region 11 <br /> sample size 13","settlement 5 - region 1 - state 11 - region 1 <br /> sample size 49","settlement 5 - region 2 - state 12 - region 2 <br /> sample size 51","settlement 5 - region 2 - state 22 - region 2 <br /> sample size 1","settlement 5 - region 3 - state 13 - region 3 <br /> sample size 52","settlement 5 - region 4 - state 14 - region 4 <br /> sample size 43","settlement 5 - region 5 - state 15 - region 5 <br /> sample size 47","settlement 5 - region 6 - state 16 - region 6 <br /> sample size 58","settlement 5 - region 7 - state 17 - region 7 <br /> sample size 51","settlement 5 - region 8 - state 18 - region 8 <br /> sample size 44","settlement 5 - region 9 - state 19 - region 9 <br /> sample size 42","settlement 5 - region 9 - state 29 - region 9 <br /> sample size 35","settlement 5 - region 9 - state 39 - region 9 <br /> sample size 37","settlement 5 - region 10 - state 110 - region 10 <br /> sample size 42","settlement 5 - region 10 - state 210 - region 10 <br /> sample size 39","settlement 5 - region 11 - state 111 - region 11 <br /> sample size 50","settlement 1 - region 1 - state 11 - 111 <br /> sample size 2","settlement 1 - region 1 - state 11 - 1110 <br /> sample size 3","settlement 1 - region 1 - state 11 - 112 <br /> sample size 8","settlement 1 - region 2 - state 12 - 1210 <br /> sample size 1","settlement 1 - region 2 - state 12 - 1211 <br /> sample size 1","settlement 1 - region 2 - state 12 - 1212 <br /> sample size 1","settlement 1 - region 2 - state 12 - 1217 <br /> sample size 5","settlement 1 - region 2 - state 12 - 123 <br /> sample size 1","settlement 1 - region 2 - state 12 - 124 <br /> sample size 4","settlement 1 - region 3 - state 13 - 1310 <br /> sample size 1","settlement 1 - region 3 - state 13 - 1311 <br /> sample size 7","settlement 1 - region 3 - state 13 - 132 <br /> sample size 2","settlement 1 - region 5 - state 15 - 157 <br /> sample size 14","settlement 1 - region 6 - state 16 - 161 <br /> sample size 11","settlement 1 - region 6 - state 16 - 164 <br /> sample size 4","settlement 1 - region 7 - state 17 - 172 <br /> sample size 2","settlement 1 - region 7 - state 17 - 1720 <br /> sample size 4","settlement 1 - region 7 - state 17 - 1721 <br /> sample size 1","settlement 1 - region 7 - state 17 - 1727 <br /> sample size 2","settlement 1 - region 7 - state 17 - 175 <br /> sample size 2","settlement 1 - region 7 - state 17 - 177 <br /> sample size 1","settlement 1 - region 7 - state 17 - 178 <br /> sample size 1","settlement 1 - region 8 - state 18 - 182 <br /> sample size 1","settlement 1 - region 8 - state 18 - 183 <br /> sample size 1","settlement 1 - region 8 - state 18 - 184 <br /> sample size 2","settlement 1 - region 8 - state 18 - 186 <br /> sample size 8","settlement 1 - region 9 - state 29 - 2914 <br /> sample size 2","settlement 1 - region 9 - state 29 - 2918 <br /> sample size 4","settlement 1 - region 9 - state 39 - 3913 <br /> sample size 3","settlement 1 - region 9 - state 39 - 3915 <br /> sample size 2","settlement 1 - region 9 - state 39 - 395 <br /> sample size 2","settlement 1 - region 11 - state 111 - 11112 <br /> sample size 2","settlement 1 - region 11 - state 111 - 11113 <br /> sample size 1","settlement 1 - region 11 - state 111 - 11114 <br /> sample size 1","settlement 1 - region 11 - state 111 - 11116 <br /> sample size 2","settlement 1 - region 11 - state 111 - 11117 <br /> sample size 1","settlement 1 - region 11 - state 111 - 1112 <br /> sample size 1","settlement 1 - region 11 - state 111 - 1113 <br /> sample size 2","settlement 1 - region 11 - state 111 - 1116 <br /> sample size 2","settlement 1 - region 11 - state 111 - 1118 <br /> sample size 1","settlement 1 - region 11 - state 111 - 1119 <br /> sample size 1","settlement 2 - region 1 - state 11 - 1112 <br /> sample size 1","settlement 2 - region 1 - state 11 - 1124 <br /> sample size 11","settlement 2 - region 1 - state 11 - 116 <br /> sample size 2","settlement 2 - region 1 - state 11 - 117 <br /> sample size 1","settlement 2 - region 2 - state 12 - 1211 <br /> sample size 3","settlement 2 - region 2 - state 12 - 1212 <br /> sample size 2","settlement 2 - region 2 - state 12 - 1213 <br /> sample size 1","settlement 2 - region 2 - state 12 - 1216 <br /> sample size 4","settlement 2 - region 2 - state 12 - 1217 <br /> sample size 4","settlement 2 - region 3 - state 13 - 1310 <br /> sample size 6","settlement 2 - region 3 - state 13 - 1311 <br /> sample size 3","settlement 2 - region 3 - state 13 - 1313 <br /> sample size 1","settlement 2 - region 3 - state 13 - 132 <br /> sample size 5","settlement 2 - region 5 - state 15 - 157 <br /> sample size 15","settlement 2 - region 6 - state 16 - 161 <br /> sample size 10","settlement 2 - region 6 - state 16 - 164 <br /> sample size 5","settlement 2 - region 7 - state 17 - 1710 <br /> sample size 1","settlement 2 - region 7 - state 17 - 1714 <br /> sample size 3","settlement 2 - region 7 - state 17 - 1720 <br /> sample size 1","settlement 2 - region 7 - state 17 - 1724 <br /> sample size 1","settlement 2 - region 7 - state 17 - 1727 <br /> sample size 3","settlement 2 - region 7 - state 17 - 175 <br /> sample size 2","settlement 2 - region 7 - state 17 - 177 <br /> sample size 2","settlement 2 - region 7 - state 17 - 179 <br /> sample size 1","settlement 2 - region 8 - state 18 - 182 <br /> sample size 6","settlement 2 - region 8 - state 18 - 183 <br /> sample size 1","settlement 2 - region 8 - state 18 - 186 <br /> sample size 5","settlement 2 - region 9 - state 29 - 291 <br /> sample size 1","settlement 2 - region 9 - state 29 - 2913 <br /> sample size 2","settlement 2 - region 9 - state 29 - 2914 <br /> sample size 2","settlement 2 - region 9 - state 29 - 2918 <br /> sample size 5","settlement 2 - region 9 - state 29 - 292 <br /> sample size 2","settlement 2 - region 9 - state 29 - 293 <br /> sample size 4","settlement 2 - region 9 - state 29 - 297 <br /> sample size 4","settlement 2 - region 9 - state 29 - 298 <br /> sample size 1","settlement 2 - region 9 - state 39 - 3913 <br /> sample size 3","settlement 2 - region 9 - state 39 - 3918 <br /> sample size 3","settlement 2 - region 9 - state 39 - 3923 <br /> sample size 3","settlement 2 - region 9 - state 39 - 3926 <br /> sample size 2","settlement 2 - region 9 - state 39 - 3928 <br /> sample size 5","settlement 2 - region 9 - state 39 - 395 <br /> sample size 2","settlement 2 - region 9 - state 39 - 397 <br /> sample size 1","settlement 2 - region 9 - state 39 - 398 <br /> sample size 9","settlement 2 - region 11 - state 111 - 11110 <br /> sample size 1","settlement 2 - region 11 - state 111 - 11111 <br /> sample size 1","settlement 2 - region 11 - state 111 - 11112 <br /> sample size 9","settlement 2 - region 11 - state 111 - 11113 <br /> sample size 1","settlement 2 - region 11 - state 111 - 1113 <br /> sample size 3","settlement 3 - region 1 - state 11 - 111 <br /> sample size 1","settlement 3 - region 1 - state 11 - 1110 <br /> sample size 4","settlement 3 - region 1 - state 11 - 112 <br /> sample size 2","settlement 3 - region 1 - state 11 - 1124 <br /> sample size 3","settlement 3 - region 1 - state 11 - 116 <br /> sample size 1","settlement 3 - region 2 - state 12 - 121 <br /> sample size 1","settlement 3 - region 2 - state 12 - 1211 <br /> sample size 2","settlement 3 - region 2 - state 12 - 1216 <br /> sample size 5","settlement 3 - region 2 - state 12 - 1217 <br /> sample size 4","settlement 3 - region 3 - state 13 - 1310 <br /> sample size 5","settlement 3 - region 3 - state 13 - 1311 <br /> sample size 2","settlement 3 - region 3 - state 13 - 1313 <br /> sample size 2","settlement 3 - region 5 - state 15 - 154 <br /> sample size 2","settlement 3 - region 5 - state 15 - 157 <br /> sample size 9","settlement 3 - region 6 - state 16 - 161 <br /> sample size 3","settlement 3 - region 6 - state 16 - 164 <br /> sample size 2","settlement 3 - region 6 - state 16 - 165 <br /> sample size 2","settlement 3 - region 7 - state 17 - 1710 <br /> sample size 1","settlement 3 - region 7 - state 17 - 1714 <br /> sample size 3","settlement 3 - region 7 - state 17 - 1721 <br /> sample size 1","settlement 3 - region 7 - state 17 - 1724 <br /> sample size 2","settlement 3 - region 7 - state 17 - 1725 <br /> sample size 1","settlement 3 - region 7 - state 17 - 1727 <br /> sample size 1","settlement 3 - region 7 - state 17 - 176 <br /> sample size 1","settlement 3 - region 8 - state 18 - 182 <br /> sample size 1","settlement 3 - region 8 - state 18 - 186 <br /> sample size 12","settlement 3 - region 9 - state 29 - 2914 <br /> sample size 1","settlement 3 - region 9 - state 29 - 292 <br /> sample size 6","settlement 3 - region 9 - state 29 - 293 <br /> sample size 2","settlement 3 - region 9 - state 29 - 297 <br /> sample size 1","settlement 3 - region 9 - state 29 - 298 <br /> sample size 1","settlement 3 - region 9 - state 39 - 3913 <br /> sample size 2","settlement 3 - region 9 - state 39 - 3915 <br /> sample size 1","settlement 3 - region 9 - state 39 - 3918 <br /> sample size 2","settlement 3 - region 9 - state 39 - 3923 <br /> sample size 1","settlement 3 - region 9 - state 39 - 3926 <br /> sample size 2","settlement 3 - region 11 - state 111 - 1111 <br /> sample size 1","settlement 3 - region 11 - state 111 - 11110 <br /> sample size 1","settlement 3 - region 11 - state 111 - 11112 <br /> sample size 1","settlement 3 - region 11 - state 111 - 11113 <br /> sample size 1","settlement 3 - region 11 - state 111 - 11117 <br /> sample size 2","settlement 3 - region 11 - state 111 - 1112 <br /> sample size 1","settlement 3 - region 11 - state 111 - 1113 <br /> sample size 1","settlement 3 - region 11 - state 111 - 1114 <br /> sample size 3","settlement 3 - region 11 - state 111 - 1118 <br /> sample size 3","settlement 4 - region 1 - state 11 - 1110 <br /> sample size 2","settlement 4 - region 1 - state 11 - 1124 <br /> sample size 9","settlement 4 - region 1 - state 11 - 116 <br /> sample size 2","settlement 4 - region 2 - state 12 - 121 <br /> sample size 1","settlement 4 - region 2 - state 12 - 1212 <br /> sample size 1","settlement 4 - region 2 - state 12 - 1213 <br /> sample size 1","settlement 4 - region 2 - state 12 - 1216 <br /> sample size 6","settlement 4 - region 2 - state 12 - 1217 <br /> sample size 2","settlement 4 - region 2 - state 12 - 125 <br /> sample size 1","settlement 4 - region 3 - state 13 - 1311 <br /> sample size 14","settlement 4 - region 5 - state 15 - 157 <br /> sample size 12","settlement 4 - region 6 - state 16 - 161 <br /> sample size 4","settlement 4 - region 6 - state 16 - 164 <br /> sample size 2","settlement 4 - region 7 - state 17 - 1710 <br /> sample size 6","settlement 4 - region 7 - state 17 - 1714 <br /> sample size 1","settlement 4 - region 7 - state 17 - 1720 <br /> sample size 1","settlement 4 - region 7 - state 17 - 176 <br /> sample size 5","settlement 4 - region 7 - state 17 - 178 <br /> sample size 1","settlement 4 - region 8 - state 18 - 183 <br /> sample size 1","settlement 4 - region 8 - state 18 - 186 <br /> sample size 14","settlement 4 - region 9 - state 29 - 2913 <br /> sample size 1","settlement 4 - region 9 - state 29 - 292 <br /> sample size 1","settlement 4 - region 9 - state 29 - 295 <br /> sample size 1","settlement 4 - region 9 - state 29 - 297 <br /> sample size 4","settlement 4 - region 9 - state 29 - 298 <br /> sample size 1","settlement 4 - region 9 - state 39 - 3915 <br /> sample size 1","settlement 4 - region 9 - state 39 - 3926 <br /> sample size 5","settlement 4 - region 11 - state 111 - 11111 <br /> sample size 5","settlement 4 - region 11 - state 111 - 11115 <br /> sample size 1","settlement 4 - region 11 - state 111 - 1114 <br /> sample size 1","settlement 4 - region 11 - state 111 - 1115 <br /> sample size 1","settlement 4 - region 11 - state 111 - 1118 <br /> sample size 5","settlement 5 - region 1 - state 11 - 111 <br /> sample size 2","settlement 5 - region 1 - state 11 - 1110 <br /> sample size 2","settlement 5 - region 1 - state 11 - 1111 <br /> sample size 4","settlement 5 - region 1 - state 11 - 1112 <br /> sample size 2","settlement 5 - region 1 - state 11 - 1113 <br /> sample size 1","settlement 5 - region 1 - state 11 - 1114 <br /> sample size 3","settlement 5 - region 1 - state 11 - 1115 <br /> sample size 1","settlement 5 - region 1 - state 11 - 1116 <br /> sample size 1","settlement 5 - region 1 - state 11 - 1117 <br /> sample size 1","settlement 5 - region 1 - state 11 - 1118 <br /> sample size 2","settlement 5 - region 1 - state 11 - 1119 <br /> sample size 1","settlement 5 - region 1 - state 11 - 112 <br /> sample size 5","settlement 5 - region 1 - state 11 - 1120 <br /> sample size 2","settlement 5 - region 1 - state 11 - 1121 <br /> sample size 2","settlement 5 - region 1 - state 11 - 1122 <br /> sample size 1","settlement 5 - region 1 - state 11 - 1123 <br /> sample size 2","settlement 5 - region 1 - state 11 - 113 <br /> sample size 3","settlement 5 - region 1 - state 11 - 114 <br /> sample size 3","settlement 5 - region 1 - state 11 - 115 <br /> sample size 3","settlement 5 - region 1 - state 11 - 116 <br /> sample size 2","settlement 5 - region 1 - state 11 - 118 <br /> sample size 4","settlement 5 - region 1 - state 11 - 119 <br /> sample size 2","settlement 5 - region 2 - state 12 - 1210 <br /> sample size 5","settlement 5 - region 2 - state 12 - 1211 <br /> sample size 3","settlement 5 - region 2 - state 12 - 1214 <br /> sample size 3","settlement 5 - region 2 - state 12 - 1215 <br /> sample size 6","settlement 5 - region 2 - state 12 - 1217 <br /> sample size 2","settlement 5 - region 2 - state 12 - 122 <br /> sample size 7","settlement 5 - region 2 - state 12 - 123 <br /> sample size 2","settlement 5 - region 2 - state 12 - 124 <br /> sample size 3","settlement 5 - region 2 - state 12 - 125 <br /> sample size 4","settlement 5 - region 2 - state 12 - 126 <br /> sample size 5","settlement 5 - region 2 - state 12 - 127 <br /> sample size 7","settlement 5 - region 2 - state 12 - 128 <br /> sample size 3","settlement 5 - region 2 - state 12 - 129 <br /> sample size 1","settlement 5 - region 2 - state 22 - 221 <br /> sample size 1","settlement 5 - region 3 - state 13 - 131 <br /> sample size 4","settlement 5 - region 3 - state 13 - 1310 <br /> sample size 1","settlement 5 - region 3 - state 13 - 1312 <br /> sample size 2","settlement 5 - region 3 - state 13 - 1314 <br /> sample size 4","settlement 5 - region 3 - state 13 - 1315 <br /> sample size 4","settlement 5 - region 3 - state 13 - 1316 <br /> sample size 4","settlement 5 - region 3 - state 13 - 1317 <br /> sample size 2","settlement 5 - region 3 - state 13 - 133 <br /> sample size 3","settlement 5 - region 3 - state 13 - 134 <br /> sample size 10","settlement 5 - region 3 - state 13 - 135 <br /> sample size 2","settlement 5 - region 3 - state 13 - 136 <br /> sample size 4","settlement 5 - region 3 - state 13 - 137 <br /> sample size 1","settlement 5 - region 3 - state 13 - 138 <br /> sample size 3","settlement 5 - region 3 - state 13 - 139 <br /> sample size 8","settlement 5 - region 4 - state 14 - 141 <br /> sample size 3","settlement 5 - region 4 - state 14 - 1410 <br /> sample size 1","settlement 5 - region 4 - state 14 - 1411 <br /> sample size 3","settlement 5 - region 4 - state 14 - 1412 <br /> sample size 1","settlement 5 - region 4 - state 14 - 1413 <br /> sample size 4","settlement 5 - region 4 - state 14 - 1414 <br /> sample size 6","settlement 5 - region 4 - state 14 - 142 <br /> sample size 8","settlement 5 - region 4 - state 14 - 143 <br /> sample size 1","settlement 5 - region 4 - state 14 - 144 <br /> sample size 3","settlement 5 - region 4 - state 14 - 145 <br /> sample size 5","settlement 5 - region 4 - state 14 - 146 <br /> sample size 1","settlement 5 - region 4 - state 14 - 147 <br /> sample size 4","settlement 5 - region 4 - state 14 - 148 <br /> sample size 2","settlement 5 - region 4 - state 14 - 149 <br /> sample size 1","settlement 5 - region 5 - state 15 - 151 <br /> sample size 5","settlement 5 - region 5 - state 15 - 152 <br /> sample size 7","settlement 5 - region 5 - state 15 - 153 <br /> sample size 1","settlement 5 - region 5 - state 15 - 154 <br /> sample size 10","settlement 5 - region 5 - state 15 - 155 <br /> sample size 6","settlement 5 - region 5 - state 15 - 156 <br /> sample size 10","settlement 5 - region 5 - state 15 - 157 <br /> sample size 8","settlement 5 - region 6 - state 16 - 161 <br /> sample size 1","settlement 5 - region 6 - state 16 - 1610 <br /> sample size 6","settlement 5 - region 6 - state 16 - 1611 <br /> sample size 4","settlement 5 - region 6 - state 16 - 1612 <br /> sample size 7","settlement 5 - region 6 - state 16 - 1613 <br /> sample size 2","settlement 5 - region 6 - state 16 - 162 <br /> sample size 5","settlement 5 - region 6 - state 16 - 163 <br /> sample size 5","settlement 5 - region 6 - state 16 - 164 <br /> sample size 5","settlement 5 - region 6 - state 16 - 165 <br /> sample size 1","settlement 5 - region 6 - state 16 - 166 <br /> sample size 3","settlement 5 - region 6 - state 16 - 167 <br /> sample size 12","settlement 5 - region 6 - state 16 - 168 <br /> sample size 4","settlement 5 - region 6 - state 16 - 169 <br /> sample size 3","settlement 5 - region 7 - state 17 - 171 <br /> sample size 2","settlement 5 - region 7 - state 17 - 1711 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1712 <br /> sample size 4","settlement 5 - region 7 - state 17 - 1713 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1714 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1715 <br /> sample size 2","settlement 5 - region 7 - state 17 - 1716 <br /> sample size 9","settlement 5 - region 7 - state 17 - 1717 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1718 <br /> sample size 2","settlement 5 - region 7 - state 17 - 1719 <br /> sample size 2","settlement 5 - region 7 - state 17 - 172 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1720 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1721 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1722 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1723 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1724 <br /> sample size 2","settlement 5 - region 7 - state 17 - 1726 <br /> sample size 5","settlement 5 - region 7 - state 17 - 1728 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1729 <br /> sample size 7","settlement 5 - region 7 - state 17 - 173 <br /> sample size 1","settlement 5 - region 7 - state 17 - 1730 <br /> sample size 3","settlement 5 - region 7 - state 17 - 174 <br /> sample size 2","settlement 5 - region 8 - state 18 - 181 <br /> sample size 3","settlement 5 - region 8 - state 18 - 182 <br /> sample size 9","settlement 5 - region 8 - state 18 - 183 <br /> sample size 9","settlement 5 - region 8 - state 18 - 184 <br /> sample size 7","settlement 5 - region 8 - state 18 - 185 <br /> sample size 7","settlement 5 - region 8 - state 18 - 186 <br /> sample size 9","settlement 5 - region 9 - state 19 - 191 <br /> sample size 6","settlement 5 - region 9 - state 19 - 1910 <br /> sample size 1","settlement 5 - region 9 - state 19 - 1911 <br /> sample size 5","settlement 5 - region 9 - state 19 - 1912 <br /> sample size 1","settlement 5 - region 9 - state 19 - 1913 <br /> sample size 4","settlement 5 - region 9 - state 19 - 1914 <br /> sample size 1","settlement 5 - region 9 - state 19 - 1915 <br /> sample size 3","settlement 5 - region 9 - state 19 - 192 <br /> sample size 4","settlement 5 - region 9 - state 19 - 193 <br /> sample size 4","settlement 5 - region 9 - state 19 - 194 <br /> sample size 4","settlement 5 - region 9 - state 19 - 195 <br /> sample size 3","settlement 5 - region 9 - state 19 - 196 <br /> sample size 1","settlement 5 - region 9 - state 19 - 197 <br /> sample size 1","settlement 5 - region 9 - state 19 - 198 <br /> sample size 2","settlement 5 - region 9 - state 19 - 199 <br /> sample size 2","settlement 5 - region 9 - state 29 - 291 <br /> sample size 2","settlement 5 - region 9 - state 29 - 2910 <br /> sample size 1","settlement 5 - region 9 - state 29 - 2911 <br /> sample size 2","settlement 5 - region 9 - state 29 - 2912 <br /> sample size 4","settlement 5 - region 9 - state 29 - 2913 <br /> sample size 7","settlement 5 - region 9 - state 29 - 2915 <br /> sample size 1","settlement 5 - region 9 - state 29 - 2916 <br /> sample size 2","settlement 5 - region 9 - state 29 - 2917 <br /> sample size 1","settlement 5 - region 9 - state 29 - 292 <br /> sample size 3","settlement 5 - region 9 - state 29 - 293 <br /> sample size 2","settlement 5 - region 9 - state 29 - 294 <br /> sample size 3","settlement 5 - region 9 - state 29 - 295 <br /> sample size 1","settlement 5 - region 9 - state 29 - 296 <br /> sample size 4","settlement 5 - region 9 - state 29 - 299 <br /> sample size 2","settlement 5 - region 9 - state 39 - 391 <br /> sample size 1","settlement 5 - region 9 - state 39 - 3910 <br /> sample size 2","settlement 5 - region 9 - state 39 - 3911 <br /> sample size 2","settlement 5 - region 9 - state 39 - 3912 <br /> sample size 5","settlement 5 - region 9 - state 39 - 3914 <br /> sample size 3","settlement 5 - region 9 - state 39 - 3916 <br /> sample size 1","settlement 5 - region 9 - state 39 - 3917 <br /> sample size 2","settlement 5 - region 9 - state 39 - 3919 <br /> sample size 1","settlement 5 - region 9 - state 39 - 392 <br /> sample size 1","settlement 5 - region 9 - state 39 - 3920 <br /> sample size 1","settlement 5 - region 9 - state 39 - 3921 <br /> sample size 1","settlement 5 - region 9 - state 39 - 3922 <br /> sample size 1","settlement 5 - region 9 - state 39 - 3924 <br /> sample size 2","settlement 5 - region 9 - state 39 - 3925 <br /> sample size 2","settlement 5 - region 9 - state 39 - 3927 <br /> sample size 1","settlement 5 - region 9 - state 39 - 3929 <br /> sample size 2","settlement 5 - region 9 - state 39 - 393 <br /> sample size 2","settlement 5 - region 9 - state 39 - 394 <br /> sample size 2","settlement 5 - region 9 - state 39 - 396 <br /> sample size 2","settlement 5 - region 9 - state 39 - 397 <br /> sample size 2","settlement 5 - region 9 - state 39 - 399 <br /> sample size 1","settlement 5 - region 10 - state 110 - 1101 <br /> sample size 2","settlement 5 - region 10 - state 110 - 11010 <br /> sample size 2","settlement 5 - region 10 - state 110 - 11011 <br /> sample size 12","settlement 5 - region 10 - state 110 - 11012 <br /> sample size 3","settlement 5 - region 10 - state 110 - 1102 <br /> sample size 1","settlement 5 - region 10 - state 110 - 1103 <br /> sample size 6","settlement 5 - region 10 - state 110 - 1104 <br /> sample size 2","settlement 5 - region 10 - state 110 - 1105 <br /> sample size 1","settlement 5 - region 10 - state 110 - 1106 <br /> sample size 6","settlement 5 - region 10 - state 110 - 1107 <br /> sample size 2","settlement 5 - region 10 - state 110 - 1108 <br /> sample size 2","settlement 5 - region 10 - state 110 - 1109 <br /> sample size 3","settlement 5 - region 10 - state 210 - 2101 <br /> sample size 1","settlement 5 - region 10 - state 210 - 21010 <br /> sample size 3","settlement 5 - region 10 - state 210 - 21011 <br /> sample size 2","settlement 5 - region 10 - state 210 - 21012 <br /> sample size 3","settlement 5 - region 10 - state 210 - 2102 <br /> sample size 2","settlement 5 - region 10 - state 210 - 2103 <br /> sample size 4","settlement 5 - region 10 - state 210 - 2104 <br /> sample size 4","settlement 5 - region 10 - state 210 - 2105 <br /> sample size 3","settlement 5 - region 10 - state 210 - 2106 <br /> sample size 5","settlement 5 - region 10 - state 210 - 2107 <br /> sample size 5","settlement 5 - region 10 - state 210 - 2108 <br /> sample size 4","settlement 5 - region 10 - state 210 - 2109 <br /> sample size 3","settlement 5 - region 11 - state 111 - 11112 <br /> sample size 2","settlement 5 - region 11 - state 111 - 1114 <br /> sample size 3","settlement 5 - region 11 - state 111 - 1116 <br /> sample size 13","settlement 5 - region 11 - state 111 - 1117 <br /> sample size 14","settlement 5 - region 11 - state 111 - 1118 <br /> sample size 2","settlement 5 - region 11 - state 111 - 1119 <br /> sample size 16"],"insidetextorientation":"radial","type":"sunburst","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(255,255,255,1)"}},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 2: Full grouping structure of the survey
</p>
</div>
</div>
<p>Plotly enables interaction with the chart: click on the grouping to get the detailed picture of the hierarchy.</p>
<h1 id="visualising-missing-combinations">Visualising missing combinations</h1>
<p>It is important to explore what are the missing combinations in the data:.</p>
<ol type="1">
<li>to understand the characteristics of our sample</li>
<li>to index correctly the model</li>
</ol>
<p>For that purpose we will make use of the wonderful function from the <code>tidyverse</code>suite: <code>complete</code>.</p>
<p>To demonstrate, we will use the two first layers that are <code>type</code>and <code>region</code>, such that we want to spot the regions that do not contain all settlement types:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># create missing combinations</span>
<span class='va'>data_complete</span> <span class='op'>&lt;-</span> <span class='va'>data</span> <span class='op'>%&gt;%</span> 
  <span class='fu'>complete</span><span class='op'>(</span><span class='va'>region</span>, <span class='fu'>nesting</span><span class='op'>(</span><span class='va'>type</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>data_complete</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>local</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kbl.html'>kbl</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/kableExtra/man/kable_classic.html'>kable_minimal</a></span><span class='op'>(</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<table class=" lightable-minimal" style="font-family: &quot;Trebuchet MS&quot;, verdana, sans-serif; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
region
</th>
<th style="text-align:right;">
type
</th>
<th style="text-align:left;">
id
</th>
<th style="text-align:right;">
population
</th>
<th style="text-align:right;">
pop_density
</th>
<th style="text-align:left;">
state
</th>
<th style="text-align:left;">
local
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<p>We see that two regions (4 and 10) comprise only settlement type 5.</p>
<p>We can visualise it with a sunburst chart by adding a color attribute:</p>
<div class="layout-chunk" data-layout="l-body">
<details>
<summary>
show
</summary>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>makeSunburst2layer</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>layers</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>rbind</a></span><span class='op'>(</span>
  <span class='co'># first layer</span>
  <span class='va'>data</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>type</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>population</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span><span class='op'>)</span>,
      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'settlement &lt;br&gt;'</span>, <span class='va'>type</span><span class='op'>)</span>,
      parents <span class='op'>=</span> <span class='st'>''</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ids</span>,<span class='va'>labels</span>, <span class='va'>parents</span>,<span class='va'>n</span><span class='op'>)</span>,
  <span class='co'># second layer</span>
  <span class='va'>data</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>type</span>, <span class='va'>region</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>n<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>population</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      ids <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span>, <span class='st'>'-'</span>, <span class='st'>'region'</span>, <span class='va'>region</span><span class='op'>)</span>,
      labels <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'region '</span>, <span class='va'>region</span><span class='op'>)</span>,
      parents <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span><span class='op'>(</span><span class='st'>'settlement'</span>, <span class='va'>type</span><span class='op'>)</span><span class='op'>)</span><span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span><span class='op'>(</span><span class='va'>ids</span>,<span class='va'>labels</span>, <span class='va'>parents</span>,<span class='va'>n</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span><span class='op'>(</span>
      hover<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>ids</span>, <span class='st'>'\n sample size'</span>, <span class='va'>n</span><span class='op'>)</span>,
      color<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>n</span><span class='op'>==</span><span class='fl'>0</span>, <span class='st'>'yellow'</span>,<span class='st'>''</span><span class='op'>)</span>
    <span class='op'>)</span>
  
 <span class='kw'><a href='https://rdrr.io/r/base/function.html'>return</a></span><span class='op'>(</span><span class='va'>layers</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='fu'><a href='https://docs.ropensci.org/plotly/reference/plot_ly.html'>plot_ly</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
   <span class='fu'><a href='https://docs.ropensci.org/plotly/reference/add_trace.html'>add_trace</a></span><span class='op'>(</span>data<span class='op'>=</span><span class='fu'>makeSunburst2layer</span><span class='op'>(</span><span class='va'>data</span><span class='op'>)</span>, 
             ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>ids</span>, labels <span class='op'>=</span> <span class='op'>~</span><span class='va'>labels</span>, parents <span class='op'>=</span> <span class='op'>~</span><span class='va'>parents</span>, 
             type <span class='op'>=</span> <span class='st'>'sunburst'</span>, 
             hovertext<span class='op'>=</span><span class='op'>~</span><span class='va'>hover</span>, marker<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>colors<span class='op'>=</span><span class='op'>~</span><span class='va'>color</span><span class='op'>)</span>,  
             insidetextorientation<span class='op'>=</span><span class='st'>'radial'</span>,
             domain <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>column <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%&gt;%</span> 
     <span class='fu'><a href='https://docs.ropensci.org/plotly/reference/add_trace.html'>add_trace</a></span><span class='op'>(</span>data<span class='op'>=</span><span class='fu'>makeSunburst2layer</span><span class='op'>(</span><span class='va'>data_complete</span><span class='op'>)</span>, 
             ids <span class='op'>=</span> <span class='op'>~</span><span class='va'>ids</span>, labels <span class='op'>=</span> <span class='op'>~</span><span class='va'>labels</span>, parents <span class='op'>=</span> <span class='op'>~</span><span class='va'>parents</span>, 
             type <span class='op'>=</span> <span class='st'>'sunburst'</span>, 
             hovertext<span class='op'>=</span><span class='op'>~</span><span class='va'>hover</span>, marker<span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>colors<span class='op'>=</span><span class='op'>~</span><span class='va'>color</span><span class='op'>)</span>,  
             insidetextorientation<span class='op'>=</span><span class='st'>'radial'</span>,
             domain <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>column <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>  <span class='op'>%&gt;%</span>  
  <span class='fu'><a href='https://docs.ropensci.org/plotly/reference/layout.html'>layout</a></span><span class='op'>(</span>
      grid <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>columns <span class='op'>=</span><span class='fl'>2</span>, rows <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span>,
      margin <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>l <span class='op'>=</span> <span class='fl'>0</span>, r <span class='op'>=</span> <span class='fl'>0</span>, b <span class='op'>=</span> <span class='fl'>0</span>, t <span class='op'>=</span> <span class='fl'>0</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</details>
<div class="figure"><span id="fig:group-complete-schema"></span>
<div id="htmlwidget-a08601988a558199aed9" style="width:624px;height:384px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-a08601988a558199aed9">{"x":{"visdat":{"820c657253c9":["function () ","plotlyVisDat"],"820c62d0679":["function () ","data"],"820c26a3b39":["function () ","data"]},"cur_data":"820c26a3b39","attrs":{"820c62d0679":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"ids":{},"labels":{},"parents":{},"type":"sunburst","hovertext":{},"marker":{"colors":{}},"insidetextorientation":"radial","domain":{"column":0},"inherit":true},"820c26a3b39":{"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"ids":{},"labels":{},"parents":{},"type":"sunburst","hovertext":{},"marker":{"colors":{}},"insidetextorientation":"radial","domain":{"column":1},"inherit":true}},"layout":{"margin":{"b":0,"l":0,"t":0,"r":0},"grid":{"columns":2,"rows":1},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"ids":["settlement1","settlement2","settlement3","settlement4","settlement5","settlement 1 - region 1","settlement 1 - region 2","settlement 1 - region 3","settlement 1 - region 5","settlement 1 - region 6","settlement 1 - region 7","settlement 1 - region 8","settlement 1 - region 9","settlement 1 - region 11","settlement 2 - region 1","settlement 2 - region 2","settlement 2 - region 3","settlement 2 - region 5","settlement 2 - region 6","settlement 2 - region 7","settlement 2 - region 8","settlement 2 - region 9","settlement 2 - region 11","settlement 3 - region 1","settlement 3 - region 2","settlement 3 - region 3","settlement 3 - region 5","settlement 3 - region 6","settlement 3 - region 7","settlement 3 - region 8","settlement 3 - region 9","settlement 3 - region 11","settlement 4 - region 1","settlement 4 - region 2","settlement 4 - region 3","settlement 4 - region 5","settlement 4 - region 6","settlement 4 - region 7","settlement 4 - region 8","settlement 4 - region 9","settlement 4 - region 11","settlement 5 - region 1","settlement 5 - region 2","settlement 5 - region 3","settlement 5 - region 4","settlement 5 - region 5","settlement 5 - region 6","settlement 5 - region 7","settlement 5 - region 8","settlement 5 - region 9","settlement 5 - region 10","settlement 5 - region 11"],"labels":["settlement <br>1","settlement <br>2","settlement <br>3","settlement <br>4","settlement <br>5","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 5","region 6","region 7","region 8","region 9","region 11","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11"],"parents":["","","","","","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5"],"type":"sunburst","hovertext":["settlement1 <br /> sample size 117","settlement2 <br /> sample size 164","settlement3 <br /> sample size 106","settlement4 <br /> sample size 113","settlement5 <br /> sample size 641","settlement 1 - region 1 <br /> sample size 13","settlement 1 - region 2 <br /> sample size 13","settlement 1 - region 3 <br /> sample size 10","settlement 1 - region 5 <br /> sample size 14","settlement 1 - region 6 <br /> sample size 15","settlement 1 - region 7 <br /> sample size 13","settlement 1 - region 8 <br /> sample size 12","settlement 1 - region 9 <br /> sample size 13","settlement 1 - region 11 <br /> sample size 14","settlement 2 - region 1 <br /> sample size 15","settlement 2 - region 2 <br /> sample size 14","settlement 2 - region 3 <br /> sample size 15","settlement 2 - region 5 <br /> sample size 15","settlement 2 - region 6 <br /> sample size 15","settlement 2 - region 7 <br /> sample size 14","settlement 2 - region 8 <br /> sample size 12","settlement 2 - region 9 <br /> sample size 49","settlement 2 - region 11 <br /> sample size 15","settlement 3 - region 1 <br /> sample size 11","settlement 3 - region 2 <br /> sample size 12","settlement 3 - region 3 <br /> sample size 9","settlement 3 - region 5 <br /> sample size 11","settlement 3 - region 6 <br /> sample size 7","settlement 3 - region 7 <br /> sample size 10","settlement 3 - region 8 <br /> sample size 13","settlement 3 - region 9 <br /> sample size 19","settlement 3 - region 11 <br /> sample size 14","settlement 4 - region 1 <br /> sample size 13","settlement 4 - region 2 <br /> sample size 12","settlement 4 - region 3 <br /> sample size 14","settlement 4 - region 5 <br /> sample size 12","settlement 4 - region 6 <br /> sample size 6","settlement 4 - region 7 <br /> sample size 14","settlement 4 - region 8 <br /> sample size 15","settlement 4 - region 9 <br /> sample size 14","settlement 4 - region 11 <br /> sample size 13","settlement 5 - region 1 <br /> sample size 49","settlement 5 - region 2 <br /> sample size 52","settlement 5 - region 3 <br /> sample size 52","settlement 5 - region 4 <br /> sample size 43","settlement 5 - region 5 <br /> sample size 47","settlement 5 - region 6 <br /> sample size 58","settlement 5 - region 7 <br /> sample size 51","settlement 5 - region 8 <br /> sample size 44","settlement 5 - region 9 <br /> sample size 114","settlement 5 - region 10 <br /> sample size 81","settlement 5 - region 11 <br /> sample size 50"],"marker":{"color":"rgba(31,119,180,1)","colors":["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],"line":{"color":"rgba(255,255,255,1)"}},"insidetextorientation":"radial","domain":{"column":0},"frame":null},{"ids":["settlement1","settlement2","settlement3","settlement4","settlement5","settlement 1 - region 1","settlement 1 - region 2","settlement 1 - region 3","settlement 1 - region 4","settlement 1 - region 5","settlement 1 - region 6","settlement 1 - region 7","settlement 1 - region 8","settlement 1 - region 9","settlement 1 - region 10","settlement 1 - region 11","settlement 2 - region 1","settlement 2 - region 2","settlement 2 - region 3","settlement 2 - region 4","settlement 2 - region 5","settlement 2 - region 6","settlement 2 - region 7","settlement 2 - region 8","settlement 2 - region 9","settlement 2 - region 10","settlement 2 - region 11","settlement 3 - region 1","settlement 3 - region 2","settlement 3 - region 3","settlement 3 - region 4","settlement 3 - region 5","settlement 3 - region 6","settlement 3 - region 7","settlement 3 - region 8","settlement 3 - region 9","settlement 3 - region 10","settlement 3 - region 11","settlement 4 - region 1","settlement 4 - region 2","settlement 4 - region 3","settlement 4 - region 4","settlement 4 - region 5","settlement 4 - region 6","settlement 4 - region 7","settlement 4 - region 8","settlement 4 - region 9","settlement 4 - region 10","settlement 4 - region 11","settlement 5 - region 1","settlement 5 - region 2","settlement 5 - region 3","settlement 5 - region 4","settlement 5 - region 5","settlement 5 - region 6","settlement 5 - region 7","settlement 5 - region 8","settlement 5 - region 9","settlement 5 - region 10","settlement 5 - region 11"],"labels":["settlement <br>1","settlement <br>2","settlement <br>3","settlement <br>4","settlement <br>5","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11","region 1","region 2","region 3","region 4","region 5","region 6","region 7","region 8","region 9","region 10","region 11"],"parents":["","","","","","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement1","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement2","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement3","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement4","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5","settlement5"],"type":"sunburst","hovertext":["settlement1 <br /> sample size 117","settlement2 <br /> sample size 164","settlement3 <br /> sample size 106","settlement4 <br /> sample size 113","settlement5 <br /> sample size 641","settlement 1 - region 1 <br /> sample size 13","settlement 1 - region 2 <br /> sample size 13","settlement 1 - region 3 <br /> sample size 10","settlement 1 - region 4 <br /> sample size 0","settlement 1 - region 5 <br /> sample size 14","settlement 1 - region 6 <br /> sample size 15","settlement 1 - region 7 <br /> sample size 13","settlement 1 - region 8 <br /> sample size 12","settlement 1 - region 9 <br /> sample size 13","settlement 1 - region 10 <br /> sample size 0","settlement 1 - region 11 <br /> sample size 14","settlement 2 - region 1 <br /> sample size 15","settlement 2 - region 2 <br /> sample size 14","settlement 2 - region 3 <br /> sample size 15","settlement 2 - region 4 <br /> sample size 0","settlement 2 - region 5 <br /> sample size 15","settlement 2 - region 6 <br /> sample size 15","settlement 2 - region 7 <br /> sample size 14","settlement 2 - region 8 <br /> sample size 12","settlement 2 - region 9 <br /> sample size 49","settlement 2 - region 10 <br /> sample size 0","settlement 2 - region 11 <br /> sample size 15","settlement 3 - region 1 <br /> sample size 11","settlement 3 - region 2 <br /> sample size 12","settlement 3 - region 3 <br /> sample size 9","settlement 3 - region 4 <br /> sample size 0","settlement 3 - region 5 <br /> sample size 11","settlement 3 - region 6 <br /> sample size 7","settlement 3 - region 7 <br /> sample size 10","settlement 3 - region 8 <br /> sample size 13","settlement 3 - region 9 <br /> sample size 19","settlement 3 - region 10 <br /> sample size 0","settlement 3 - region 11 <br /> sample size 14","settlement 4 - region 1 <br /> sample size 13","settlement 4 - region 2 <br /> sample size 12","settlement 4 - region 3 <br /> sample size 14","settlement 4 - region 4 <br /> sample size 0","settlement 4 - region 5 <br /> sample size 12","settlement 4 - region 6 <br /> sample size 6","settlement 4 - region 7 <br /> sample size 14","settlement 4 - region 8 <br /> sample size 15","settlement 4 - region 9 <br /> sample size 14","settlement 4 - region 10 <br /> sample size 0","settlement 4 - region 11 <br /> sample size 13","settlement 5 - region 1 <br /> sample size 49","settlement 5 - region 2 <br /> sample size 52","settlement 5 - region 3 <br /> sample size 52","settlement 5 - region 4 <br /> sample size 43","settlement 5 - region 5 <br /> sample size 47","settlement 5 - region 6 <br /> sample size 58","settlement 5 - region 7 <br /> sample size 51","settlement 5 - region 8 <br /> sample size 44","settlement 5 - region 9 <br /> sample size 114","settlement 5 - region 10 <br /> sample size 81","settlement 5 - region 11 <br /> sample size 50"],"marker":{"color":"rgba(255,127,14,1)","colors":["","","","","","","","","yellow","","","","","","yellow","","","","","yellow","","","","","","yellow","","","","","yellow","","","","","","yellow","","","","","yellow","","","","","","yellow","","","","","","","","","","","",""],"line":{"color":"rgba(255,255,255,1)"}},"insidetextorientation":"radial","domain":{"column":1},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 3: Full grouping structure of the survey with missing groups
</p>
</div>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-leasure2020a" class="csl-entry" role="doc-biblioentry">
Leasure, Douglas R., Warren C. Jochem, Eric M. Weber, Vincent Seaman, and Andrew J. Tatem. 2020a. <span>“National Population Mapping from Sparse Survey Data: A Hierarchical Bayesian Modeling Framework to Account for Uncertainty.”</span> <em>Proceedings of the National Academy of Sciences</em> 117 (39): 24173–79. <a href="https://doi.org/10.1073/pnas.1913050117">https://doi.org/10.1073/pnas.1913050117</a>.
</div>
<div id="ref-leasure2020" class="csl-entry" role="doc-biblioentry">
Leasure, Douglas R, Warren C Jochem, Eric M Weber, Vincent Seaman, and Andrew J Tatem. 2020b. <span>“National Population Mapping from Sparse Survey Data: A Hierarchical Bayesian Modeling Framework to Account for Uncertainty.”</span> <em>Proceedings of the National Academy of Sciences</em>.
</div>
<div id="ref-weber2018" class="csl-entry" role="doc-biblioentry">
Weber, Eric M., Vincent Y. Seaman, Robert N. Stewart, Tomas J. Bird, Andrew J. Tatem, Jacob J. McKee, Budhendra L. Bhaduri, Jessica J. Moehl, and Andrew E. Reith. 2018. <span>“Census-Independent Population Mapping in Northern Nigeria.”</span> <em>Remote Sensing of Environment</em> 204 (January): 786–98. <a href="https://doi.org/10.1016/j.rse.2017.09.024">https://doi.org/10.1016/j.rse.2017.09.024</a>.
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>The example sunburst chart is from: <a href="https://www.syncfusion.com/products/wpf/control/images/sfsunburst/sunburst.png">https://www.syncfusion.com/products/wpf/control/images/sfsunburst/sunburst.png)</a>’)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Darin (2021, July 31). Meet Edith: How to get a clear view of hierarchical data? Answer: Sunburst Charts. Retrieved from https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{darin2021how,
  author = {Darin, Edith},
  title = {Meet Edith: How to get a clear view of hierarchical data? Answer: Sunburst Charts},
  url = {https://edarin.github.io/thatsme/posts/2021-07-31-unraveling-hierarchichal-data-structure-with-sunburst-charts/},
  year = {2021}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
